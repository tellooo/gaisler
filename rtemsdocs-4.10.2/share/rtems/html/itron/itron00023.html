<HTML>
<!-- created Dec 13 2011 from task.texi line 531 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>Task Manager dis_dsp - Disable Dispatch</TITLE>
<LINK REL="Precedes" HREF="itron00024.html">
<LINK REV="Precedes" HREF="itron00022.html">
<LINK REV="Subdocument" HREF="itron00006.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="itron00022.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="itron00006.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="itron00024.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS ITRON 3.0 API User's Guide</CITE></P>
<H3>1.4.7: dis_dsp - Disable Dispatch</H3>
<H3>CALLING SEQUENCE:</H3>
<DL><DT><DD>
<PRE>
ER dis_dsp(void);
</PRE>
</DL>
<H3>STATUS CODES:</H3>
<P>
<CODE>E_OK</CODE> - Normal Completion
</P>
<P>
<CODE>E_CTX</CODE> - Context error (issued from task-independent portions or issued after execution of loc_cpu)
</P>
<H3>DESCRIPTION:</H3>
<P>
This system call disables task dispatching.  Dispatching will remain disabled after this call is issued until a subsequent call to ena_dsp is issued. The status of the issuing task will not be allowed to be changed to READY from the RUN.  It cannot be changed into WAIT, either.  However, since external interrupt is not disabled, interrupt handlers are allowed to run even when dispatching has been disabled.  While an executing task may be preempted by an interrupt handler with dispatching disabled, there is no possibility that it will be preempted by another task.
</P>
<P>
The following operations occur during the time dispatching is disabled.
</P>
<UL>
<LI>Even in a situation where normally a task issuing dis_dsp should be preempted by a system call issued by an interrupt handler or by the task issuing dis_dsp, the task that should normally be executed is not dispatched.  Instead, dispatching of this task is delayed until dispatch disabled state is cleared by ena_dsp.

<LI>If an interrupt handler invoked during dispatch disabled state issues sus_tsk for a running task (one that executed dis_dsp) to put it in SUSPEND state, or ter_tsk to put it in DORMANT state, the task transition is delayed until dispatch disabled state is cleared.

<LI>An E_CTX error will result if the task which has executed dis_dsp issues any system calls (such as slp_tsk or wai_sem) capable of putting an issuing task into WAIT state.

<LI>An EN_CTXID error will result if a task which has executed dis_dsp attempts to operate on objects on another node (that is, if the ID parameter of the system call issued refers to an object on another node).

<LI>TSS_DDSP will be returned as sysstat if system status is referenced using ref_sys.
</UL>
No error will result if a task already in dispatch disable state issues dis_dsp.  It only keeps dispatch disabled state.  No matter how many times dis_dsp has been issued, a single ena_dsp enables dispatching again.  It is therefore for the user to determine what to do with nested pairs of dis_dsp and ena_dsp.

<P>
An E_CTX error will result if dis_dsp is issued when both interrupt and dispatching are disabled with loc_cpu.  (For details, see the description of loc_cpu.)
</P>
<H3>NOTES:</H3>
<P>
A running task cannot enter DORMANT or NON-EXISTENT state while dispatching is disabled.  An E_CTX error will result if an running task issues either ext_tsk or exd_tsk while interrupt and dispatching are disabled.  Note however that since both ext_tsk and exd_tsk are system calls which do not return to their original contexts, error notification using return parameters of these system calls is not possible.  If information on detected errors is required it should be left in a messagebuffer used as an error log.
</P>
<P>
Only if the system is not a multiprocessor configuration, system can take advantage of the dispatch disabled state for exclusive inter-task control.
</P>
<P><HR>
<LINK REL="Precedes" HREF="itron00024.html">
<LINK REV="Precedes" HREF="itron00022.html">
<LINK REV="Subdocument" HREF="itron00006.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="itron00022.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="itron00006.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="itron00024.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS ITRON 3.0 API User's Guide</CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
