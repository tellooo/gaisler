<HTML>
<!-- created Dec 13 2011 from msgbuffer.texi line 824 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>Message Buffer Manager ref_mbf - Reference Message Buffer Status</TITLE>
<LINK REL="Precedes" HREF="">
<LINK REV="Precedes" HREF="itron00107.html">
<LINK REV="Subdocument" HREF="itron00097.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="itron00107.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="itron00097.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A><IMG ALIGN=MIDDLE SRC="../images/missing-arrow.gif" ALT="next"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS ITRON 3.0 API User's Guide</CITE></P>
<H3>6.4.9: ref_mbf - Reference Message Buffer Status</H3>
<H3>CALLING SEQUENCE:</H3>
<DL><DT><DD>
<PRE>
ER ref_mbf(
  T_RMBF *pk_rmbf,
  ID mbfid
);
</PRE>
</DL>
<H3>STATUS CODES:</H3>
<P>
<CODE>E_OK</CODE> - Normal Completion
</P>
<P>
<CODE>E_ID</CODE> - Invalid ID number (mbfid was invalid or could not be used)
</P>
<P>
<CODE>E_NOEXS</CODE> - Object does not exist (the message buffer specified by
mbfid does not exist)
</P>
<P>
<CODE>E_OACV</CODE> - Object access violation (A mbfid less than -4 was
specified from a user task.  This is implementation dependent.)
</P>
<P>
<CODE>E_PAR</CODE> - Parameter error (the packet address for the return
parameters could not be used)
</P>
<P>
<CODE>EN_OBJNO</CODE> - An object number which could not be accessed on the
target node is specified.
</P>
<P>
<CODE>EN_CTXID</CODE> - Specified an object on another node when the system
call was issued from a task in dispatch disabled state or from a
task-independent portion
</P>
<P>
<CODE>EN_RPAR</CODE> - A value outside the range supported by the issuing node
and/or transmission packet format was returned as a return parameter (a
value outside supported range for exinf, wtsk, stsk, msgsz and/or
frbufsz on a requesting node)
</P>
<H3>DESCRIPTION:</H3>
<P>
This system call refers to the state of the message buffer specified by
<CODE>mbfid</CODE>, and returns information of a task waiting to send a
message (<CODE>stsk</CODE>), the size of the next message to be received
(<CODE>msgsz</CODE>), the free buffer size (<CODE>frbufsz</CODE>), information of a
task waiting to receive a message (<CODE>wtsk</CODE>), and its extended
information (<CODE>exinf</CODE>).
</P>
<P>
<CODE>Wtsk</CODE> and <CODE>stsk</CODE> indicate whether or not there is a task
waiting for the message buffer in question.  If there is no waiting
task, <CODE>wtsk</CODE> and <CODE>stsk</CODE> are returned as <CODE>FALSE</CODE> = 0.  If
there is a waiting task, <CODE>wtsk</CODE> and <CODE>stsk</CODE> are returned as
values other than 0.
</P>
<P>
An <CODE>E_NOEXS</CODE> error will result if the message buffer specified to
<CODE>ref_mbf</CODE> does not exist.
</P>
<P>
The size of the message at the head of the message buffer (the next
message to be received) is returned to <CODE>msgsz</CODE>.  If there are no
messages on the message buffer, <CODE>msgsz</CODE> will be returned as
<CODE>FALSE</CODE> = 0.  A message whose size is zero cannot be sent.
</P>
<P>
At least one of <CODE>msgsz</CODE> = <CODE>FALSE</CODE> and <CODE>wtsk</CODE> =
<CODE>FALSE</CODE> is always true in this system call.
</P>
<P>
<CODE>Frbufsz</CODE> indicates the amount of free memory in the message
buffer.  This value can be used to know the total approximate size of
the messages which can be sent to the message buffer.
</P>
<H3>NOTES:</H3>
<P>
Multiprocessing is not supported.  Thus none of the &quot;EN_&quot; status codes
will be returned.
</P>
<P><HR>
<LINK REL="Precedes" HREF="">
<LINK REV="Precedes" HREF="itron00107.html">
<LINK REV="Subdocument" HREF="itron00097.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="itron00107.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="itron00097.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A><IMG ALIGN=MIDDLE SRC="../images/missing-arrow.gif" ALT="next"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS ITRON 3.0 API User's Guide</CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
