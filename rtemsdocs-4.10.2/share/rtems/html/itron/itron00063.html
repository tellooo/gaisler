<HTML>
<!-- created Dec 13 2011 from semaphore.texi line 589 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>Semaphore Manager twai_sem - Wait on Semaphore with Timeout</TITLE>
<LINK REL="Precedes" HREF="itron00064.html">
<LINK REV="Precedes" HREF="itron00062.html">
<LINK REV="Subdocument" HREF="itron00052.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="itron00062.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="itron00052.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="itron00064.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS ITRON 3.0 API User's Guide</CITE></P>
<H3>3.4.6: twai_sem - Wait on Semaphore with Timeout</H3>
<H3>CALLING SEQUENCE:</H3>
<DL><DT><DD>
<PRE>
ER twai_sem(
  ID semid,
  TMO tmout
);
</PRE>
</DL>
<H3>STATUS CODES:</H3>
<P>
<CODE>E_OK</CODE> - Normal Completion
</P>
<P>
<CODE>E_ID</CODE> - Invalid ID number (semid was invalid or could not be used)
</P>
<P>
<CODE>E_NOEXS</CODE> - Object does not exist (the semaphore specified by semid
does not exist)
</P>
<P>
<CODE>E_OACV</CODE> - Object access violation (A semid less than -4 was
specified from a user task.  This is implementation dependent.)
</P>
<P>
<CODE>E_PAR</CODE> - Parameter error (tmout is -2 or less)
</P>
<P>
<CODE>E_DLT</CODE> - The object being waited for was deleted (the specified
semaphore was deleted while waiting)
</P>
<P>
<CODE>E_RLWAI</CODE> - Wait state was forcibly released (rel_wai was received
while waiting)
</P>
<P>
<CODE>E_TMOUT</CODE> - Polling failure or timeout exceeded
</P>
<P>
<CODE>E_CTX</CODE> - Context error (issued from task-independent portions or a
task in dispatch disabled state)
</P>
<P>
<CODE>EN_OBJNO</CODE> - An object number which could not be accessed on the
target node is specified.
</P>
<P>
<CODE>EN_PAR</CODE> - A value outside the range supported by the target node
and/or transmission packet format was specified as a parameter (a value
outside supported range was specified for tmout)
</P>
<H3>DESCRIPTION:</H3>
<P>
This routine attempts to acquire the semaphore specified by <CODE>semid</CODE>.
If the semaphore is available (i.e. positive semaphore count), then the
semaphore count is decremented and the calling task returns immediately.
Otherwise the calling tasking is blocked until the semaphore is released
by a subsequent invocation of <CODE>sig_sem</CODE> or the timeout period specified
by <CODE>tmout</CODE> milliseconds is exceeded.  If the timeout period is exceeded,
then the <CODE>E_TMOUT</CODE> error is returned.
</P>
<P>
By specifiying <CODE>tmout</CODE> as <CODE>TMO_FEVR</CODE>, this routine has the same
behavior as <CODE>wai_sem</CODE>.  Similarly, by specifiying <CODE>tmout</CODE> as
<CODE>TMO_POL</CODE>, this routine has the same behavior as <CODE>preq_sem</CODE>.
</P>
<H3>NOTES:</H3>
<P>
Multiprocessing is not supported.  Thus none of the &quot;EN_&quot; status codes
will be returned.
</P>
<P>
This routine may cause the calling task to block.
</P>
<P>
A clock tick is required to support the timeout functionality of
this routine.
</P>
<P><HR>
<LINK REL="Precedes" HREF="itron00064.html">
<LINK REV="Precedes" HREF="itron00062.html">
<LINK REV="Subdocument" HREF="itron00052.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="itron00062.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="itron00052.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="itron00064.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS ITRON 3.0 API User's Guide</CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
