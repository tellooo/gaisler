<HTML>
<!-- created Dec 13 2011 from task.texi line 816 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>Task Manager ref_tsk - Reference Task Status</TITLE>
<LINK REL="Precedes" HREF="">
<LINK REV="Precedes" HREF="itron00028.html">
<LINK REV="Subdocument" HREF="itron00006.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="itron00028.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="itron00006.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A><IMG ALIGN=MIDDLE SRC="../images/missing-arrow.gif" ALT="next"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS ITRON 3.0 API User's Guide</CITE></P>
<H3>1.4.13: ref_tsk - Reference Task Status</H3>
<H3>CALLING SEQUENCE:</H3>
<DL><DT><DD>
<PRE>
ER ref_tsk(
  T_RTSK *pk_rtsk,
  ID tskid
);
</PRE>
</DL>
<H3>STATUS CODES:</H3>
<P>
<CODE>E_OK</CODE> - Normal Completion
</P>
<P>
<CODE>E_ID</CODE> - Invalid ID Number (tskid was invalid or could not be used)
</P>
<P>
<CODE>E_NOEXS</CODE> - Object does not exist (the task specified by tskid does not exist)
</P>
<P>
<CODE>E_OACV</CODE> - Object access violation (A tskid less than -4 was specified from a user task.  This is implementation dependent.)
</P>
<P>
<CODE>E_PAR</CODE> - Parameter error (the packet address for return parameters cannot be used)
</P>
<P>
<CODE>EN_OBJNO</CODE> -  An object number which could not be accessed on the target node is specified.
</P>
<P>
<CODE>EN_CTXID</CODE> - Specified an object on another node when the system call was issued from a task in dispatch disabled state or from a task-independent portion
</P>
<P>
<CODE>EN_RPAR</CODE> - A value outside the range supported by the requesting node and/or transmission packet format was returned as a return parameter (a value outside supported range was returned for exinf, tskpri and/or tskstat)
</P>
<H3>DESCRIPTION:</H3>
<P>
This system call refers to the state of the task specified by tskid, and returns its current priority (tskpri), its task state (tskstat), and its extended information (exinf).
</P>
<P>
Tskstat may take the following values.
</P>
<P>
    tskstat:
</P>
<UL>
<LI>TTS_RUN H'0...01        RUN state (currently running)
<LI>TTS_RDY H'0...02        READY state (ready to run)
<LI>TTS_WAI H'0...04        WAIT state (waiting for something)
<LI>TTS_SUS H'0...08        SUSPEND state (forcibly made to wait)
<LI>TTS_WAS H'0...0c        WAIT-SUSPEND state
<LI>TTS_DMT H'0...10        DORMANT state
</UL>

<P>
Since these task states are expressed by bit correspondences they are convenient when looking for OR conditions (such as whether a task is in RUN or READY state).  TTS_WAS is a combination of both TTS_SUS and TTS_WAI, TTS_SUS does not combine with any of the other states (TTS_RUN, TTS_RDY or TTS_DMT).
</P>
<P>
A task may specify itself by specifying tskid = TSK_SELF = 0.  Note, however, that an E_ID error will result if tskid = TSK_SELF = 0 is specified when this system call is issued from a task-independent portion.
</P>
<P>
An E_NOEXS error will result if the task specified to ref_tsk does not exist.
</P>
<P>
Tskstat will be TTS_RUN if ref_tsk is executed specifying a task which has been interrupted by an interrupt handler.
</P>
<H3>NOTES:</H3>
<P>
The values of TTS_RUN, TTS_RDY, TTS_WAI, etc. as return values for tskstat are not necessarily the same value to be entered in the TCB.  The way in which task state is represented in the TCB is implementation dependent.  When ref_tsk is executed, the internal representation of task state may simply be converted to the standard values TTS_RUN, TTS_RDY, TTS_WAI, etc.
</P>
<P>
Depending on the implementation, the following additional information can also be referenced in addition to exinf, tskpri and tskstat.
</P>
<UL>
<LI>tskwait Reason for wait
<LI>wid     Wait object ID
<LI>wupcnt  Number of queued wakeup requests
<LI>suscnt  Number of nested SUSPEND requests
<LI>tskatr  Task attributes
<LI>task    Task starting address
<LI>itskpri Initial task priority
<LI>stksz   Stack size
</UL>

<P><HR>
<LINK REL="Precedes" HREF="">
<LINK REV="Precedes" HREF="itron00028.html">
<LINK REV="Subdocument" HREF="itron00006.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="itron00028.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="itron00006.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A><IMG ALIGN=MIDDLE SRC="../images/missing-arrow.gif" ALT="next"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS ITRON 3.0 API User's Guide</CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
