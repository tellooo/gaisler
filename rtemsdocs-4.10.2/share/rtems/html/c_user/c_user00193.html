<HTML>
<!-- created Dec 13 2011 from msg.texi line 308 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>Message Manager MESSAGE_QUEUE_CREATE - Create a queue</TITLE>
<LINK REL="Precedes" HREF="c_user00194.html">
<LINK REV="Precedes" HREF="c_user00182.html">
<LINK REV="Subdocument" HREF="c_user00182.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="c_user00182.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="c_user00182.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="c_user00194.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS C User's Guide</CITE></P>
<H3>10.4.1: MESSAGE_QUEUE_CREATE - Create a queue</H3>
<H3>CALLING SEQUENCE:</H3>
<DL><DT><DD>
<PRE>
rtems_status_code rtems_message_queue_create(
  rtems_name        name,
  uint32_t          count,
  size_t            max_message_size,
  rtems_attribute   attribute_set,
  rtems_id         *id
);
</PRE>
</DL>
<H3>DIRECTIVE STATUS CODES:</H3>
<P>
<CODE>RTEMS_SUCCESSFUL</CODE> - queue created successfully<BR>

<CODE>RTEMS_INVALID_NAME</CODE> - invalid queue name<BR>

<CODE>RTEMS_INVALID_ADDRESS</CODE> - <CODE>id</CODE> is NULL<BR>

<CODE>RTEMS_INVALID_NUMBER</CODE> - invalid message count<BR>

<CODE>RTEMS_INVALID_SIZE</CODE> - invalid message size<BR>

<CODE>RTEMS_TOO_MANY</CODE> - too many queues created<BR>

<CODE>RTEMS_UNSATISFIED</CODE> - unable to allocate message buffers<BR>

<CODE>RTEMS_MP_NOT_CONFIGURED</CODE> - multiprocessing not configured<BR>

<CODE>RTEMS_TOO_MANY</CODE> - too many global objects
</P>
<H3>DESCRIPTION:</H3>
<P>
This directive creates a message queue which resides
on the local node with the user-defined name specified in name.
For control and maintenance of the queue, RTEMS allocates and
initializes a QCB.  Memory is allocated from the RTEMS Workspace
for the specified count of messages, each of max_message_size
bytes in length.  The RTEMS-assigned queue id, returned in id,
is used to access the message queue.
</P>
<P>
Specifying <CODE>RTEMS_PRIORITY</CODE> in attribute_set causes tasks
waiting for a message to be serviced according to task priority.
When <CODE>RTEMS_FIFO</CODE> is specified, waiting tasks are serviced
in First In-First Out order.
</P>
<H3>NOTES:</H3>
<P>
This directive will not cause the calling task to be
preempted.
</P>
<P>
The following message queue attribute constants are
defined by RTEMS:
</P>
<UL>
<LI><CODE>RTEMS_FIFO</CODE> - tasks wait by FIFO (default)
<LI><CODE>RTEMS_PRIORITY</CODE> - tasks wait by priority
<LI><CODE>RTEMS_LOCAL</CODE> - local message queue (default)
<LI><CODE>RTEMS_GLOBAL</CODE> - global message queue
</UL>

<P>
Message queues should not be made global unless
remote tasks must interact with the created message queue.  This
is to avoid the system overhead incurred by the creation of a
global message queue.  When a global message queue is created,
the message queue's name and id must be transmitted to every
node in the system for insertion in the local copy of the global
object table.
</P>
<P>
For GLOBAL message queues, the maximum message size
is effectively limited to the longest message which the MPCI is
capable of transmitting.
</P>
<P>
The total number of global objects, including message
queues, is limited by the maximum_global_objects field in the
configuration table.
</P>
<P><HR>
<LINK REL="Precedes" HREF="c_user00194.html">
<LINK REV="Precedes" HREF="c_user00182.html">
<LINK REV="Subdocument" HREF="c_user00182.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="c_user00182.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="c_user00182.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="c_user00194.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS C User's Guide</CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
