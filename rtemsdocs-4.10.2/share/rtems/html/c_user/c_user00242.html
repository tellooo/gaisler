<HTML>
<!-- created Dec 13 2011 from part.texi line 206 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>Partition Manager PARTITION_CREATE - Create a partition</TITLE>
<LINK REL="Precedes" HREF="c_user00243.html">
<LINK REV="Precedes" HREF="c_user00234.html">
<LINK REV="Subdocument" HREF="c_user00234.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="c_user00234.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="c_user00234.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="c_user00243.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS C User's Guide</CITE></P>
<H3>13.4.1: PARTITION_CREATE - Create a partition</H3>
<H3>CALLING SEQUENCE:</H3>
<DL><DT><DD>
<PRE>
rtems_status_code rtems_partition_create(
  rtems_name       name,
  void            *starting_address,
  uint32_t         length,
  uint32_t         buffer_size,
  rtems_attribute  attribute_set,
  rtems_id        *id
);
</PRE>
</DL>
<H3>DIRECTIVE STATUS CODES:</H3>
<P>
<CODE>RTEMS_SUCCESSFUL</CODE> - partition created successfully<BR>

<CODE>RTEMS_INVALID_NAME</CODE> - invalid partition name<BR>

<CODE>RTEMS_TOO_MANY</CODE> - too many partitions created<BR>

<CODE>RTEMS_INVALID_ADDRESS</CODE> - address not on four byte boundary<BR>

<CODE>RTEMS_INVALID_ADDRESS</CODE> - <CODE>starting_address</CODE> is NULL<BR>

<CODE>RTEMS_INVALID_ADDRESS</CODE> - <CODE>id</CODE> is NULL<BR>

<CODE>RTEMS_INVALID_SIZE</CODE> - length or buffer size is 0<BR>

<CODE>RTEMS_INVALID_SIZE</CODE> - length is less than the buffer size<BR>

<CODE>RTEMS_INVALID_SIZE</CODE> - buffer size not a multiple of 4<BR>

<CODE>RTEMS_MP_NOT_CONFIGURED</CODE> - multiprocessing not configured<BR>

<CODE>RTEMS_TOO_MANY</CODE> - too many global objects
</P>
<H3>DESCRIPTION:</H3>
<P>
This directive creates a partition of fixed size
buffers from a physically contiguous memory space which starts
at starting_address and is length bytes in size.  Each allocated
buffer is to be of <CODE>buffer_size</CODE> in bytes.  The assigned
partition id is returned in <CODE>id</CODE>.  This partition id is used to
access the partition with other partition related directives.
For control and maintenance of the partition, RTEMS allocates a
PTCB from the local PTCB free pool and initializes it.
</P>
<H3>NOTES:</H3>
<P>
This directive will not cause the calling task to be
preempted.
</P>
<P>
The <CODE>starting_address</CODE> must be properly aligned for the
target architecture.
</P>
<P>
The <CODE>buffer_size</CODE> parameter must be a multiple of
the CPU alignment factor.  Additionally, <CODE>buffer_size</CODE>
must be large enough to hold two pointers on the target
architecture.  This is required for RTEMS to manage the
buffers when they are free.
</P>
<P>
Memory from the partition is not used by RTEMS to
store the Partition Control Block.
</P>
<P>
The following partition attribute constants are
defined by RTEMS:
</P>
<UL>
<LI><CODE>RTEMS_LOCAL</CODE> - local task (default)
<LI><CODE>RTEMS_GLOBAL</CODE> - global task
</UL>

<P>
The PTCB for a global partition is allocated on the
local node.  The memory space used for the partition must reside
in shared memory. Partitions should not be made global unless
remote tasks must interact with the partition.  This is to avoid
the overhead incurred by the creation of a global partition.
When a global partition is created, the partition's name and id
must be transmitted to every node in the system for insertion in
the local copy of the global object table.
</P>
<P>
The total number of global objects, including
partitions, is limited by the maximum_global_objects field in
the Configuration Table.
</P>
<P><HR>
<LINK REL="Precedes" HREF="c_user00243.html">
<LINK REV="Precedes" HREF="c_user00234.html">
<LINK REV="Subdocument" HREF="c_user00234.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="c_user00234.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="c_user00234.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="c_user00243.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS C User's Guide</CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
