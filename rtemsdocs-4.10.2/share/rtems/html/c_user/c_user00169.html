<HTML>
<!-- created Dec 13 2011 from sem.texi line 387 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>Semaphore Manager Acquiring a Semaphore</TITLE>
<LINK REL="Precedes" HREF="c_user00170.html">
<LINK REV="Precedes" HREF="c_user00168.html">
<LINK REV="Subdocument" HREF="c_user00159.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="c_user00168.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="c_user00159.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="c_user00170.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS C User's Guide</CITE></P>
<H3>9.3.3: Acquiring a Semaphore</H3>
<P>
The <CODE>rtems_semaphore_obtain</CODE> directive is used to acquire the
specified semaphore.  A simplified version of the
<CODE>rtems_semaphore_obtain</CODE> directive can be described as follows:
</P>
<DL><DT><DD>
<PRE>
if semaphore's count is greater than zero
   then decrement semaphore's count
   else wait for release of semaphore

return SUCCESSFUL
</PRE>
</DL>
<P>
When the semaphore cannot be immediately acquired,
one of the following situations applies:
</P>
<UL>
<LI>By default, the calling task will wait forever to
acquire the semaphore.

<LI>Specifying <CODE>RTEMS_NO_WAIT</CODE> forces an immediate return
with an error status code.

<LI>Specifying a timeout limits the interval the task will
wait before returning with an error status code.
</UL>

<P>
If the task waits to acquire the semaphore, then it
is placed in the semaphore's task wait queue in either FIFO or
task priority order.  If the task blocked waiting for a binary
semaphore using priority inheritance and the task's priority is
greater than that of the task currently holding the semaphore,
then the holding task will inherit the priority of the blocking
task.  All tasks waiting on a semaphore are returned an error
code when the semaphore is deleted.
</P>
<P>
When a task successfully obtains a semaphore using
priority ceiling and the priority ceiling for this semaphore is
greater than that of the holder, then the holder's priority will
be elevated.
</P>
<P><HR>
<LINK REL="Precedes" HREF="c_user00170.html">
<LINK REV="Precedes" HREF="c_user00168.html">
<LINK REV="Subdocument" HREF="c_user00159.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="c_user00168.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="c_user00159.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="c_user00170.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS C User's Guide</CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
