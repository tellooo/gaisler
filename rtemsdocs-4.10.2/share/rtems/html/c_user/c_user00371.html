<HTML>
<!-- created Dec 13 2011 from barrier.texi line 240 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>Barrier Manager BARRIER_CREATE - Create a barrier</TITLE>
<LINK REL="Precedes" HREF="c_user00372.html">
<LINK REV="Precedes" HREF="c_user00363.html">
<LINK REV="Subdocument" HREF="c_user00363.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="c_user00363.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="c_user00363.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="c_user00372.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS C User's Guide</CITE></P>
<H3>20.4.1: BARRIER_CREATE - Create a barrier</H3>
<H3>CALLING SEQUENCE:</H3>
<DL><DT><DD>
<PRE>
rtems_status_code rtems_barrier_create(
  rtems_name           name,
  rtems_attribute      attribute_set,
  uint32_t             maximum_waiters,
  rtems_id            *id
);
</PRE>
</DL>
<H3>DIRECTIVE STATUS CODES:</H3>
<P>
<CODE>RTEMS_SUCCESSFUL</CODE> - barrier created successfully<BR>

<CODE>RTEMS_INVALID_NAME</CODE> - invalid barrier name<BR>

<CODE>RTEMS_INVALID_ADDRESS</CODE> - <CODE>id</CODE> is NULL<BR>

<CODE>RTEMS_TOO_MANY</CODE> - too many barriers created@
</P>
<H3>DESCRIPTION:</H3>
<P>
This directive creates a barrier which resides on
the local node. The created barrier has the user-defined name
specified in <CODE>name</CODE> and the initial count specified in <CODE>count</CODE>.  For
control and maintenance of the barrier, RTEMS allocates and
initializes a BCB.  The RTEMS-assigned barrier id is returned
in <CODE>id</CODE>.  This barrier id is used with other barrier related
directives to access the barrier.
</P>
<P>
<CODE>RTEMS_BARRIER_MANUAL_RELEASE</CODE> - only release
</P>
<P>
Specifying <CODE>RTEMS_BARRIER_AUTOMATIC_RELEASE</CODE> in
<CODE>attribute_set</CODE> causes tasks calling the
<CODE>rtems_barrier_wait</CODE> directive to block until
there are <CODE>maximum_waiters - 1</CODE> tasks waiting at the barrier.
When the <CODE>maximum_waiters</CODE> task invokes the
<CODE>rtems_barrier_wait</CODE> directive, the previous
<CODE>maximum_waiters - 1</CODE> tasks are automatically released
and the caller returns.
</P>
<P>
In contrast, when the <CODE>RTEMS_BARRIER_MANUAL_RELEASE</CODE>
attribute is specified, there is no limit on the number of
tasks that will block at the barrier. Only when the
<CODE>rtems_barrier_release</CODE> directive is invoked,
are the tasks waiting at the barrier unblocked.
</P>
<H3>NOTES:</H3>
<P>
This directive will not cause the calling task to be preempted.
</P>
<P>
The following barrier attribute constants are defined by RTEMS:
</P>
<UL>
<LI><CODE>RTEMS_BARRIER_AUTOMATIC_RELEASE</CODE> - automatically
release the barrier when the configured number of tasks are blocked

<LI><CODE>RTEMS_BARRIER_MANUAL_RELEASE</CODE> - only release
the barrier when the application invokes the
<CODE>rtems_barrier_release</CODE> directive.  (default)

</UL>
<P><HR>
<LINK REL="Precedes" HREF="c_user00372.html">
<LINK REV="Precedes" HREF="c_user00363.html">
<LINK REV="Subdocument" HREF="c_user00363.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="c_user00363.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="c_user00363.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="c_user00372.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS C User's Guide</CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
