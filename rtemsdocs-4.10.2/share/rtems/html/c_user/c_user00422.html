<HTML>
<!-- created Dec 13 2011 from conf.texi line 1919 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>Configuring a System Multiprocessor Configuration Table</TITLE>
<LINK REL="Precedes" HREF="c_user00423.html">
<LINK REV="Precedes" HREF="c_user00421.html">
<LINK REV="Subdocument" HREF="c_user00043.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="c_user00421.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="c_user00043.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="c_user00423.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS C User's Guide</CITE></P>
<H2>23.10: Multiprocessor Configuration Table</H2>
<P>
The Multiprocessor Configuration Table contains
information needed when using RTEMS in a multiprocessor
configuration.  Many of the details associated with configuring
a multiprocessor system are dependent on the multiprocessor
communications layer provided by the user.  The address of the
Multiprocessor Configuration Table should be placed in the
<CODE>User_multiprocessing_table</CODE> entry in the primary Configuration
Table.  Further details regarding many of the entries in the
Multiprocessor Configuration Table will be provided in the
Multiprocessing chapter.
</P>
<P>
When using the <CODE>rtems/confdefs.h</CODE> mechanism for configuring
an RTEMS application, the macro <CODE>CONFIGURE_MP_APPLICATION</CODE> must
be defined to automatically generate the Multiprocessor Configuration Table.
If <CODE>CONFIGURE_MP_APPLICATION</CODE>, is not defined, then a NULL pointer
is configured as the address of this table.
</P>
<P>
The format of the Multiprocessor Configuration Table is defined in
the following C structure:
</P>
<DL><DT><DD>
<PRE>
typedef struct {
  uint32_t          node;
  uint32_t          maximum_nodes;
  uint32_t          maximum_global_objects;
  uint32_t          maximum_proxies;
  uint32_t          extra_mpci_receive_server_stack;
  rtems_mpci_table *User_mpci_table;
} rtems_multiprocessing_table;
</PRE>
</DL>
<DL>
<DT><STRONG>node</STRONG>
<DD>
is a unique processor identifier
and is used in routing messages between nodes in a
multiprocessor configuration.  Each processor must have a unique
node number.  RTEMS assumes that node numbers start at one and
increase sequentially.  This assumption can be used to advantage
by the user-supplied MPCI layer.  Typically, this requirement is
made when the node numbers are used to calculate the address of
inter-processor communication links.  Zero should be avoided as
a node number because some MPCI layers use node zero to
represent broadcasted packets.  Thus, it is recommended that
node numbers start at one and increase sequentially.
When using the <CODE>rtems/confdefs.h</CODE> mechanism for configuring
an RTEMS application, the value for this field corresponds
to the setting of the macro <CODE>CONFIGURE_MP_NODE_NUMBER</CODE>.
If not defined by the application, then the <CODE>CONFIGURE_MP_NODE_NUMBER</CODE>
macro defaults to the value of the <CODE>NODE_NUMBER</CODE> macro which is
set on the compiler command line by the RTEMS Multiprocessing Test Suites.

<DT><STRONG>maximum_nodes</STRONG>
<DD>
is the number of processor nodes in the system.
When using the <CODE>rtems/confdefs.h</CODE> mechanism for configuring
an RTEMS application, the value for this field corresponds
to the setting of the macro <CODE>CONFIGURE_MP_MAXIMUM_NODES</CODE>.
If not defined by the application, then the <CODE>CONFIGURE_MP_MAXIMUM_NODES</CODE>
macro defaults to the value 2.

<DT><STRONG>maximum_global_objects</STRONG>
<DD>
is the maximum number of global objects which can exist at any
given moment in the entire system.  If this parameter is not the
same on all nodes in the system, then a fatal error is generated
to inform the user that the system is inconsistent.
When using the <CODE>rtems/confdefs.h</CODE> mechanism for configuring
an RTEMS application, the value for this field corresponds
to the setting of the macro <CODE>CONFIGURE_MP_MAXIMUM_GLOBAL_OBJECTS</CODE>.
If not defined by the application, then the
<CODE>CONFIGURE_MP_MAXIMUM_GLOBAL_OBJECTS</CODE> macro defaults to the value 32.

<DT><STRONG>maximum_proxies</STRONG>
<DD>
is the maximum number of proxies which can exist at any given moment
on this particular node.  A proxy is a substitute task control block
which represent a task residing on a remote node when that task blocks
on a remote object.  Proxies are used in situations in which delayed
interaction is required with a remote node.
When using the <CODE>rtems/confdefs.h</CODE> mechanism for configuring
an RTEMS application, the value for this field corresponds
to the setting of the macro <CODE>CONFIGURE_MP_MAXIMUM_PROXIES</CODE>.
If not defined by the application, then the <CODE>CONFIGURE_MP_MAXIMUM_PROXIES</CODE>
macro defaults to the value 32.

<DT><STRONG>extra_mpci_receive_server_stack</STRONG>
<DD>
is the extra stack space allocated for the RTEMS MPCI receive server task
in bytes.  The MPCI receive server may invoke nearly all directives and
may require extra stack space on some targets.

<DT><STRONG>User_mpci_table</STRONG>
<DD>
is the address of the Multiprocessor Communications Interface
Table.  This table contains the entry points of user-provided functions
which constitute the multiprocessor communications layer.  This table
must be provided in multiprocessor configurations with all
entries configured.  The format of this table and details
regarding its entries can be found in the next section.
When using the <CODE>rtems/confdefs.h</CODE> mechanism for configuring
an RTEMS application, the value for this field corresponds
to the setting of the macro <CODE>CONFIGURE_MP_MPCI_TABLE_POINTER</CODE>.
If not defined by the application, then the
<CODE>CONFIGURE_MP_MPCI_TABLE_POINTER</CODE> macro defaults to the
address of the table named <CODE>MPCI_table</CODE>.

</DL>
<P><HR>
<LINK REL="Precedes" HREF="c_user00423.html">
<LINK REV="Precedes" HREF="c_user00421.html">
<LINK REV="Subdocument" HREF="c_user00043.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="c_user00421.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="c_user00043.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="c_user00423.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS C User's Guide</CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
