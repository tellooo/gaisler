<HTML>
<!-- created Dec 13 2011 from init.texi line 176 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>Initialization Manager Initializing RTEMS</TITLE>
<LINK REL="Precedes" HREF="c_user00042.html">
<LINK REV="Precedes" HREF="c_user00034.html">
<LINK REV="Subdocument" HREF="c_user00034.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="c_user00034.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="c_user00034.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="c_user00042.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS C User's Guide</CITE></P>
<H3>4.3.1: Initializing RTEMS</H3>
<P>
The Initialization Manager directives are called by the
Board Support Package framework as part of its initialization
sequence.  RTEMS assumes that the Board Support Package
successfully completed its initialization activities.  These
directives initialize RTEMS by performing the following actions:
</P>
<UL>
<LI>Initializing internal RTEMS variables;
<LI>Allocating system resources;
<LI>Creating and starting the Idle Task;
<LI>Initialize all device drivers;
<LI>Creating and starting the user initialization task(s); and
<LI>Initiating multitasking.
</UL>

<P>
The initialization directives MUST be called in the proper
sequence before any blocking directives may be used.  The services
in this manager should be invoked just once per application
and in precisely the following order:
</P>
<UL>
<LI><CODE>rtems_initialize_data_structures</CODE>
<LI><CODE>rtems_initialize_before_drivers</CODE>
<LI><CODE>rtems_initialize_device_drivers</CODE>
<LI><CODE>rtems_initialize_start_multitasking</CODE>
</UL>

<P>
It is recommended that the Board Support Package use the
provided framework which will invoke these services as
part of the executing the function <CODE>boot_card</CODE> in the
file <CODE>c/src/lib/libbsp/shared/bootcard.c</CODE>.  This
framework will also assist in allocating memory to the
RTEMS Workspace and C Program Heap and initializing the
C Library.
</P>
<P>
The effect of calling any blocking RTEMS directives before
<CODE>rtems_initialize_start_multitasking</CODE>
is unpredictable but guaranteed to be bad.  After the
directive <CODE>rtems_initialize_data_structures</CODE>
is invoked, it is permissible to allocate RTEMS objects and
perform non-blocking operations.  But the user should be
distinctly aware that multitasking is not available yet
and they are <STRONG>NOT</STRONG> executing in a task context.
</P>
<P>
Many of RTEMS actions during initialization are based upon
the contents of the Configuration Table.  For more information
regarding the format and contents of this table, please refer
to the chapter <A HREF="c_user00043.html">Configuring a System</A>.
</P>
<P>
The final step in the initialization sequence is the
initiation of multitasking.  When the scheduler and dispatcher
are enabled, the highest priority, ready task will be dispatched
to run.  Control will not be returned to the Board Support
Package after multitasking is enabled until the
<CODE>rtems_shutdown_executive</CODE> directive is called.
This directive is called as a side-effect of POSIX calls
including <CODE>exit</CODE>.
</P>
<P><HR>
<LINK REL="Precedes" HREF="c_user00042.html">
<LINK REV="Precedes" HREF="c_user00034.html">
<LINK REV="Subdocument" HREF="c_user00034.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="c_user00034.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="c_user00034.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="c_user00042.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS C User's Guide</CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
