<HTML>
<!-- created Dec 13 2011 from sem.texi line 745 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>Semaphore Manager SEMAPHORE_OBTAIN - Acquire a semaphore</TITLE>
<LINK REL="Precedes" HREF="c_user00176.html">
<LINK REV="Precedes" HREF="c_user00174.html">
<LINK REV="Subdocument" HREF="c_user00160.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="c_user00174.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="c_user00160.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="c_user00176.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS C User's Guide</CITE></P>
<H3>9.4.4: SEMAPHORE_OBTAIN - Acquire a semaphore</H3>
<H3>CALLING SEQUENCE:</H3>
<DL><DT><DD>
<PRE>
rtems_status_code rtems_semaphore_obtain(
  rtems_id        id,
  rtems_option    option_set,
  rtems_interval  timeout
);
</PRE>
</DL>
<H3>DIRECTIVE STATUS CODES:</H3>
<P>
<CODE>RTEMS_SUCCESSFUL</CODE> - semaphore obtained successfully<BR>

<CODE>RTEMS_UNSATISFIED</CODE> - semaphore not available<BR>

<CODE>RTEMS_TIMEOUT</CODE> - timed out waiting for semaphore<BR>

<CODE>RTEMS_OBJECT_WAS_DELETED</CODE> - semaphore deleted while waiting<BR>

<CODE>RTEMS_INVALID_ID</CODE> - invalid semaphore id
</P>
<H3>DESCRIPTION:</H3>
<P>
This directive acquires the semaphore specified by
id.  The <CODE>RTEMS_WAIT</CODE> and <CODE>RTEMS_NO_WAIT</CODE> components of the options parameter
indicate whether the calling task wants to wait for the
semaphore to become available or return immediately if the
semaphore is not currently available.  With either <CODE>RTEMS_WAIT</CODE> or
<CODE>RTEMS_NO_WAIT</CODE>, if the current semaphore count is positive, then it is
decremented by one and the semaphore is successfully acquired by
returning immediately with a successful return code.
</P>
<P>
If the calling task chooses to return immediately and the current
semaphore count is zero or negative, then a status code is returned
indicating that the semaphore is not available. If the calling task
chooses to wait for a semaphore and the current semaphore count is zero or
negative, then it is decremented by one and the calling task is placed on
the semaphore's wait queue and blocked.  If the semaphore was created with
the <CODE>RTEMS_PRIORITY</CODE> attribute, then the calling task is
inserted into the queue according to its priority.  However, if the
semaphore was created with the <CODE>RTEMS_FIFO</CODE> attribute, then
the calling task is placed at the rear of the wait queue.  If the binary
semaphore was created with the <CODE>RTEMS_INHERIT_PRIORITY</CODE>
attribute, then the priority of the task currently holding the binary
semaphore is guaranteed to be greater than or equal to that of the
blocking task.  If the binary semaphore was created with the
<CODE>RTEMS_PRIORITY_CEILING</CODE> attribute, a task successfully
obtains the semaphore, and the priority of that task is greater than the
ceiling priority for this semaphore, then the priority of the task
obtaining the semaphore is elevated to that of the ceiling.
</P>
<P>
The timeout parameter specifies the maximum interval the calling task is
willing to be blocked waiting for the semaphore.  If it is set to
<CODE>RTEMS_NO_TIMEOUT</CODE>, then the calling task will wait forever.
If the semaphore is available or the <CODE>RTEMS_NO_WAIT</CODE> option
component is set, then timeout is ignored.
</P>
<H3>NOTES:</H3>
<P>
The following semaphore acquisition option constants
are defined by RTEMS:
</P>
<UL>
<LI><CODE>RTEMS_WAIT</CODE> - task will wait for semaphore (default)
<LI><CODE>RTEMS_NO_WAIT</CODE> - task should not wait
</UL>

<P>
Attempting to obtain a global semaphore which does not reside on the local
node will generate a request to the remote node to access the semaphore.
If the semaphore is not available and <CODE>RTEMS_NO_WAIT</CODE> was
not specified, then the task must be blocked until the semaphore is
released.  A proxy is allocated on the remote node to represent the task
until the semaphore is released.
</P>
<P>
A clock tick is required to support the timeout functionality of
this directive.
</P>
<P><HR>
<LINK REL="Precedes" HREF="c_user00176.html">
<LINK REV="Precedes" HREF="c_user00174.html">
<LINK REV="Subdocument" HREF="c_user00160.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="c_user00174.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="c_user00160.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="c_user00176.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS C User's Guide</CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
