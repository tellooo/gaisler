<HTML>
<!-- created Dec 13 2011 from framebuffer.texi line 64 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>Frame Buffer Driver Initialization</TITLE>
<LINK REL="Precedes" HREF="bsp_howto00140.html">
<LINK REV="Precedes" HREF="bsp_howto00138.html">
<LINK REV="Subdocument" HREF="bsp_howto00138.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="bsp_howto00138.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="bsp_howto00138.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="bsp_howto00140.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>BSP and Device Driver Development Guide</CITE></P>
<H3>17.2.1: Initialization</H3>
<P>
The driver initialization is called once during the RTEMS initialization
process and returns RTEMS_SUCCESSFUL when the device driver is successfully
initialized. During the initialization, a name is assigned to the frame
buffer device.  If the graphics hardware supports console text output,
as is the case with the pc386 VGA hardware, initialization into graphics
mode may be deferred until the device is <CODE>open()</CODE>ed.
</P>
<P>
The <CODE>frame_buffer_initialize()</CODE> function may look like this:
</P>
<DL><DT><DD>
<PRE>
rtems_device_driver frame_buffer_initialize(
  rtems_device_major_number  major,
  rtems_device_minor_number  minor,
  void                      *arg)
{
  rtems_status_code status;

  printk( &quot;frame buffer driver initializing..\n&quot; );

  /*
   * Register the device
   */
  status = rtems_io_register_name(&quot;/dev/fb0&quot;, major, 0);
  if (status != RTEMS_SUCCESSFUL)
  {
    printk(&quot;Error registering frame buffer device!\n&quot;);
    rtems_fatal_error_occurred( status );
  }

   /*
    * graphics hardware initialization goes here for non-console
    * devices
    */

    return RTEMS_SUCCESSFUL;
}
</PRE>
</DL>
<P><HR>
<LINK REL="Precedes" HREF="bsp_howto00140.html">
<LINK REV="Precedes" HREF="bsp_howto00138.html">
<LINK REV="Subdocument" HREF="bsp_howto00138.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="bsp_howto00138.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="bsp_howto00138.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="bsp_howto00140.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>BSP and Device Driver Development Guide</CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
