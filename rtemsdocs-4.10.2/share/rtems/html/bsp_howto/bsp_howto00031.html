<HTML>
<!-- created Dec 13 2011 from support.texi line 249 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>Miscellaneous Support Files set_vector() - Install an Interrupt Vector</TITLE>
<LINK REL="Precedes" HREF="">
<LINK REV="Precedes" HREF="bsp_howto00030.html">
<LINK REV="Subdocument" HREF="bsp_howto00020.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="bsp_howto00030.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="bsp_howto00020.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A><IMG ALIGN=MIDDLE SRC="../images/missing-arrow.gif" ALT="next"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>BSP and Device Driver Development Guide</CITE></P>
<H2>5.10: set_vector() - Install an Interrupt Vector</H2>
<P>
On targets with Simple Vectored Interrupts, the BSP must provide
an implementation of the <CODE>set_vector</CODE> routine.  This routine is
responsible for installing an interrupt vector.  It invokes the support
routines necessary to install an interrupt handler as either a &quot;raw&quot;
or an RTEMS interrupt handler.  Raw handlers bypass the RTEMS interrupt
structure and are responsible for saving and restoring all their own
registers.  Raw handlers are useful for handling traps, debug vectors,
etc..
</P>
<P>
The <CODE>set_vector</CODE> routine is a central place to perform interrupt
controller manipulation and encapsulate that information.  It is usually
implemented as follows:
</P>
<DL><DT><DD>
<PRE>
rtems_isr_entry set_vector(                     /* returns old vector */
  rtems_isr_entry     handler,                  /* isr routine        */
  rtems_vector_number vector,                   /* vector number      */
  int                 type                      /* RTEMS or RAW intr  */
)
{
  if the type is RAW
    install the raw vector
  else
    use rtems_interrupt_catch to install the vector

  perform any interrupt controller necessary to unmask
    the interrupt source

  return the previous handler
}
</PRE>
</DL>
<P>
<STRONG>NOTE:</STRONG>  The i386, PowerPC and ARM ports use a Programmable
Interrupt Controller model which does not require the BSP to implement
<CODE>set_vector</CODE>.  BSPs for these architectures must provide a different
set of support routines.
</P>
<P><HR>
<LINK REL="Precedes" HREF="">
<LINK REV="Precedes" HREF="bsp_howto00030.html">
<LINK REV="Subdocument" HREF="bsp_howto00020.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="bsp_howto00030.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="bsp_howto00020.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A><IMG ALIGN=MIDDLE SRC="../images/missing-arrow.gif" ALT="next"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>BSP and Device Driver Development Guide</CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
