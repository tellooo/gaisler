<HTML>
<!-- created Dec 13 2011 from ../user/task.texi line 1902 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>Task Manager TASK_VARIABLE_ADD - Associate per task variable</TITLE>
<LINK REL="Precedes" HREF="ada_user00090.html">
<LINK REV="Precedes" HREF="ada_user00088.html">
<LINK REV="Subdocument" HREF="ada_user00053.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="ada_user00088.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="ada_user00053.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="ada_user00090.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS Ada User's Guide</CITE></P>
<H3>5.4.17: TASK_VARIABLE_ADD - Associate per task variable</H3>
<H3>CALLING SEQUENCE:</H3>
<DL><DT><DD>
<PRE>
type Task_Variable_Dtor is access procedure (
   Argument : in     RTEMS.Address;
);

procedure Task_Variable_Add (
   ID            : in     RTEMS.ID;
   Task_Variable : in     RTEMS.Address;
   Dtor          : in     RTEMS.Task_Variable_Dtor;
   Result        :    out RTEMS.Status_Codes
);
</PRE>
</DL>
<H3>DIRECTIVE STATUS CODES:</H3>
<P>
<CODE>RTEMS.SUCCESSFUL</CODE> - per task variable added successfully<BR>

<CODE>RTEMS.INVALID_ADDRESS</CODE> - <CODE>task_variable</CODE> is NULL<BR>

<CODE>RTEMS.INVALID_ID</CODE> - invalid task id<BR>

<CODE>RTEMS.NO_MEMORY</CODE> - invalid task id<BR>

<CODE>RTEMS.ILLEGAL_ON_REMOTE_OBJECT</CODE> - not supported on remote tasks<BR>

</P>
<H3>DESCRIPTION:</H3>
<P>
This directive adds the memory location specified by the
ptr argument to the context of the given task.  The variable will
then be private to the task.  The task can access and modify the
variable, but the modifications will not appear to other tasks, and
other tasks' modifications to that variable will not affect the value
seen by the task.  This is accomplished by saving and restoring the
variable's value each time a task switch occurs to or from the calling task.
If the dtor argument is non-NULL it specifies the address of a `destructor'
function which will be called when the task is deleted.  The argument
passed to the destructor function is the task's value of the variable.
</P>
<H3>NOTES:</H3>
<P>
Task variables increase the context switch time to and from the
tasks that own them so it is desirable to minimize the number of
task variables.  One efficient method
is to have a single task variable that is a pointer to a dynamically
allocated structure containing the task's private `global' data.
In this case the destructor function could be `free'.
</P>
<P><HR>
<LINK REL="Precedes" HREF="ada_user00090.html">
<LINK REV="Precedes" HREF="ada_user00088.html">
<LINK REV="Subdocument" HREF="ada_user00053.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="ada_user00088.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="ada_user00053.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="ada_user00090.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS Ada User's Guide</CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
