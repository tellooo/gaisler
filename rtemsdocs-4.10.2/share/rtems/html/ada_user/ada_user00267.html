<HTML>
<!-- created Dec 13 2011 from ../user/region.texi line 576 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>Region Manager REGION_GET_SEGMENT - Get segment from a region</TITLE>
<LINK REL="Precedes" HREF="ada_user00268.html">
<LINK REV="Precedes" HREF="ada_user00266.html">
<LINK REV="Subdocument" HREF="ada_user00251.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="ada_user00266.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="ada_user00251.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="ada_user00268.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS Ada User's Guide</CITE></P>
<H3>14.4.5: REGION_GET_SEGMENT - Get segment from a region</H3>
<H3>CALLING SEQUENCE:</H3>
<DL><DT><DD>
<PRE>
procedure Region_Get_Segment (
   ID         : in     RTEMS.ID;
   Size       : in     RTEMS.Unsigned32;
   Option_Set : in     RTEMS.Option;
   Timeout    : in     RTEMS.Interval;
   Segment    :    out RTEMS.Address;
   Result     :    out RTEMS.Status_Codes
);
</PRE>
</DL>
<H3>DIRECTIVE STATUS CODES:</H3>
<P>
<CODE>RTEMS.SUCCESSFUL</CODE> - segment obtained successfully<BR>

<CODE>RTEMS.INVALID_ADDRESS</CODE> - <CODE>segment</CODE> is NULL<BR>

<CODE>RTEMS.INVALID_ID</CODE> - invalid region id<BR>

<CODE>RTEMS.INVALID_SIZE</CODE> - request is for zero bytes or exceeds
the size of maximum segment which is possible for this region<BR>

<CODE>RTEMS.UNSATISFIED</CODE> - segment of requested size not available<BR>

<CODE>RTEMS.TIMEOUT</CODE> - timed out waiting for segment<BR>

<CODE>RTEMS.OBJECT_WAS_DELETED</CODE> - region deleted while waiting
</P>
<H3>DESCRIPTION:</H3>
<P>
This directive obtains a variable size segment from
the region specified by id.  The address of the allocated
segment is returned in segment.  The <CODE>RTEMS.WAIT</CODE>
and <CODE>RTEMS.NO_WAIT</CODE> components
of the options parameter are used to specify whether the calling
tasks wish to wait for a segment to become available or return
immediately if no segment is available.  For either option, if a
sufficiently sized segment is available, then the segment is
successfully acquired by returning immediately with  the
<CODE>RTEMS.SUCCESSFUL</CODE> status code.
</P>
<P>
If the calling task chooses to return immediately and
a segment large enough is not available, then an error code
indicating this fact is returned.  If the calling task chooses
to wait for the segment and a segment large enough is not
available, then the calling task is placed on the region's
segment wait queue and blocked.  If the region was created with
the <CODE>RTEMS.PRIORITY</CODE> option, then the calling
task is inserted into the
wait queue according to its priority.  However, if the region
was created with the <CODE>RTEMS.FIFO</CODE> option, then the calling
task is placed at the rear of the wait queue.
</P>
<P>
The timeout parameter specifies the maximum interval
that a task is willing to wait to obtain a segment.  If timeout
is set to <CODE>RTEMS.NO_TIMEOUT</CODE>, then the
calling task will wait forever.
</P>
<H3>NOTES:</H3>
<P>
The actual length of the allocated segment may be
larger than the requested size because a segment size is always
a multiple of the region's page size.
</P>
<P>
The following segment acquisition option constants
are defined by RTEMS:
</P>
<UL>
<LI><CODE>RTEMS.WAIT</CODE> - task will wait for segment (default)
<LI><CODE>RTEMS.NO_WAIT</CODE> - task should not wait
</UL>

<P>
A clock tick is required to support the timeout functionality of
this directive.
</P>
<P><HR>
<LINK REL="Precedes" HREF="ada_user00268.html">
<LINK REV="Precedes" HREF="ada_user00266.html">
<LINK REV="Subdocument" HREF="ada_user00251.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="ada_user00266.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="ada_user00251.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="ada_user00268.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS Ada User's Guide</CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
