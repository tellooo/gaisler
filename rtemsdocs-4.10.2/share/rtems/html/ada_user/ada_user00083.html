<HTML>
<!-- created Dec 13 2011 from ../user/task.texi line 1467 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>Task Manager TASK_MODE - Change the current task mode</TITLE>
<LINK REL="Precedes" HREF="ada_user00084.html">
<LINK REV="Precedes" HREF="ada_user00082.html">
<LINK REV="Subdocument" HREF="ada_user00053.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="ada_user00082.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="ada_user00053.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="ada_user00084.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS Ada User's Guide</CITE></P>
<H3>5.4.11: TASK_MODE - Change the current task mode</H3>
<H3>CALLING SEQUENCE:</H3>
<DL><DT><DD>
<PRE>
procedure Task_Mode (
   Mode_Set          : in     RTEMS.Mode;
   Mask              : in     RTEMS.Mode;
   Previous_Mode_Set : in     RTEMS.Mode;
   Result            :    out RTEMS.Status_Codes
);
</PRE>
</DL>
<H3>DIRECTIVE STATUS CODES:</H3>
<P>
<CODE>RTEMS.SUCCESSFUL</CODE> - task mode set successfully<BR>

<CODE>RTEMS.INVALID_ADDRESS</CODE> - <CODE>previous_mode_set</CODE> is NULL
</P>
<H3>DESCRIPTION:</H3>
<P>
This directive manipulates the execution mode of the calling
task.  A task's execution mode enables and disables preemption,
timeslicing, asynchronous signal processing, as well as
specifying the current interrupt level.  To modify an execution
mode, the mode class(es) to be changed must be specified in the
mask parameter and the desired mode(s) must be specified in the
mode parameter.
</P>
<H3>NOTES:</H3>
<P>
The calling task will be preempted if it enables preemption and
a higher priority task is ready to run.
</P>
<P>
Enabling timeslicing has no effect if preemption is disabled.  For
a task to be timesliced, that task must have both preemption and
timeslicing enabled.
</P>
<P>
A task can obtain its current execution mode, without modifying
it, by calling this directive with a mask value of
<CODE>RTEMS.CURRENT_MODE</CODE>.
</P>
<P>
To temporarily disable the processing of a valid ASR, a task
should call this directive with the <CODE>RTEMS.NO_ASR</CODE>
indicator specified in mode.
</P>
<P>
The set of task mode constants and each mode's corresponding
mask constant is provided in the following table:
</P>
<CENTER>
  <TABLE COLS=3 WIDTH="80%" BORDER=2>
<TR><TD ALIGN=center><STRONG>Mode Constant</STRONG></TD>
    <TD ALIGN=center><STRONG>Mask Constant</STRONG></TD>
    <TD ALIGN=center><STRONG>Description</STRONG></TD></TR>
<TR><TD ALIGN=center>RTEMS.PREEMPT</TD>
    <TD ALIGN=center>RTEMS.PREEMPT_MASK</TD>
    <TD ALIGN=center>enables preemption</TD></TR>
<TR><TD ALIGN=center>RTEMS.NO_PREEMPT</TD>
    <TD ALIGN=center>RTEMS.PREEMPT_MASK</TD>
    <TD ALIGN=center>disables preemption</TD></TR>
<TR><TD ALIGN=center>RTEMS.NO_TIMESLICE</TD>
    <TD ALIGN=center>RTEMS.TIMESLICE_MASK</TD>
    <TD ALIGN=center>disables timeslicing</TD></TR>
<TR><TD ALIGN=center>RTEMS.TIMESLICE</TD>
    <TD ALIGN=center>RTEMS.TIMESLICE_MASK</TD>
    <TD ALIGN=center>enables timeslicing</TD></TR>
<TR><TD ALIGN=center>RTEMS.ASR</TD>
    <TD ALIGN=center>RTEMS.ASR_MASK</TD>
    <TD ALIGN=center>enables ASR processing</TD></TR>
<TR><TD ALIGN=center>RTEMS.NO_ASR</TD>
    <TD ALIGN=center>RTEMS.ASR_MASK</TD>
    <TD ALIGN=center>disables ASR processing</TD></TR>
<TR><TD ALIGN=center>RTEMS.INTERRUPT_LEVEL(0)</TD>
    <TD ALIGN=center>RTEMS.INTERRUPT_MASK</TD>
    <TD ALIGN=center>enables all interrupts</TD></TR>
<TR><TD ALIGN=center>RTEMS.INTERRUPT_LEVEL(n)</TD>
    <TD ALIGN=center>RTEMS.INTERRUPT_MASK</TD>
    <TD ALIGN=center>sets interrupts level n</TD></TR>
  </TABLE>
</CENTER>
<P><HR>
<LINK REL="Precedes" HREF="ada_user00084.html">
<LINK REV="Precedes" HREF="ada_user00082.html">
<LINK REV="Subdocument" HREF="ada_user00053.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="ada_user00082.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="ada_user00053.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="ada_user00084.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS Ada User's Guide</CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
