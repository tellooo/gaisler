<HTML>
<!-- created Dec 13 2011 from ../user/barrier.texi line 435 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>Barrier Manager BARRIER_OBTAIN - Acquire a barrier</TITLE>
<LINK REL="Precedes" HREF="ada_user00375.html">
<LINK REV="Precedes" HREF="ada_user00373.html">
<LINK REV="Subdocument" HREF="ada_user00363.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="ada_user00373.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="ada_user00363.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="ada_user00375.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS Ada User's Guide</CITE></P>
<H3>20.4.4: BARRIER_OBTAIN - Acquire a barrier</H3>
<H3>CALLING SEQUENCE:</H3>
<DL><DT><DD>
<PRE>
procedure Barrier_Wait (
   ID         : in     RTEMS.ID;
   Timeout    : in     RTEMS.Interval;
   Result     :    out RTEMS.Status_Codes
);
</PRE>
</DL>
<H3>DIRECTIVE STATUS CODES:</H3>
<P>
<CODE>RTEMS.SUCCESSFUL</CODE> - barrier obtained successfully<BR>

<CODE>RTEMS.UNSATISFIED</CODE> - barrier not available<BR>

<CODE>RTEMS.TIMEOUT</CODE> - timed out waiting for barrier<BR>

<CODE>RTEMS.OBJECT_WAS_DELETED</CODE> - barrier deleted while waiting<BR>

<CODE>RTEMS.INVALID_ID</CODE> - invalid barrier id
</P>
<H3>DESCRIPTION:</H3>
<P>
This directive acquires the barrier specified by
id.  The <CODE>RTEMS.WAIT</CODE> and <CODE>RTEMS.NO_WAIT</CODE>
components of the options parameter indicate whether the calling task
wants to wait for the barrier to become available or return immediately
if the barrier is not currently available.  With either
<CODE>RTEMS.WAIT</CODE> or <CODE>RTEMS.NO_WAIT</CODE>,
if the current barrier count is positive, then it is
decremented by one and the barrier is successfully acquired by
returning immediately with a successful return code.
</P>
<P>
Conceptually, the calling task should always be thought
of as blocking when it makes this call and being unblocked when
the barrier is released.  If the barrier is configured for
manual release, this rule of thumb will always be valid.
If the barrier is configured for automatic release, all callers
will block except for the one which is the Nth task which trips
the automatic release condition.
</P>
<P>
The timeout parameter specifies the maximum interval the calling task is
willing to be blocked waiting for the barrier.  If it is set to
<CODE>RTEMS.NO_TIMEOUT</CODE>, then the calling task will wait forever.
If the barrier is available or the <CODE>RTEMS.NO_WAIT</CODE> option
component is set, then timeout is ignored.
</P>
<H3>NOTES:</H3>
<P>
The following barrier acquisition option constants are defined by RTEMS:
</P>
<UL>
<LI><CODE>RTEMS.WAIT</CODE> - task will wait for barrier (default)
<LI><CODE>RTEMS.NO_WAIT</CODE> - task should not wait
</UL>

<P>
A clock tick is required to support the timeout functionality of
this directive.
</P>
<P><HR>
<LINK REL="Precedes" HREF="ada_user00375.html">
<LINK REV="Precedes" HREF="ada_user00373.html">
<LINK REV="Subdocument" HREF="ada_user00363.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="ada_user00373.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="ada_user00363.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="ada_user00375.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS Ada User's Guide</CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
