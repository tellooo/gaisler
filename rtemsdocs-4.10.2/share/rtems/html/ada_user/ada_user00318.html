<HTML>
<!-- created Dec 13 2011 from ../user/schedule.texi line 225 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>Scheduling Concepts Task State Transitions</TITLE>
<LINK REL="Precedes" HREF="ada_user00324.html">
<LINK REV="Precedes" HREF="ada_user00323.html">
<LINK REV="Subdocument" HREF="ada_user00315.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="ada_user00323.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="ada_user00315.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="ada_user00324.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS Ada User's Guide</CITE></P>
<H2>18.3: Task State Transitions</H2>
<P>
Tasks in an RTEMS system must always be in one of the
five allowable task states.  These states are: executing, ready,
blocked, dormant, and non-existent.
</P>
<P>
A task occupies the non-existent state before a
<CODE>rtems.task_create</CODE> has been
issued on its behalf.  A task enters the
non-existent state from any other state in the system when it is
deleted with the <CODE>rtems.task_delete</CODE>
directive.  While a task occupies
this state it does not have a TCB or a task ID assigned to it;
therefore, no other tasks in the system may reference this task.
</P>
<P>
When a task is created via the <CODE>rtems.task_create</CODE> directive
it enters the dormant state.  This state is not entered through
any other means.  Although the task exists in the system, it
cannot actively compete for system resources.  It will remain in
the dormant state until it is started via the <CODE>rtems.task_start</CODE>
directive, at which time it enters the ready state.  The task is
now permitted to be scheduled for the processor and to compete
for other system resources.
</P>
<P>
<STRONG><CENTER>RTEMS Task States</CENTER></STRONG>
</P>
<IMG SRC="states.png" WIDTH=550 HEIGHT=400 ALT="RTEMS Task States">
<P>
A task occupies the blocked state whenever it is
unable to be scheduled to run.  A running task may block itself
or be blocked by other tasks in the system.  The running task
blocks itself through voluntary operations that cause the task
to wait.  The only way a task can block a task other than itself
is with the <CODE>rtems.task_suspend</CODE> directive.
A task enters the blocked state due to any of the following conditions:
</P>
<UL>
<LI>A task issues a <CODE>rtems.task_suspend</CODE> directive
which blocks either itself or another task in the system.

<LI>The running task issues a <CODE>rtems.message_queue_receive</CODE>
directive with the wait option and the message queue is empty.

<LI>The running task issues an <CODE>rtems.event_receive</CODE>
directive with the wait option and the currently pending events do not
satisfy the request.

<LI>The running task issues a <CODE>rtems.semaphore_obtain</CODE>
directive with the wait option and the requested semaphore is unavailable.

<LI>The running task issues a <CODE>rtems.task_wake_after</CODE>
directive which blocks the task for the given time interval.  If the time
interval specified is zero, the task yields the processor and
remains in the ready state.

<LI>The running task issues a <CODE>rtems.task_wake_when</CODE>
directive which blocks the task until the requested date and time arrives.

<LI>The running task issues a <CODE>rtems.region_get_segment</CODE>
directive with the wait option and there is not an available segment large
enough to satisfy the task's request.

<LI>The running task issues a <CODE>rtems.rate_monotonic_period</CODE>
directive and must wait for the specified rate monotonic period
to conclude.
</UL>

<P>
A blocked task may also be suspended.  Therefore,
both the suspension and the blocking condition must be removed
before the task becomes ready to run again.
</P>
<P>
A task occupies the ready state when it is able to be
scheduled to run, but currently does not have control of the
processor.  Tasks of the same or higher priority will yield the
processor by either becoming blocked, completing their
timeslice, or being deleted.  All tasks with the same priority
will execute in FIFO order.  A task enters the ready state due
to any of the following conditions:
</P>
<UL>
<LI>A running task issues a <CODE>rtems.task_resume</CODE>
directive for a task that is suspended and the task is not blocked
waiting on any resource.

<LI>A running task issues a <CODE>rtems.message_queue_send</CODE>,
<CODE>rtems.message_queue_broadcast</CODE>, or a
<CODE>rtems.message_queue_urgent</CODE> directive
which posts a message to the queue on which the blocked task is
waiting.

<LI>A running task issues an <CODE>rtems.event_send</CODE>
directive which sends an event condition to a task which is blocked
waiting on that event condition.

<LI>A running task issues a <CODE>rtems.semaphore_release</CODE>
directive which releases the semaphore on which the blocked task is
waiting.

<LI>A timeout interval expires for a task which was blocked
by a call to the <CODE>rtems.task_wake_after</CODE> directive.

<LI>A timeout period expires for a task which blocked by a
call to the <CODE>rtems.task_wake_when</CODE> directive.

<LI>A running task issues a <CODE>rtems.region_return_segment</CODE>
directive which releases a segment to the region on which the blocked task
is waiting and a resulting segment is large enough to satisfy
the task's request.

<LI>A rate monotonic period expires for a task which blocked
by a call to the <CODE>rtems.rate_monotonic_period</CODE> directive.

<LI>A timeout interval expires for a task which was blocked
waiting on a message, event, semaphore, or segment with a
timeout specified.

<LI>A running task issues a directive which deletes a
message queue, a semaphore, or a region on which the blocked
task is waiting.

<LI>A running task issues a <CODE>rtems.task_restart</CODE>
directive for the blocked task.

<LI>The running task, with its preemption mode enabled, may
be made ready by issuing any of the directives that may unblock
a task with a higher priority.  This directive may be issued
from the running task itself or from an ISR.

<P>
A ready task occupies the executing state when it has
control of the CPU.  A task enters the executing state due to
any of the following conditions:
</P>
<LI>The task is the highest priority ready task in the
system.

<LI>The running task blocks and the task is next in the
scheduling queue.  The task may be of equal priority as in
round-robin scheduling or the task may possess the highest
priority of the remaining ready tasks.

<LI>The running task may reenable its preemption mode and a
task exists in the ready queue that has a higher priority than
the running task.

<LI>The running task lowers its own priority and another
task is of higher priority as a result.

<LI>The running task raises the priority of a task above its
own and the running task is in preemption mode.

</UL>
<P><HR>
<LINK REL="Precedes" HREF="ada_user00324.html">
<LINK REV="Precedes" HREF="ada_user00323.html">
<LINK REV="Subdocument" HREF="ada_user00315.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="ada_user00323.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="ada_user00315.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="ada_user00324.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS Ada User's Guide</CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
