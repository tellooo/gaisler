<HTML>
<!-- created Dec 13 2011 from ../user/msg.texi line 752 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>Message Manager MESSAGE_QUEUE_RECEIVE - Receive message from a queue</TITLE>
<LINK REL="Precedes" HREF="ada_user00200.html">
<LINK REV="Precedes" HREF="ada_user00198.html">
<LINK REV="Subdocument" HREF="ada_user00182.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="ada_user00198.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="ada_user00182.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="ada_user00200.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS Ada User's Guide</CITE></P>
<H3>10.4.7: MESSAGE_QUEUE_RECEIVE - Receive message from a queue</H3>
<H3>CALLING SEQUENCE:</H3>
<DL><DT><DD>
<PRE>
procedure Message_Queue_Receive (
   ID         : in     RTEMS.ID;
   Buffer     : in     RTEMS.Address;
   Option_Set : in     RTEMS.Option;
   Timeout    : in     RTEMS.Interval;
   Size       :    out RTEMS.Unsigned32;
   Result     :    out RTEMS.Status_Codes
);
</PRE>
</DL>
<H3>DIRECTIVE STATUS CODES:</H3>
<P>
<CODE>RTEMS.SUCCESSFUL</CODE> - message received successfully<BR>

<CODE>RTEMS.INVALID_ID</CODE> - invalid queue id<BR>

<CODE>RTEMS.INVALID_ADDRESS</CODE> - <CODE>buffer</CODE> is NULL<BR>

<CODE>RTEMS.INVALID_ADDRESS</CODE> - <CODE>size</CODE> is NULL<BR>

<CODE>RTEMS.UNSATISFIED</CODE> - queue is empty<BR>

<CODE>RTEMS.TIMEOUT</CODE> - timed out waiting for message<BR>

<CODE>RTEMS.OBJECT_WAS_DELETED</CODE> - queue deleted while waiting
</P>
<H3>DESCRIPTION:</H3>
<P>
This directive receives a message from the message
queue specified in id.  The <CODE>RTEMS.WAIT</CODE> and <CODE>RTEMS.NO_WAIT</CODE> options of the
options parameter allow the calling task to specify whether to
wait for a message to become available or return immediately.
For either option, if there is at least one message in the
queue, then it is copied to buffer, size is set to return the
length of the message in bytes, and this directive returns
immediately with a successful return code.  The buffer has to be big enough to
receive a message of the maximum length with respect to this message queue.
</P>
<P>
If the calling task chooses to return immediately and
the queue is empty, then a status code indicating this condition
is returned.  If the calling task chooses to wait at the message
queue and the queue is empty, then the calling task is placed on
the message wait queue and blocked.  If the queue was created
with the <CODE>RTEMS.PRIORITY</CODE> option specified, then
the calling task is inserted into the wait queue according to
its priority.  But, if the queue was created with the
<CODE>RTEMS.FIFO</CODE> option specified, then the
calling task is placed at the rear of the wait queue.
</P>
<P>
A task choosing to wait at the queue can optionally
specify a timeout value in the timeout parameter.  The timeout
parameter specifies the maximum interval to wait before the
calling task desires to be unblocked.  If it is set to
<CODE>RTEMS.NO_TIMEOUT</CODE>, then the calling task will wait forever.
</P>
<H3>NOTES:</H3>
<P>
The following message receive option constants are
defined by RTEMS:
</P>
<UL>
<LI><CODE>RTEMS.WAIT</CODE> - task will wait for a message (default)
<LI><CODE>RTEMS.NO_WAIT</CODE> - task should not wait
</UL>

<P>
Receiving a message from a global message queue which
does not reside on the local node will generate a request to the
remote node to obtain a message from the specified message
queue.  If no message is available and <CODE>RTEMS.WAIT</CODE> was specified, then
the task must be blocked until a message is posted.  A proxy is
allocated on the remote node to represent the task until the
message is posted.
</P>
<P>
A clock tick is required to support the timeout functionality of
this directive.
</P>
<P><HR>
<LINK REL="Precedes" HREF="ada_user00200.html">
<LINK REV="Precedes" HREF="ada_user00198.html">
<LINK REV="Subdocument" HREF="ada_user00182.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="ada_user00198.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="ada_user00182.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="ada_user00200.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS Ada User's Guide</CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
