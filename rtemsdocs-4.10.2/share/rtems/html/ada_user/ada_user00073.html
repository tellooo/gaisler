<HTML>
<!-- created Dec 13 2011 from ../user/task.texi line 812 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>Task Manager TASK_CREATE - Create a task</TITLE>
<LINK REL="Precedes" HREF="ada_user00074.html">
<LINK REV="Precedes" HREF="ada_user00053.html">
<LINK REV="Subdocument" HREF="ada_user00053.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="ada_user00053.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="ada_user00053.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="ada_user00074.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS Ada User's Guide</CITE></P>
<H3>5.4.1: TASK_CREATE - Create a task</H3>
<H3>CALLING SEQUENCE:</H3>
<DL><DT><DD>
<PRE>
procedure Task_Create (
   Name             : in     RTEMS.Name;
   Initial_Priority : in     RTEMS.Task_Priority;
   Stack_Size       : in     RTEMS.Unsigned32;
   Initial_Modes    : in     RTEMS.Mode;
   Attribute_Set    : in     RTEMS.Attribute;
   ID               :    out RTEMS.ID;
   Result           :    out RTEMS.Status_Codes
);
</PRE>
</DL>
<H3>DIRECTIVE STATUS CODES:</H3>
<P>
<CODE>RTEMS.SUCCESSFUL</CODE> - task created successfully<BR>

<CODE>RTEMS.INVALID_ADDRESS</CODE> - <CODE>id</CODE> is NULL<BR>

<CODE>RTEMS.INVALID_NAME</CODE> - invalid task name<BR>

<CODE>RTEMS.INVALID_PRIORITY</CODE> - invalid task priority<BR>

<CODE>RTEMS.MP_NOT_CONFIGURED</CODE> - multiprocessing not configured<BR>

<CODE>RTEMS.TOO_MANY</CODE> - too many tasks created<BR>

<CODE>RTEMS.UNSATISFIED</CODE> - not enough memory for stack/FP context<BR>

<CODE>RTEMS.TOO_MANY</CODE> - too many global objects
</P>
<H3>DESCRIPTION:</H3>
<P>
This directive creates a task which resides on the local node.
It allocates and initializes a TCB, a stack, and an optional
floating point context area.  The mode parameter contains values
which sets the task's initial execution mode.  The
<CODE>RTEMS.FLOATING_POINT</CODE> attribute should be
specified if the created task
is to use a numeric coprocessor.  For performance reasons, it is
recommended that tasks not using the numeric coprocessor should
specify the <CODE>RTEMS.NO_FLOATING_POINT</CODE> attribute.
If the <CODE>RTEMS.GLOBAL</CODE>
attribute is specified, the task can be accessed from remote
nodes.  The task id, returned in id, is used in other task
related directives to access the task.  When created, a task is
placed in the dormant state and can only be made ready to
execute using the directive <CODE>rtems.task_start</CODE>.
</P>
<H3>NOTES:</H3>
<P>
This directive will not cause the calling task to be preempted.
</P>
<P>
Valid task priorities range from a high of 1 to a low of 255.
</P>
<P>
If the requested stack size is less than the configured
minimum stack size, then RTEMS will use the configured
minimum as the stack size for this task.  In addition
to being able to specify the task stack size as a integer,
there are two constants which may be specified:
</P>
<UL>
<LI><CODE>RTEMS.MINIMUM_STACK_SIZE</CODE>
is the minimum stack size <STRONG>RECOMMENDED</STRONG> for use on this processor.
This value is selected by the RTEMS developers conservatively to
minimize the risk of blown stacks for most user applications.
Using this constant when specifying the task stack size, indicates
that the stack size will be at least
<CODE>RTEMS.MINIMUM_STACK_SIZE</CODE> bytes in size.  If the
user configured minimum stack size is larger than the recommended
minimum, then it will be used.

<LI><CODE>RTEMS.CONFIGURED_MINIMUM_STACK_SIZE</CODE>
indicates that this task is to be created with a stack size
of the minimum stack size that was configured by the application.
If not explicitly configured by the application, the default
configured minimum stack size is the processor dependent value
<CODE>RTEMS.MINIMUM_STACK_SIZE</CODE>.  Since this uses
the configured minimum stack size value, you may get a stack
size that is smaller or larger than the recommended minimum.  This
can be used to provide large stacks for all tasks on complex
applications or small stacks on applications that are trying
to conserve memory.

</UL>
<P>
Application developers should consider the stack usage of the
device drivers when calculating the stack size required for
tasks which utilize the driver.
</P>
<P>
The following task attribute constants are defined by RTEMS:
</P>
<UL>
<LI><CODE>RTEMS.NO_FLOATING_POINT</CODE> - does not use coprocessor (default)
<LI><CODE>RTEMS.FLOATING_POINT</CODE> - uses numeric coprocessor
<LI><CODE>RTEMS.LOCAL</CODE> - local task (default)
<LI><CODE>RTEMS.GLOBAL</CODE> - global task
</UL>

<P>
The following task mode constants are defined by RTEMS:
</P>
<UL>
<LI><CODE>RTEMS.PREEMPT</CODE> - enable preemption (default)
<LI><CODE>RTEMS.NO_PREEMPT</CODE> - disable preemption
<LI><CODE>RTEMS.NO_TIMESLICE</CODE> - disable timeslicing (default)
<LI><CODE>RTEMS.TIMESLICE</CODE> - enable timeslicing
<LI><CODE>RTEMS.ASR</CODE> - enable ASR processing (default)
<LI><CODE>RTEMS.NO_ASR</CODE> - disable ASR processing
<LI><CODE>RTEMS.INTERRUPT_LEVEL(0)</CODE> - enable all interrupts (default)
<LI><CODE>RTEMS.INTERRUPT_LEVEL(n)</CODE> - execute at interrupt level n
</UL>

<P>
The interrupt level portion of the task execution mode
supports a maximum of 256 interrupt levels.  These levels are
mapped onto the interrupt levels actually supported by the
target processor in a processor dependent fashion.
</P>
<P>
Tasks should not be made global unless remote tasks must
interact with them.  This avoids the system overhead incurred by
the creation of a global task.  When a global task is created,
the task's name and id must be transmitted to every node in the
system for insertion in the local copy of the global object
table.
</P>
<P>
The total number of global objects, including tasks, is limited
by the maximum_global_objects field in the Configuration Table.
</P>
<P><HR>
<LINK REL="Precedes" HREF="ada_user00074.html">
<LINK REV="Precedes" HREF="ada_user00053.html">
<LINK REV="Subdocument" HREF="ada_user00053.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="ada_user00053.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="ada_user00053.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="ada_user00074.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS Ada User's Guide</CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
