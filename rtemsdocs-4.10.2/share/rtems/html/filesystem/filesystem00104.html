<HTML>
<!-- created Dec 13 2011 from imfs.texi line 676 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>IMFS_fsmount_me()</TITLE>
<LINK REL="Precedes" HREF="filesystem00105.html">
<LINK REV="Precedes" HREF="filesystem00103.html">
<LINK REV="Subdocument" HREF="filesystem00089.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="filesystem00103.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="filesystem00089.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="filesystem00105.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS Filesystem Design Guide</CITE></P>
<H4>6.4.1.12: IMFS_fsmount_me()</H4>
<H3>Corresponding Structure Element:</H3>
<P>
IMFS_initialize()
</P>
<H3>Arguments:</H3>
<DL><DT><DD>
<PRE>
rtems_filesystem_mount_table_entry_t   *mt_entry
</PRE>
</DL>
<H3>File:</H3>
<P>
imfs_init.c
</P>
<H3>Description:</H3>
<P>
This function is provided with a filesystem to take care of the internal
filesystem management details associated with mounting that filesystem
under the RTEMS environment.
</P>
<P>
It is not responsible for the mounting details associated the filesystem
containing the mount point.
</P>
<P>
The rtems_filesystem_mount_table_entry_t structure contains the key elements
below:
</P>
<P>
rtems_filesystem_location_info_t         *mt_point_node,
</P>
<P>
This structure contains information about the mount point. This
allows us to find the ops-table and the handling functions
associated with the filesystem containing the mount point.
</P>
<P>
rtems_filesystem_location_info_t         *fs_root_node,
</P>
<P>
This structure contains information about the root node in the file
system to be mounted. It allows us to find the ops-table and the
handling functions associated with the filesystem to be mounted.
</P>
<P>
rtems_filesystem_options_t                 options,
</P>
<P>
Read only or read/write access
</P>
<P>
void                                         *fs_info,
</P>
<P>
This points to an allocated block of memory the will be used to
hold any filesystem specific information of a global nature. This
allocated region if important because it allows us to mount the
same filesystem type more than once under the RTEMS system.
Each instance of the mounted filesystem has its own set of global
management information that is separate from the global
management information associated with the other instances of the
mounted filesystem type.
</P>
<P>
rtems_filesystem_limits_and_options_t    pathconf_info,
</P>
<P>
The table contains the following set of values associated with the
mounted filesystem:
</P>
<UL>
<LI>link_max

<LI>max_canon

<LI>max_input

<LI>name_max

<LI>path_max

<LI>pipe_buf

<LI>posix_async_io

<LI>posix_chown_restrictions

<LI>posix_no_trunc

<LI>posix_prio_io

<LI>posix_sync_io

<LI>posix_vdisable

</UL>
<P>
These values are accessed with the pathconf() and the fpathconf ()
functions.
</P>
<P>
const char                                   *dev
</P>
<P>
The is intended to contain a string that identifies the device that contains
the filesystem information. The filesystems that are currently implemented
are memory based and don't require a device specification.
</P>
<P>
If the mt_point_node.node_access is NULL then we are mounting the base file
system.
</P>
<P>
The routine will create a directory node for the root of the IMFS file
system.
</P>
<P>
The node will have read, write and execute permissions for owner, group and
others.
</P>
<P>
The node's name will be a null string.
</P>
<P>
A filesystem information structure(fs_info) will be allocated and
initialized for the IMFS filesystem. The fs_info pointer in the mount table
entry will be set to point the filesystem information structure.
</P>
<P>
The pathconf_info element of the mount table will be set to the appropriate
table of path configuration constants ( IMFS_LIMITS_AND_OPTIONS ).
</P>
<P>
The fs_root_node structure will be filled in with the following:
</P>
<UL>
<LI>pointer to the allocated root node of the filesystem

<LI>directory handlers for a directory node under the IMFS filesystem

<LI>OPS table functions for the IMFS

</UL>
<P>
A 0 will be returned to the calling routine if the process succeeded,
otherwise a 1 will be returned.
</P>
<P><HR>
<LINK REL="Precedes" HREF="filesystem00105.html">
<LINK REV="Precedes" HREF="filesystem00103.html">
<LINK REV="Subdocument" HREF="filesystem00089.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="filesystem00103.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="filesystem00089.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="filesystem00105.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS Filesystem Design Guide</CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
