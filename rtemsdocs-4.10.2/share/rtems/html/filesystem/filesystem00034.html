<HTML>
<!-- created Dec 13 2011 from syscalls.texi line 901 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>mount</TITLE>
<LINK REL="Precedes" HREF="filesystem00035.html">
<LINK REV="Precedes" HREF="filesystem00033.html">
<LINK REV="Subdocument" HREF="filesystem00014.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="filesystem00033.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="filesystem00014.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="filesystem00035.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS Filesystem Design Guide</CITE></P>
<H2>4.20: mount</H2>
<H3>File:</H3>
<P>
mount.c
</P>
<P>
Arguments (Not a standard POSIX call):
</P>
<P>
rtems_filesystem_mount_table_entry_t   **mt_entry,
</P>
<P>
If the mount operation is successful, this pointer to a pointer will be
set to reference the mount table chain entry that has been allocated for
this file system mount.
</P>
<P>
rtems_filesystem_operations_table   *fs_ops,
</P>
<P>
This is a pointer to a table of functions that are associated with the
file system that we are about to mount. This is the mechanism to selected
file system type without keeping a dynamic database of all possible file
system types that are valid for the mount operation. Using this method, it
is only necessary to configure the filesystems that we wish to use into
the RTEMS build. Unused filesystems types will not be drawn into the
build.
</P>
<P>
char                      *fsoptions,
</P>
<P>
This argument points to a string that selects mounting for read only
access or read/write access. Valid states are &quot;RO&quot; and &quot;RW&quot;
</P>
<P>
char                      *device,
</P>
<P>
This argument is reserved for the name of a device that will be used to
access the filesystem information. Current filesystem implementations are
memory based and do not require a device to access filesystem information.
</P>
<P>
char                      *mount_point
</P>
<P>
This is a pathname to a directory in a currently mounted filesystem that
allows read, write and execute permissions.  If successful, the node found
by evaluating this name, is stored in the mt_entry.
</P>
<H3>Processing:</H3>
<P>
This routine will handle the mounting of a filesystem on a mount point. If
the operation is successful, a pointer to the mount table chain entry
associated with the mounted filesystem will be returned to the calling
function. The specifics about the processing required at the mount point
and within the filesystem being mounted is isolated in the filesystem
specific mount() and fsmount_me()  functions. This allows the generic
mount() function to remain unaltered even if new filesystem types are
introduced.
</P>
<H3>Development Comments:</H3>
<P>
This routine will use get_file_system_options() to determine if the mount
options are valid (&quot;RO&quot; or &quot;RW&quot;).
</P>
<P>
It confirms that a filesystem ops-table has been selected.
</P>
<P>
Space is allocated for a mount table entry and selective elements of the
temporary mount table entry are initialized.
</P>
<P>
If a mount point is specified: The mount point is examined to determine
that it is a directory and also has the appropriate permissions to allow a
filesystem to be mounted.
</P>
<P>
The current mount table chain is searched to determine that there is not
another filesystem mounted at the mount point we are trying to mount onto.
</P>
<P>
If a mount function is defined in the ops table for the filesystem
containing the mount point, it is called at this time.
</P>
<P>
If no mount point is specified: Processing if performed to set up the
mount table chain entry as the base filesystem.
</P>
<P>
If the fsmount_me() function is specified for ops-table of the filesystem
being mounted, that function is called to initialize for the new
filesystem.
</P>
<P>
On successful completion, the temporary mount table entry will be placed
on the mount table chain to record the presence of the mounted filesystem.
</P>
<P><HR>
<LINK REL="Precedes" HREF="filesystem00035.html">
<LINK REV="Precedes" HREF="filesystem00033.html">
<LINK REV="Subdocument" HREF="filesystem00014.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="filesystem00033.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="filesystem00014.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="filesystem00035.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS Filesystem Design Guide</CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
