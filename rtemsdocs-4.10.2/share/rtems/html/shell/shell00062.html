<HTML>
<!-- created Dec 13 2011 from memory.texi line 312 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>Memory Commands mfill - file memory with pattern</TITLE>
<LINK REL="Precedes" HREF="shell00063.html">
<LINK REV="Precedes" HREF="shell00061.html">
<LINK REV="Subdocument" HREF="shell00058.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="shell00061.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="shell00058.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="shell00063.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS Shell User's Guide</CITE></P>
<H3>4.2.4: mfill - file memory with pattern</H3>
<H3>SYNOPSYS:</H3>
<DL><DT><DD>
<PRE>
mfill address length value
</PRE>
</DL>
<H3>DESCRIPTION:</H3>
<P>
This command is used to fill the memory starting at <CODE>address</CODE>
for the specified <CODE>length</CODE> in octets when the specified at
<CODE>value</CODE>.
</P>
<H3>EXIT STATUS:</H3>
<P>
This command returns 0 on success and non-zero if an error is encountered.
</P>
<H3>NOTES:</H3>
<P>
Filling a non-existent address range may result in an unrecoverable
program fault.  Similarly overwriting interrupt vector tables, code
space or critical data areas can be fatal as shown in the example.
</P>
<H3>EXAMPLES:</H3>
<P>
In this example, the address used (<CODE>0x23d89a0</CODE>) as the base
address of the filled area is the end of the stack for the
Idle thread.  This address was determined manually using gdb and
is very specific to this application and BSP.  The first command
in this example is an <CODE>mdump</CODE> to display the initial contents
of this memory.  We see that the first 8 bytes are 0xA5 which is
the pattern used as a guard by the Stack Checker.  On
the first context switch after the pattern is overwritten
by the  <CODE>mfill</CODE> command, the Stack Checker detect the pattern
has been corrupted and generates a fatal error.
</P>
<DL><DT><DD>
<PRE>
SHLL [/] $ mdump 0x23d89a0 16
0x023D89A0 A5 A5 A5 A5 A5 A5 A5 A5-FE ED F0 0D 0B AD 0D 06 ................
SHLL [/] $ mfill 0x23d89a0 13 0x5a
SHLL [/] $ BLOWN STACK!!! Offending task(0x23D4418): id=0x09010001; name=0x0203D908
  stack covers range 0x23D89A0 - 0x23D99AF (4112 bytes)
  Damaged pattern begins at 0x023D89A8 and is 16 bytes long
</PRE>
</DL>
<H3>CONFIGURATION:</H3>
<P>
This command is included in the default shell command set.
When building a custom command set, define
<CODE>CONFIGURE_SHELL_COMMAND_MFILL</CODE> to have this
command included.
</P>
<P>
This command can be excluded from the shell command set by
defining <CODE>CONFIGURE_SHELL_NO_COMMAND_MFILL</CODE> when all
shell commands have been configured.
</P>
<H3>PROGRAMMING INFORMATION:</H3>
<P>
The <CODE>mfill</CODE> is implemented by a C language function
which has the following prototype:
</P>
<DL><DT><DD>
<PRE>
int rtems_shell_rtems_main_mfill(
  int    argc,
  char **argv
);
</PRE>
</DL>
<P>
The configuration structure for the <CODE>mfill</CODE> has the
following prototype:
</P>
<DL><DT><DD>
<PRE>
extern rtems_shell_cmd_t rtems_shell_MFILL_Command;
</PRE>
</DL>
<P><HR>
<LINK REL="Precedes" HREF="shell00063.html">
<LINK REV="Precedes" HREF="shell00061.html">
<LINK REV="Subdocument" HREF="shell00058.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="shell00061.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="shell00058.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="shell00063.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS Shell User's Guide</CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
