<HTML>
<!-- created Dec 13 2011 from rtems.texi line 159 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>RTEMS Specific Commands cpuuse - print or reset per thread cpu usage</TITLE>
<LINK REL="Precedes" HREF="shell00070.html">
<LINK REV="Precedes" HREF="shell00068.html">
<LINK REV="Subdocument" HREF="shell00067.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="shell00068.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="shell00067.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="shell00070.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS Shell User's Guide</CITE></P>
<H3>5.2.2: cpuuse - print or reset per thread cpu usage</H3>
<H3>SYNOPSYS:</H3>
<DL><DT><DD>
<PRE>
cpuuse [-r]
</PRE>
</DL>
<H3>DESCRIPTION:</H3>
<P>
This command may be used to print a report on the per thread
cpu usage or to reset the per thread CPU usage statistics. When
invoked with the <CODE>-r</CODE> option, the CPU usage statistics
are reset.
</P>
<H3>EXIT STATUS:</H3>
<P>
This command returns 0 on success and non-zero if an error is encountered.
</P>
<H3>NOTES:</H3>
<P>
The granularity of the timing information reported is dependent
upon the BSP and the manner in which RTEMS was built.  In the
default RTEMS configuration, if the BSP supports nanosecond
granularity timestamps, then the information reported will be
highly accurate. Otherwise, the accuracy of the information
reported is limited by the clock tick quantum.
</P>
<H3>EXAMPLES:</H3>
<P>
The following is an example of how to use <CODE>cpuuse</CODE>:
</P>
<DL><DT><DD>
<PRE>
SHLL [/] $ cpuuse
CPU Usage by thread
   ID            NAME         SECONDS   PERCENT
0x09010001   IDLE            49.745393   98.953
0x0a010001   UI1              0.000000    0.000
0x0a010002   SHLL             0.525928    1.046
Time since last CPU Usage reset 50.271321 seconds
SHLL [/] $ cpuuse -r
Resetting CPU Usage information
SHLL [/] $ cpuuse
CPU Usage by thread
   ID            NAME         SECONDS   PERCENT
0x09010001   IDLE             0.000000    0.000
0x0a010001   UI1              0.000000    0.000
0x0a010002   SHLL             0.003092  100.000
Time since last CPU Usage reset 0.003092 seconds
</PRE>
</DL>
<P>
In the above example, the system had set idle for nearly
a minute when the first report was generated.  The
<CODE>cpuuse -r</CODE> and <CODE>cpuuse</CODE> commands were pasted
from another window so were executed with no gap between.
In the second report, only the <CODE>shell</CODE> thread has
run since the CPU Usage was reset.  It has consumed
approximately 3.092 milliseconds of CPU time processing
the two commands and generating the output.
</P>
<H3>CONFIGURATION:</H3>
<P>
This command is included in the default shell command set.
When building a custom command set, define
<CODE>CONFIGURE_SHELL_COMMAND_CPUUSE</CODE> to have this
command included.
</P>
<P>
This command can be excluded from the shell command set by
defining <CODE>CONFIGURE_SHELL_NO_COMMAND_CPUUSE</CODE> when all
shell commands have been configured.
</P>
<H3>PROGRAMMING INFORMATION:</H3>
<P>
The <CODE>cpuuse</CODE> is implemented by a C language function
which has the following prototype:
</P>
<DL><DT><DD>
<PRE>
int rtems_shell_rtems_main_cpuuse(
  int    argc,
  char **argv
);
</PRE>
</DL>
<P>
The configuration structure for the <CODE>cpuuse</CODE> has the
following prototype:
</P>
<DL><DT><DD>
<PRE>
extern rtems_shell_cmd_t rtems_shell_CPUUSE_Command;
</PRE>
</DL>
<P><HR>
<LINK REL="Precedes" HREF="shell00070.html">
<LINK REV="Precedes" HREF="shell00068.html">
<LINK REV="Subdocument" HREF="shell00067.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="shell00068.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="shell00067.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="shell00070.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS Shell User's Guide</CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
