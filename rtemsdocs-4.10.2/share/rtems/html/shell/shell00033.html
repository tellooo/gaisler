<HTML>
<!-- created Dec 13 2011 from file.texi line 177 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>File and Directory Commands cp - copy files</TITLE>
<LINK REL="Precedes" HREF="shell00034.html">
<LINK REV="Precedes" HREF="shell00032.html">
<LINK REV="Subdocument" HREF="shell00031.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="shell00032.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="shell00031.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="shell00034.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS Shell User's Guide</CITE></P>
<H3>3.2.2: cp - copy files</H3>
<H3>SYNOPSYS:</H3>
<DL><DT><DD>
<PRE>
cp [-R [-H | -L | -P]] [-f | -i] [-pv] src target
cp [-R [-H | -L] ] [-f | -i] [-NpPv] source_file ... target_directory
</PRE>
</DL>
<H3>DESCRIPTION:</H3>
<P>
In the first synopsis form, the cp utility copies the contents of the
source_file to the target_file. In the second synopsis form, the contents of
each named source_file is copied to the destination target_directory. The names
of the files themselves are not changed. If cp detects an attempt to copy a
file to itself, the copy will fail.
</P>
<P>
The following options are available:
</P>
<DL>
<DT><STRONG>-f</STRONG>
<DD>
For each existing destination pathname, attempt to overwrite it. If permissions
do not allow copy to succeed, remove it and create a new file, without
prompting for confirmation. (The -i option is ignored if the -f option is
specified.)

<DT><STRONG>-H</STRONG>
<DD>
If the -R option is specified, symbolic links on the command line are followed.
(Symbolic links encountered in the tree traversal are not followed.)

<DT><STRONG>-i</STRONG>
<DD>
Causes cp to write a prompt to the standard error output before copying a file
that would overwrite an existing file. If the response from the standard input
begins with the character 'y', the file copy is attempted.

<DT><STRONG>-L</STRONG>
<DD>
If the -R option is specified, all symbolic links are followed.

<DT><STRONG>-N</STRONG>
<DD>
When used with -p, do not copy file flags.

<DT><STRONG>-P</STRONG>
<DD>
No symbolic links are followed.

<DT><STRONG>-p</STRONG>
<DD>
Causes cp to preserve in the copy as many of the modification time, access
time, file flags, file mode, user ID, and group ID as allowed by permissions.

<P>
If the user ID and group ID cannot be preserved, no error message is displayed
and the exit value is not altered.
</P>
<P>
If the source file has its set user ID bit on and the user ID cannot be
preserved, the set user ID bit is not preserved in the copy's permissions. If
the source file has its set group ID bit on and the group ID cannot be
preserved, the set group ID bit is not preserved in the copy's permissions. If
the source file has both its set user ID and set group ID bits on, and either
the user ID or group ID cannot be preserved, neither the set user ID or set
group ID bits are preserved in the copy's permissions.
</P>
<DT><STRONG>-R</STRONG>
<DD>
If source_file designates a directory, cp copies the directory and the entire
subtree connected at that point. This option also causes symbolic links to be
copied, rather than indirected through, and for cp to create special files
rather than copying them as normal files. Created directories have the same
mode as the corresponding source directory, unmodified by the process's umask.

<DT><STRONG>-v</STRONG>
<DD>
Cause cp to be verbose, showing files as they are copied.

</DL>
<P>
For each destination file that already exists, its contents are overwritten if
permissions allow, but its mode, user ID, and group ID are unchanged.
</P>
<P>
In the second synopsis form, target_directory must exist unless there is only
one named source_file which is a directory and the -R flag is specified.
</P>
<P>
If the destination file does not exist, the mode of the source file is used as
modified by the file mode creation mask (umask, see csh(1)). If the source file
has its set user ID bit on, that bit is removed unless both the source file and
the destination file are owned by the same user. If the source file has its set
group ID bit on, that bit is removed unless both the source file and the
destination file are in the same group and the user is a member of that group.
If both the set user ID and set group ID bits are set, all of the above
conditions must be fulfilled or both bits are removed.
</P>
<P>
Appropriate permissions are required for file creation or overwriting.
</P>
<P>
Symbolic links are always followed unless the -R flag is set, in which case
symbolic links are not followed, by default. The -H or -L flags (in conjunction
with the -R flag), as well as the -P flag cause symbolic links to be followed
as described above. The -H and -L options are ignored unless the -R option is
specified. In addition, these options override eachsubhedading other and the
command's actions are determined by the last one specified.
</P>
<H3>EXIT STATUS:</H3>
<P>
This command returns 0 on success and non-zero if an error is encountered.
</P>
<H3>NOTES:</H3>
<P>
NONE
</P>
<H3>EXAMPLES:</H3>
<P>
The following is an example of how to use <CODE>cp</CODE> to
copy a file to a new name in the current directory:
</P>
<DL><DT><DD>
<PRE>
SHLL [/] # cat joel
cat: joel: No such file or directory
SHLL [/] # cp etc/passwd joel
SHLL [/] # cat joel
root:*:0:0:root::/:/bin/sh
rtems:*:1:1:RTEMS Application::/:/bin/sh
tty:!:2:2:tty owner::/:/bin/false
SHLL [/] # ls
drwxr-xr-x   1   root   root         536 Jan 01 00:00 dev/
drwxr-xr-x   1   root   root        1072 Jan 01 00:00 etc/
-rw-r--r--   1   root   root         102 Jan 01 00:00 joel
3 files 1710 bytes occupied
</PRE>
</DL>
<P>
The following is an example of how to use <CODE>cp</CODE> to
copy one or more files to a destination directory and
use the same <CODE>basename</CODE> in the destination directory:
</P>
<DL><DT><DD>
<PRE>
SHLL [/] # mkdir tmp
SHLL [/] # ls tmp
0 files 0 bytes occupied
SHLL [/] # cp /etc/passwd tmp
SHLL [/] # ls /tmp
-rw-r--r--   1   root   root         102 Jan 01 00:01 passwd
1 files 102 bytes occupied
SHLL [/] # cp /etc/passwd /etc/group /tmp
SHLL [/] # ls /tmp
-rw-r--r--   1   root   root         102 Jan 01 00:01 passwd
-rw-r--r--   1   root   root          42 Jan 01 00:01 group
2 files 144 bytes occupied
SHLL [/] #
</PRE>
</DL>
<H3>CONFIGURATION:</H3>
<P>
This command is included in the default shell command set.
When building a custom command set, define
<CODE>CONFIGURE_SHELL_COMMAND_CP</CODE> to have this
command included.
</P>
<P>
This command can be excluded from the shell command set by
defining <CODE>CONFIGURE_SHELL_NO_COMMAND_CP</CODE> when all
shell commands have been configured.
</P>
<H3>PROGRAMMING INFORMATION:</H3>
<P>
The <CODE>cp</CODE> command is implemented by a C language function which
has the following prototype:
</P>
<DL><DT><DD>
<PRE>
int rtems_shell_rtems_main_cp(
  int    argc,
  char **argv
);
</PRE>
</DL>
<P>
The configuration structure for the <CODE>cp</CODE> has the
following prototype:
</P>
<DL><DT><DD>
<PRE>
extern rtems_shell_cmd_t rtems_shell_CP_Command;
</PRE>
</DL>
<H3>ORIGIN:</H3>
<P>
The implementation and portions of the documentation for this
command are from NetBSD 4.0.
</P>
<P><HR>
<LINK REL="Precedes" HREF="shell00034.html">
<LINK REV="Precedes" HREF="shell00032.html">
<LINK REV="Subdocument" HREF="shell00031.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="shell00032.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="shell00031.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="shell00034.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS Shell User's Guide</CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
