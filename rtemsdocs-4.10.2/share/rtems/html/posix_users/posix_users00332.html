<HTML>
<!-- created Dec 13 2011 from message.texi line 548 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>Message Passing Manager mq_send - Send a Message to a Message Queue</TITLE>
<LINK REL="Precedes" HREF="posix_users00333.html">
<LINK REV="Precedes" HREF="posix_users00331.html">
<LINK REV="Subdocument" HREF="posix_users00314.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="posix_users00331.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="posix_users00314.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="posix_users00333.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS POSIX API User's Guide </CITE></P>
<H3>16.4.4: mq_send - Send a Message to a Message Queue</H3>
<H3>CALLING SEQUENCE:</H3>
<DL><DT><DD>
<PRE>
#include&lt;mqueue.h&gt;
int mq_send(
  mqd_t        mqdes,
  const char  *msg_ptr,
  size_t       msg_len,
  unsigned int msg_prio
);
</PRE>
</DL>
<H3>STATUS CODES:</H3>
<P>
<CODE>EBADF</CODE> - The descriptor does not represent a valid message queue, or the queue was opened for read only O_RDONLY
<CODE>EINVAL</CODE> - The value of msg_prio was greater than the MQ_PRIO_MAX.
<CODE>EMSGSIZE</CODE> - The msg_len is greater than the mq_msgsize attribute of the message queue
<CODE>EAGAIN</CODE> - The message queue is non-blocking, and there is no room on the queue for another message as specified by the mq_maxmsg.
<CODE>EINTR</CODE> - The message queue is blocking. While the process was waiting for free space on the queue, a signal arrived that interrupted the wait.
</P>
<H3>DESCRIPTION:</H3>
<P>
The mq_send() function adds the message pointed to by the argument msg_ptr
to the message queue specified by mqdes. Each message is assigned a
priority , from 0 to MQ_PRIO_MAX. MQ_PRIO_MAX is defined in &lt;limits.h&gt; and
must be at least 32. Messages are added to the queue in order of their
priority. The highest priority message is at the front of the queue.
</P>
<P>
The maximum number of messages that a message queue may accept is
specified at creation by the mq_maxmsg field of the attribute structure.
If this amount is exceeded, the behavior of the process is determined
according to what oflag was used when the message queue was opened. If
the queue was opened with O_NONBLOCK flag set, then the EAGAIN error is
returned. If the O_NONBLOCK flag was not set, the process blocks and
waits for space on the queue, unless it is interrupted by a signal.
</P>
<P>
Upon successful completion, the mq_send () function returns a value of
zero. Otherwise, no message is enqueued, the function returns -1, and
errno is set to indicate the error.
</P>
<H3>NOTES:</H3>
<P>
If the specified message queue is not full, mq_send inserts the message at
the position indicated by the msg_prio argument.
</P>
<P><HR>
<LINK REL="Precedes" HREF="posix_users00333.html">
<LINK REV="Precedes" HREF="posix_users00331.html">
<LINK REV="Subdocument" HREF="posix_users00314.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="posix_users00331.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="posix_users00314.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="posix_users00333.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS POSIX API User's Guide </CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
