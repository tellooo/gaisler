<HTML>
<!-- created Dec 13 2011 from message.texi line 725 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>Message Passing Manager mq_setattr - Set Message Queue Attributes</TITLE>
<LINK REL="Precedes" HREF="posix_users00336.html">
<LINK REV="Precedes" HREF="posix_users00334.html">
<LINK REV="Subdocument" HREF="posix_users00314.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="posix_users00334.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="posix_users00314.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="posix_users00336.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS POSIX API User's Guide </CITE></P>
<H3>16.4.7: mq_setattr - Set Message Queue Attributes</H3>
<H3>CALLING SEQUENCE:</H3>
<DL><DT><DD>
<PRE>
#include &lt;mqueue.h&gt;

int mq_setattr(
  mqd_t                 mqdes,
  const struct mq_attr *mqstat,
  struct mq_attr       *omqstat
);
</PRE>
</DL>
<H3>STATUS CODES:</H3>
<P>
<CODE>EBADF</CODE> - The message queue descriptor does not refer to a valid, open queue.
<CODE>EINVAL</CODE> - The mq_flag value is invalid.
</P>
<H3>DESCRIPTION:</H3>
<P>
The mq_setattr function is used to set attributes associated with the open
message queue description referenced by the message queue descriptor
specified by mqdes. The *omqstat represents the old or previous
attributes. If omqstat is non-NULL, the function mq_setattr() stores, in
the location referenced by omqstat, the previous message queue attributes
and the current queue status. These values are the same as would be
returned by a call to mq_getattr() at that point.
</P>
<P>
There is only one mq_attr.mq_flag which can be altered by this call.
This is the flag that deals with the blocking and non-blocking behavior of
the message queue. If the flag is set then the message queue is
non-blocking, and requests to send or receive do not block while waiting
for resources. If the flag is not set, then message send and receive may
involve waiting for an empty queue or waiting for a message to arrive.
</P>
<P>
Upon successful completion, the function returns a value of zero and the
attributes of the message queue have been changed as specified.
Otherwise, the message queue attributes is unchanged, and the function
returns a value of -1 and sets errno to indicate the error.
</P>
<H3>NOTES:</H3>
<P>
All other fields in the mq_attr are ignored by this call.
</P>
<P><HR>
<LINK REL="Precedes" HREF="posix_users00336.html">
<LINK REV="Precedes" HREF="posix_users00334.html">
<LINK REV="Subdocument" HREF="posix_users00314.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="posix_users00334.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="posix_users00314.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="posix_users00336.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS POSIX API User's Guide </CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
