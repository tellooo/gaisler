<HTML>
<!-- created Dec 13 2011 from powerpc.texi line 415 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>PowerPC Specific Information Call and Return Mechanism</TITLE>
<LINK REL="Precedes" HREF="cpu_supplement00150.html">
<LINK REV="Precedes" HREF="cpu_supplement00155.html">
<LINK REV="Subdocument" HREF="cpu_supplement00133.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="cpu_supplement00155.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="cpu_supplement00133.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="cpu_supplement00150.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS CPU Architecture Supplement</CITE></P>
<H3>9.2.2: Call and Return Mechanism</H3>
<P>
The PowerPC architecture supports a simple yet effective call
and return mechanism.  A subroutine is invoked
via the &quot;branch and link&quot; (<CODE>bl</CODE>) and
&quot;brank and link absolute&quot; (<CODE>bla</CODE>)
instructions.  This instructions place the return address
in the Link Register (LR).  The callee returns to the caller by
executing a &quot;branch unconditional to the link register&quot; (<CODE>blr</CODE>)
instruction.  Thus the callee returns to the caller via a jump
to the return address which is stored in the LR.
</P>
<P>
The previous contents of the LR are not automatically saved
by either the <CODE>bl</CODE> or <CODE>bla</CODE>.  It is the responsibility
of the callee to save the contents of the LR before invoking
another subroutine.  If the callee invokes another subroutine,
it must restore the LR before executing the <CODE>blr</CODE> instruction
to return to the caller.
</P>
<P>
It is important to note that the PowerPC subroutine
call and return mechanism does not automatically save and
restore any registers.
</P>
<P>
The LR may be accessed as special purpose register 8 (<CODE>SPR8</CODE>) using the
&quot;move from special register&quot; (<CODE>mfspr</CODE>) and
&quot;move to special register&quot; (<CODE>mtspr</CODE>) instructions.
</P>
<P><HR>
<LINK REL="Precedes" HREF="cpu_supplement00150.html">
<LINK REV="Precedes" HREF="cpu_supplement00155.html">
<LINK REV="Subdocument" HREF="cpu_supplement00133.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="cpu_supplement00155.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="cpu_supplement00133.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="cpu_supplement00150.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS CPU Architecture Supplement</CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
