<HTML>
<!-- created Dec 13 2011 from buildc.texi line 851 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>Using RPM to Build GDB</TITLE>
<LINK REL="Precedes" HREF="started00051.html">
<LINK REV="Precedes" HREF="started00047.html">
<LINK REV="Subdocument" HREF="started00047.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="started00047.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="started00047.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="started00051.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>Getting Started with RTEMS</CITE></P>
<H4>4.2.4.1: Using RPM to Build GDB</H4>
<P>
This section describes the process of building binutils, gcc, and
newlib using RPM.  RPM is a packaging format which can be used to
distribute binary files as well as to capture the procedure and
source code used to produce those binary files.  Before
attempting to build any RPM from source, it is necessary to
ensure that all required source and patches are in the <CODE>SOURCES</CODE>
directory under the RPM root (probably <CODE>/usr/src/redhat</CODE> or
<CODE>/usr/local/src/redhat</CODE>) on your machine.  This procedure
starts by installing the source RPMs as shown in the following
example:
</P>
<DL><DT><DD>
<PRE>
rpm -U rtems-4.10-i386-rtems4.10-gdb-6.8-3.src.rpm
</PRE>
</DL>
<P>
Because RTEMS tool RPMS are called &quot;nosrc&quot; to indicate that one or
more source files required to produce the RPMs are not present.
The RTEMS source GDB RPM does not include the large <CODE>.tar.gz</CODE> or
<CODE>.tgz</CODE> files for GDB.  This is shared by all RTEMS RPMs
regardless of target CPU and there was no reason
to duplicate them.  You will have to get the required source
archive files by hand and place them in the <CODE>SOURCES</CODE> directory
before attempting to build.  If you forget to do this, RPM is
smart -- it will tell you what is missing.  To determine what is
included or referenced by a particular RPM, use a command like the
following:
</P>
<DL><DT><DD>
<PRE>
$ rpm -q -l -p rtems-4.10-i386-rtems4.10-gdb-6.8-3.src.rpm
gdb-6.8-rtems4.10-rtems4.10-20080917.diff
gdb-6.8.tar.gz
i386-rtems4.10-gdb-6.8.spec
</PRE>
</DL>
<P>
Notice that there is a patch file (the <CODE>.diff</CODE> file), a source archive
file (the <CODE>.tar.gz</CODE>), and a file describing the build procedure and
files produced (the <CODE>.spec</CODE> file).  The <CODE>.spec</CODE> file is placed
in the <CODE>SPECS</CODE> directory under the RPM root directory.
</P>
<H3>Configuring and Building GDB using RPM</H3>
<P>
The following example illustrates the invocation of RPM to build a new,
locally compiled, binutils binary RPM that matches the installed source
RPM.  This example assumes that all of the required source is installed.
</P>
<DL><DT><DD>
<PRE>
cd &lt;RPM_ROOT_DIRECTORY&gt;/SPECS
rpm -bb i386-rtems4.10-gdb-6.8.spec
</PRE>
</DL>
<P>
If the build completes successfully, RPMS like the following will
be generated in a build-host architecture specific subdirectory
of the RPMS directory under the RPM root directory.
</P>
<DL><DT><DD>
<PRE>
rtems-4.10-gdb-common-6.8-3.i386.rpm
rtems-4.10-i386-rtems4.10-gdb-6.8-3.i386.rpm
</PRE>
</DL>
<P>
<STRONG>NOTE</STRONG>: It may be necessary to remove the build tree in the
<CODE>BUILD</CODE> directory under the RPM root directory.
</P>
<P><HR>
<LINK REL="Precedes" HREF="started00051.html">
<LINK REV="Precedes" HREF="started00047.html">
<LINK REV="Subdocument" HREF="started00047.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="started00047.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="started00047.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="started00051.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>Getting Started with RTEMS</CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
