<HTML>
<!-- created Dec 13 2011 from networkapp.texi line 302 via texi2www -->
<BODY BGCOLOR="FFFFFF">
<A HREF="http://www.rtems.com" target="Text Frame">
  <IMG align=right BORDER=0 SRC="../images/rtems_logo.jpg" ALT="RTEMS Logo"> </A>
<H1>RTEMS 4.10.2 On-Line Library</H1>
<HR>
<HEAD>
<TITLE>Network device configuration</TITLE>
<LINK REL="Precedes" HREF="networking00026.html">
<LINK REV="Precedes" HREF="networking00024.html">
<LINK REV="Subdocument" HREF="networking00019.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="networking00024.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="networking00019.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="networking00026.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS Network Supplement</CITE></P>
<H3>3.3.3: Network device configuration</H3>
<P>
Network devices are specified and configured by declaring and initializing a
<CODE>struct rtems_bsdnet_ifconfig</CODE> structure for each network device.
</P>
<P>
The structure entries are described in the following table.  An application
which uses a single network interface, gets network configuration information
from a BOOTP/DHCP server, and uses the default values for all driver
parameters needs to initialize only the first two entries in the
structure.
</P>
<DL>
<DT><CODE>char *name</CODE>
<DD>
The full name of the network device.  This name consists of the
driver name and the unit number (e.g. <CODE>&quot;scc1&quot;</CODE>).
The <CODE>bsp.h</CODE> include file usually defines RTEMS_BSP_NETWORK_DRIVER_NAME as
the name of the primary (or only) network driver.

<DT><CODE>int (*attach)(struct rtems_bsdnet_ifconfig *conf)</CODE>
<DD>
The address of the driver <CODE>attach</CODE> function.   The network
initialization function calls this function to configure the driver and
attach it to the network stack.
The <CODE>bsp.h</CODE> include file usually defines RTEMS_BSP_NETWORK_DRIVER_ATTACH as
the name of the  attach function of the primary (or only) network driver.

<DT><CODE>struct rtems_bsdnet_ifconfig *next</CODE>
<DD>
A pointer to the network device configuration structure for the next network
interface, or <CODE>NULL</CODE> if this is the configuration structure of the
last network interface.

<DT><CODE>char *ip_address</CODE>
<DD>
The Internet address of the device,
specified in `dotted decimal' (<CODE>129.128.4.2</CODE>) form, or <CODE>NULL</CODE>
if the device configuration information is being obtained from a
BOOTP/DHCP server.

<DT><CODE>char *ip_netmask</CODE>
<DD>
The Internet inetwork mask of the device,
specified in `dotted decimal' (<CODE>255.255.255.0</CODE>) form, or <CODE>NULL</CODE>
if the device configuration information is being obtained from a
BOOTP/DHCP server.

<DT><CODE>void *hardware_address</CODE>
<DD>
The hardware address of the device, or <CODE>NULL</CODE> if the driver is
to obtain the hardware address in some other way (usually  by reading
it from the device or from the bootstrap ROM).

<DT><CODE>int ignore_broadcast</CODE>
<DD>
Zero if the device is to accept broadcast packets, non-zero if the device
is to ignore broadcast packets.

<DT><CODE>int mtu</CODE>
<DD>
The maximum transmission unit of the device, or zero if the driver
is to choose a default value (typically 1500 for Ethernet devices).

<DT><CODE>int rbuf_count</CODE>
<DD>
The number of receive buffers to use, or zero if the driver is to
choose a default value

<DT><CODE>int xbuf_count</CODE>
<DD>
The number of transmit buffers to use, or zero if the driver is to
choose a default value
Keep in mind that some network devices may use 4 or more
transmit descriptors for a single transmit buffer.

</DL>
<P>
A complete network configuration specification can be as simple as the one
shown in the following example.
This configuration uses a single network interface, gets
network configuration information
from a BOOTP/DHCP server, and uses the default values for all driver
parameters.
</P>
<DL><DT><DD>
<PRE>
static struct rtems_bsdnet_ifconfig netdriver_config = {
  RTEMS_BSP_NETWORK_DRIVER_NAME,
  RTEMS_BSP_NETWORK_DRIVER_ATTACH
};
struct rtems_bsdnet_config rtems_bsdnet_config = {
  &amp;netdriver_config,
  rtems_bsdnet_do_bootp,
};
</PRE>
</DL>
<P><HR>
<LINK REL="Precedes" HREF="networking00026.html">
<LINK REV="Precedes" HREF="networking00024.html">
<LINK REV="Subdocument" HREF="networking00019.html">
<LINK REV="Library" HREF="../index.html">
</HEAD><BODY><P>
<A HREF="networking00024.html"><IMG ALIGN=MIDDLE SRC="../images/prev-arrow.gif" ALT="PREV"></A>
<A HREF="networking00019.html"> <IMG ALIGN=MIDDLE SRC="../images/up-arrow.gif" ALT="UP"></A>
<A HREF="networking00026.html"><IMG ALIGN=MIDDLE SRC="../images/next-arrow.gif" ALT="NEXT"></A>
<A HREF="../index.html"> <IMG ALIGN=MIDDLE SRC="../images/dir-arrow.gif" ALT="Bookshelf"></A>
<CITE>RTEMS Network Supplement</CITE></P>
<P>Copyright &copy; 1988-2008 <A HREF="http://www.oarcorp.com" target="Text Frame">OAR Corporation</A>
</BODY></HTML>
