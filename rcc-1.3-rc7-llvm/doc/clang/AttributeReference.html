

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Attributes in Clang &mdash; Clang 8 documentation</title>
    
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '8',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
    <link rel="top" title="Clang 8 documentation" href="index.html" />
    <link rel="next" title="Diagnostic flags in Clang" href="DiagnosticsReference.html" />
    <link rel="prev" title="Clang command line argument reference" href="ClangCommandLineReference.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="index.html">
          <span>Clang 8 documentation</span></a></h1>
        <h2 class="heading"><span>Attributes in Clang</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="ClangCommandLineReference.html">Clang command line argument reference</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="DiagnosticsReference.html">Diagnostic flags in Clang</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="attributes-in-clang">
<h1>Attributes in Clang<a class="headerlink" href="#attributes-in-clang" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#introduction" id="id15">Introduction</a></li>
<li><a class="reference internal" href="#function-attributes" id="id16">Function Attributes</a><ul>
<li><a class="reference internal" href="#pragma-omp-declare-simd" id="id17">#pragma omp declare simd</a></li>
<li><a class="reference internal" href="#pragma-omp-declare-target" id="id18">#pragma omp declare target</a></li>
<li><a class="reference internal" href="#noreturn" id="id19">_Noreturn</a></li>
<li><a class="reference internal" href="#abi-tag" id="id20">abi_tag</a></li>
<li><a class="reference internal" href="#acquire-capability-acquire-shared-capability" id="id21">acquire_capability, acquire_shared_capability</a></li>
<li><a class="reference internal" href="#alloc-align" id="id22">alloc_align</a></li>
<li><a class="reference internal" href="#alloc-size" id="id23">alloc_size</a></li>
<li><a class="reference internal" href="#artificial" id="id24">artificial</a></li>
<li><a class="reference internal" href="#assert-capability-assert-shared-capability" id="id25">assert_capability, assert_shared_capability</a></li>
<li><a class="reference internal" href="#assume-aligned" id="id26">assume_aligned</a></li>
<li><a class="reference internal" href="#availability" id="id27">availability</a></li>
<li><a class="reference internal" href="#carries-dependency" id="id28">carries_dependency</a></li>
<li><a class="reference internal" href="#cf-consumed" id="id29">cf_consumed</a></li>
<li><a class="reference internal" href="#cf-returns-not-retained" id="id30">cf_returns_not_retained</a></li>
<li><a class="reference internal" href="#cf-returns-retained" id="id31">cf_returns_retained</a></li>
<li><a class="reference internal" href="#code-seg" id="id32">code_seg</a></li>
<li><a class="reference internal" href="#convergent" id="id33">convergent</a></li>
<li><a class="reference internal" href="#cpu-dispatch" id="id34">cpu_dispatch</a></li>
<li><a class="reference internal" href="#cpu-specific" id="id35">cpu_specific</a></li>
<li><a class="reference internal" href="#deprecated" id="id36">deprecated</a></li>
<li><a class="reference internal" href="#diagnose-if" id="id37">diagnose_if</a></li>
<li><a class="reference internal" href="#disable-tail-calls" id="id38">disable_tail_calls</a></li>
<li><a class="reference internal" href="#enable-if" id="id39">enable_if</a></li>
<li><a class="reference internal" href="#exclude-from-explicit-instantiation" id="id40">exclude_from_explicit_instantiation</a></li>
<li><a class="reference internal" href="#external-source-symbol" id="id41">external_source_symbol</a></li>
<li><a class="reference internal" href="#flatten" id="id42">flatten</a></li>
<li><a class="reference internal" href="#force-align-arg-pointer" id="id43">force_align_arg_pointer</a></li>
<li><a class="reference internal" href="#format" id="id44">format</a></li>
<li><a class="reference internal" href="#gnu-inline" id="id45">gnu_inline</a></li>
<li><a class="reference internal" href="#ifunc" id="id46">ifunc</a></li>
<li><a class="reference internal" href="#import-module" id="id47">import_module</a></li>
<li><a class="reference internal" href="#import-name" id="id48">import_name</a></li>
<li><a class="reference internal" href="#internal-linkage" id="id49">internal_linkage</a></li>
<li><a class="reference internal" href="#interrupt-arm" id="id50">interrupt (ARM)</a></li>
<li><a class="reference internal" href="#interrupt-avr" id="id51">interrupt (AVR)</a></li>
<li><a class="reference internal" href="#interrupt-mips" id="id52">interrupt (MIPS)</a></li>
<li><a class="reference internal" href="#interrupt-riscv" id="id53">interrupt (RISCV)</a></li>
<li><a class="reference internal" href="#kernel" id="id54">kernel</a></li>
<li><a class="reference internal" href="#lifetimebound" id="id55">lifetimebound</a></li>
<li><a class="reference internal" href="#long-call-far" id="id56">long_call, far</a></li>
<li><a class="reference internal" href="#micromips" id="id57">micromips</a></li>
<li><a class="reference internal" href="#min-vector-width" id="id58">min_vector_width</a></li>
<li><a class="reference internal" href="#no-caller-saved-registers" id="id59">no_caller_saved_registers</a></li>
<li><a class="reference internal" href="#no-sanitize" id="id60">no_sanitize</a></li>
<li><a class="reference internal" href="#no-sanitize-address-no-address-safety-analysis" id="id61">no_sanitize_address, no_address_safety_analysis</a></li>
<li><a class="reference internal" href="#no-sanitize-memory" id="id62">no_sanitize_memory</a></li>
<li><a class="reference internal" href="#no-sanitize-thread" id="id63">no_sanitize_thread</a></li>
<li><a class="reference internal" href="#no-split-stack" id="id64">no_split_stack</a></li>
<li><a class="reference internal" href="#no-stack-protector" id="id65">no_stack_protector</a></li>
<li><a class="reference internal" href="#noalias" id="id66">noalias</a></li>
<li><a class="reference internal" href="#nocf-check" id="id67">nocf_check</a></li>
<li><a class="reference internal" href="#nodiscard-warn-unused-result" id="id68">nodiscard, warn_unused_result</a></li>
<li><a class="reference internal" href="#noduplicate" id="id69">noduplicate</a></li>
<li><a class="reference internal" href="#nomicromips" id="id70">nomicromips</a></li>
<li><a class="reference internal" href="#id1" id="id71">noreturn</a></li>
<li><a class="reference internal" href="#not-tail-called" id="id72">not_tail_called</a></li>
<li><a class="reference internal" href="#nothrow" id="id73">nothrow</a></li>
<li><a class="reference internal" href="#ns-consumed" id="id74">ns_consumed</a></li>
<li><a class="reference internal" href="#ns-consumes-self" id="id75">ns_consumes_self</a></li>
<li><a class="reference internal" href="#ns-returns-autoreleased" id="id76">ns_returns_autoreleased</a></li>
<li><a class="reference internal" href="#ns-returns-not-retained" id="id77">ns_returns_not_retained</a></li>
<li><a class="reference internal" href="#ns-returns-retained" id="id78">ns_returns_retained</a></li>
<li><a class="reference internal" href="#objc-boxable" id="id79">objc_boxable</a></li>
<li><a class="reference internal" href="#objc-method-family" id="id80">objc_method_family</a></li>
<li><a class="reference internal" href="#objc-requires-super" id="id81">objc_requires_super</a></li>
<li><a class="reference internal" href="#objc-runtime-name" id="id82">objc_runtime_name</a></li>
<li><a class="reference internal" href="#objc-runtime-visible" id="id83">objc_runtime_visible</a></li>
<li><a class="reference internal" href="#optnone" id="id84">optnone</a></li>
<li><a class="reference internal" href="#os-consumed" id="id85">os_consumed</a></li>
<li><a class="reference internal" href="#os-consumes-this" id="id86">os_consumes_this</a></li>
<li><a class="reference internal" href="#os-returns-not-retained" id="id87">os_returns_not_retained</a></li>
<li><a class="reference internal" href="#os-returns-retained" id="id88">os_returns_retained</a></li>
<li><a class="reference internal" href="#os-returns-retained-on-non-zero" id="id89">os_returns_retained_on_non_zero</a></li>
<li><a class="reference internal" href="#os-returns-retained-on-zero" id="id90">os_returns_retained_on_zero</a></li>
<li><a class="reference internal" href="#overloadable" id="id91">overloadable</a></li>
<li><a class="reference internal" href="#reinitializes" id="id92">reinitializes</a></li>
<li><a class="reference internal" href="#release-capability-release-shared-capability" id="id93">release_capability, release_shared_capability</a></li>
<li><a class="reference internal" href="#short-call-near" id="id94">short_call, near</a></li>
<li><a class="reference internal" href="#signal" id="id95">signal</a></li>
<li><a class="reference internal" href="#speculative-load-hardening" id="id96">speculative_load_hardening</a></li>
<li><a class="reference internal" href="#target" id="id97">target</a></li>
<li><a class="reference internal" href="#try-acquire-capability-try-acquire-shared-capability" id="id98">try_acquire_capability, try_acquire_shared_capability</a></li>
<li><a class="reference internal" href="#xray-always-instrument-xray-never-instrument-xray-log-args" id="id99">xray_always_instrument, xray_never_instrument, xray_log_args</a></li>
<li><a class="reference internal" href="#id3" id="id100">xray_always_instrument, xray_never_instrument, xray_log_args</a></li>
</ul>
</li>
<li><a class="reference internal" href="#variable-attributes" id="id101">Variable Attributes</a><ul>
<li><a class="reference internal" href="#always-destroy" id="id102">always_destroy</a></li>
<li><a class="reference internal" href="#dllexport" id="id103">dllexport</a></li>
<li><a class="reference internal" href="#dllimport" id="id104">dllimport</a></li>
<li><a class="reference internal" href="#init-seg" id="id105">init_seg</a></li>
<li><a class="reference internal" href="#maybe-unused-unused" id="id106">maybe_unused, unused</a></li>
<li><a class="reference internal" href="#no-destroy" id="id107">no_destroy</a></li>
<li><a class="reference internal" href="#nodebug" id="id108">nodebug</a></li>
<li><a class="reference internal" href="#noescape" id="id109">noescape</a></li>
<li><a class="reference internal" href="#nosvm" id="id110">nosvm</a></li>
<li><a class="reference internal" href="#objc-externally-retained" id="id111">objc_externally_retained</a></li>
<li><a class="reference internal" href="#pass-object-size" id="id112">pass_object_size</a></li>
<li><a class="reference internal" href="#require-constant-initialization" id="id113">require_constant_initialization</a></li>
<li><a class="reference internal" href="#section-declspec-allocate" id="id114">section, __declspec(allocate)</a></li>
<li><a class="reference internal" href="#swift-context" id="id115">swift_context</a></li>
<li><a class="reference internal" href="#swift-error-result" id="id116">swift_error_result</a></li>
<li><a class="reference internal" href="#swift-indirect-result" id="id117">swift_indirect_result</a></li>
<li><a class="reference internal" href="#swiftcall" id="id118">swiftcall</a></li>
<li><a class="reference internal" href="#thread" id="id119">thread</a></li>
<li><a class="reference internal" href="#tls-model" id="id120">tls_model</a></li>
<li><a class="reference internal" href="#trivial-abi" id="id121">trivial_abi</a></li>
<li><a class="reference internal" href="#uninitialized" id="id122">uninitialized</a></li>
</ul>
</li>
<li><a class="reference internal" href="#type-attributes" id="id123">Type Attributes</a><ul>
<li><a class="reference internal" href="#single-inhertiance-multiple-inheritance-virtual-inheritance" id="id124">__single_inhertiance, __multiple_inheritance, __virtual_inheritance</a></li>
<li><a class="reference internal" href="#align-value" id="id125">align_value</a></li>
<li><a class="reference internal" href="#empty-bases" id="id126">empty_bases</a></li>
<li><a class="reference internal" href="#enum-extensibility" id="id127">enum_extensibility</a></li>
<li><a class="reference internal" href="#flag-enum" id="id128">flag_enum</a></li>
<li><a class="reference internal" href="#layout-version" id="id129">layout_version</a></li>
<li><a class="reference internal" href="#lto-visibility-public" id="id130">lto_visibility_public</a></li>
<li><a class="reference internal" href="#noderef" id="id131">noderef</a></li>
<li><a class="reference internal" href="#novtable" id="id132">novtable</a></li>
<li><a class="reference internal" href="#objc-subclassing-restricted" id="id133">objc_subclassing_restricted</a></li>
<li><a class="reference internal" href="#selectany" id="id134">selectany</a></li>
<li><a class="reference internal" href="#transparent-union" id="id135">transparent_union</a></li>
</ul>
</li>
<li><a class="reference internal" href="#statement-attributes" id="id136">Statement Attributes</a><ul>
<li><a class="reference internal" href="#pragma-clang-loop" id="id137">#pragma clang loop</a></li>
<li><a class="reference internal" href="#pragma-unroll-pragma-nounroll" id="id138">#pragma unroll, #pragma nounroll</a></li>
<li><a class="reference internal" href="#read-only-write-only-read-write-read-only-write-only-read-write" id="id139">__read_only, __write_only, __read_write (read_only, write_only, read_write)</a></li>
<li><a class="reference internal" href="#fallthrough" id="id140">fallthrough</a></li>
<li><a class="reference internal" href="#intel-reqd-sub-group-size" id="id141">intel_reqd_sub_group_size</a></li>
<li><a class="reference internal" href="#opencl-unroll-hint" id="id142">opencl_unroll_hint</a></li>
<li><a class="reference internal" href="#suppress" id="id143">suppress</a></li>
</ul>
</li>
<li><a class="reference internal" href="#amd-gpu-attributes" id="id144">AMD GPU Attributes</a><ul>
<li><a class="reference internal" href="#amdgpu-flat-work-group-size" id="id145">amdgpu_flat_work_group_size</a></li>
<li><a class="reference internal" href="#amdgpu-num-sgpr" id="id146">amdgpu_num_sgpr</a></li>
<li><a class="reference internal" href="#amdgpu-num-vgpr" id="id147">amdgpu_num_vgpr</a></li>
<li><a class="reference internal" href="#amdgpu-waves-per-eu" id="id148">amdgpu_waves_per_eu</a></li>
</ul>
</li>
<li><a class="reference internal" href="#opencl-address-spaces" id="id149">OpenCL Address Spaces</a><ul>
<li><a class="reference internal" href="#constant" id="id150">constant</a></li>
<li><a class="reference internal" href="#generic" id="id151">generic</a></li>
<li><a class="reference internal" href="#global" id="id152">global</a></li>
<li><a class="reference internal" href="#local" id="id153">local</a></li>
<li><a class="reference internal" href="#private" id="id154">private</a></li>
</ul>
</li>
<li><a class="reference internal" href="#calling-conventions" id="id155">Calling Conventions</a><ul>
<li><a class="reference internal" href="#aarch64-vector-pcs" id="id156">aarch64_vector_pcs</a></li>
<li><a class="reference internal" href="#fastcall" id="id157">fastcall</a></li>
<li><a class="reference internal" href="#ms-abi" id="id158">ms_abi</a></li>
<li><a class="reference internal" href="#pcs" id="id159">pcs</a></li>
<li><a class="reference internal" href="#preserve-all" id="id160">preserve_all</a></li>
<li><a class="reference internal" href="#preserve-most" id="id161">preserve_most</a></li>
<li><a class="reference internal" href="#regcall" id="id162">regcall</a></li>
<li><a class="reference internal" href="#regparm" id="id163">regparm</a></li>
<li><a class="reference internal" href="#stdcall" id="id164">stdcall</a></li>
<li><a class="reference internal" href="#thiscall" id="id165">thiscall</a></li>
<li><a class="reference internal" href="#vectorcall" id="id166">vectorcall</a></li>
</ul>
</li>
<li><a class="reference internal" href="#consumed-annotation-checking" id="id167">Consumed Annotation Checking</a><ul>
<li><a class="reference internal" href="#callable-when" id="id168">callable_when</a></li>
<li><a class="reference internal" href="#consumable" id="id169">consumable</a></li>
<li><a class="reference internal" href="#param-typestate" id="id170">param_typestate</a></li>
<li><a class="reference internal" href="#return-typestate" id="id171">return_typestate</a></li>
<li><a class="reference internal" href="#set-typestate" id="id172">set_typestate</a></li>
<li><a class="reference internal" href="#test-typestate" id="id173">test_typestate</a></li>
</ul>
</li>
<li><a class="reference internal" href="#type-safety-checking" id="id174">Type Safety Checking</a><ul>
<li><a class="reference internal" href="#argument-with-type-tag" id="id175">argument_with_type_tag</a></li>
<li><a class="reference internal" href="#pointer-with-type-tag" id="id176">pointer_with_type_tag</a></li>
<li><a class="reference internal" href="#type-tag-for-datatype" id="id177">type_tag_for_datatype</a></li>
</ul>
</li>
<li><a class="reference internal" href="#nullability-attributes" id="id178">Nullability Attributes</a><ul>
<li><a class="reference internal" href="#nonnull" id="id179">_Nonnull</a></li>
<li><a class="reference internal" href="#null-unspecified" id="id180">_Null_unspecified</a></li>
<li><a class="reference internal" href="#nullable" id="id181">_Nullable</a></li>
<li><a class="reference internal" href="#id14" id="id182">nonnull</a></li>
<li><a class="reference internal" href="#returns-nonnull" id="id183">returns_nonnull</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id15">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This page lists the attributes currently supported by Clang.</p>
</div>
<div class="section" id="function-attributes">
<h2><a class="toc-backref" href="#id16">Function Attributes</a><a class="headerlink" href="#function-attributes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="pragma-omp-declare-simd">
<h3><a class="toc-backref" href="#id17">#pragma omp declare simd</a><a class="headerlink" href="#pragma-omp-declare-simd" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">omp</span> <span class="pre">declare</span> <span class="pre">simd</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The <cite>declare simd</cite> construct can be applied to a function to enable the creation
of one or more versions that can process multiple arguments using SIMD
instructions from a single invocation in a SIMD loop. The <cite>declare simd</cite>
directive is a declarative directive. There may be multiple <cite>declare simd</cite>
directives for a function. The use of a <cite>declare simd</cite> construct on a function
enables the creation of SIMD versions of the associated function that can be
used to process multiple arguments from a single invocation from a SIMD loop
concurrently.
The syntax of the <cite>declare simd</cite> construct is as follows:</p>
<blockquote>
<div><div class="highlight-none"><div class="highlight"><pre>#pragma omp declare simd [clause[[,] clause] ...] new-line
[#pragma omp declare simd [clause[[,] clause] ...] new-line]
[...]
function definition or declaration
</pre></div>
</div>
</div></blockquote>
<p>where clause is one of the following:</p>
<blockquote>
<div><div class="highlight-none"><div class="highlight"><pre>simdlen(length)
linear(argument-list[:constant-linear-step])
aligned(argument-list[:alignment])
uniform(argument-list)
inbranch
notinbranch
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="pragma-omp-declare-target">
<h3><a class="toc-backref" href="#id18">#pragma omp declare target</a><a class="headerlink" href="#pragma-omp-declare-target" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">omp</span> <span class="pre">declare</span> <span class="pre">target</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The <cite>declare target</cite> directive specifies that variables and functions are mapped
to a device for OpenMP offload mechanism.</p>
<p>The syntax of the declare target directive is as follows:</p>
<blockquote>
<div><div class="highlight-c"><div class="highlight"><pre><span class="cp">#pragma omp declare target new-line</span>
<span class="n">declarations</span><span class="o">-</span><span class="n">definition</span><span class="o">-</span><span class="n">seq</span>
<span class="cp">#pragma omp end declare target new-line</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="noreturn">
<h3><a class="toc-backref" href="#id19">_Noreturn</a><a class="headerlink" href="#noreturn" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">_Noreturn</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>A function declared as <tt class="docutils literal"><span class="pre">_Noreturn</span></tt> shall not return to its caller. The
compiler will generate a diagnostic for a function declared as <tt class="docutils literal"><span class="pre">_Noreturn</span></tt>
that appears to be capable of returning to its caller.</p>
</div>
<div class="section" id="abi-tag">
<h3><a class="toc-backref" href="#id20">abi_tag</a><a class="headerlink" href="#abi-tag" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">abi_tag</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::abi_tag</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">abi_tag</span></tt> attribute can be applied to a function, variable, class or
inline namespace declaration to modify the mangled name of the entity. It gives
the ability to distinguish between different versions of the same entity but
with different ABI versions supported. For example, a newer version of a class
could have a different set of data members and thus have a different size. Using
the <tt class="docutils literal"><span class="pre">abi_tag</span></tt> attribute, it is possible to have different mangled names for
a global variable of the class type. Therefore, the old code could keep using
the old manged name and the new code will use the new mangled name with tags.</p>
</div>
<div class="section" id="acquire-capability-acquire-shared-capability">
<h3><a class="toc-backref" href="#id21">acquire_capability, acquire_shared_capability</a><a class="headerlink" href="#acquire-capability-acquire-shared-capability" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">acquire_capability</span></tt> <br/> <tt class="docutils literal"><span class="pre">acquire_shared_capability</span></tt> <br/> <tt class="docutils literal"><span class="pre">exclusive_lock_function</span></tt> <br/> <tt class="docutils literal"><span class="pre">shared_lock_function</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::acquire_capability</span></tt> <br/> <tt class="docutils literal"><span class="pre">clang::acquire_shared_capability</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>Marks a function as acquiring a capability.</p>
</div>
<div class="section" id="alloc-align">
<h3><a class="toc-backref" href="#id22">alloc_align</a><a class="headerlink" href="#alloc-align" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">alloc_align</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::alloc_align</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>Use <tt class="docutils literal"><span class="pre">__attribute__((alloc_align(&lt;alignment&gt;))</span></tt> on a function
declaration to specify that the return value of the function (which must be a
pointer type) is at least as aligned as the value of the indicated parameter. The
parameter is given by its index in the list of formal parameters; the first
parameter has index 1 unless the function is a C++ non-static member function,
in which case the first parameter has index 2 to account for the implicit <tt class="docutils literal"><span class="pre">this</span></tt>
parameter.</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="c1">// The returned pointer has the alignment specified by the first parameter.</span>
<span class="kt">void</span> <span class="o">*</span><span class="n">a</span><span class="p">(</span><span class="n">size_t</span> <span class="n">align</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">alloc_align</span><span class="p">(</span><span class="mi">1</span><span class="p">)));</span>

<span class="c1">// The returned pointer has the alignment specified by the second parameter.</span>
<span class="kt">void</span> <span class="o">*</span><span class="n">b</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">v</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">align</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">alloc_align</span><span class="p">(</span><span class="mi">2</span><span class="p">)));</span>

<span class="c1">// The returned pointer has the alignment specified by the second visible</span>
<span class="c1">// parameter, however it must be adjusted for the implicit &#39;this&#39; parameter.</span>
<span class="kt">void</span> <span class="o">*</span><span class="n">Foo</span><span class="o">::</span><span class="n">b</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">v</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">align</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">alloc_align</span><span class="p">(</span><span class="mi">3</span><span class="p">)));</span>
</pre></div>
</div>
<p>Note that this attribute merely informs the compiler that a function always
returns a sufficiently aligned pointer. It does not cause the compiler to
emit code to enforce that alignment.  The behavior is undefined if the returned
poitner is not sufficiently aligned.</p>
</div>
<div class="section" id="alloc-size">
<h3><a class="toc-backref" href="#id23">alloc_size</a><a class="headerlink" href="#alloc-size" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">alloc_size</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::alloc_size</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">alloc_size</span></tt> attribute can be placed on functions that return pointers in
order to hint to the compiler how many bytes of memory will be available at the
returned pointer. <tt class="docutils literal"><span class="pre">alloc_size</span></tt> takes one or two arguments.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">alloc_size(N)</span></tt> implies that argument number N equals the number of
available bytes at the returned pointer.</li>
<li><tt class="docutils literal"><span class="pre">alloc_size(N,</span> <span class="pre">M)</span></tt> implies that the product of argument number N and
argument number M equals the number of available bytes at the returned
pointer.</li>
</ul>
<p>Argument numbers are 1-based.</p>
<p>An example of how to use <tt class="docutils literal"><span class="pre">alloc_size</span></tt></p>
<div class="highlight-c"><div class="highlight"><pre><span class="kt">void</span> <span class="o">*</span><span class="n">my_malloc</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">alloc_size</span><span class="p">(</span><span class="mi">1</span><span class="p">)));</span>
<span class="kt">void</span> <span class="o">*</span><span class="n">my_calloc</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">alloc_size</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)));</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">void</span> <span class="o">*</span><span class="k">const</span> <span class="n">p</span> <span class="o">=</span> <span class="n">my_malloc</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
  <span class="n">assert</span><span class="p">(</span><span class="n">__builtin_object_size</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mi">100</span><span class="p">);</span>
  <span class="kt">void</span> <span class="o">*</span><span class="k">const</span> <span class="n">a</span> <span class="o">=</span> <span class="n">my_calloc</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
  <span class="n">assert</span><span class="p">(</span><span class="n">__builtin_object_size</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mi">100</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This attribute works differently in clang than it does in GCC.
Specifically, clang will only trace <tt class="docutils literal"><span class="pre">const</span></tt> pointers (as above); we give up
on pointers that are not marked as <tt class="docutils literal"><span class="pre">const</span></tt>. In the vast majority of cases,
this is unimportant, because LLVM has support for the <tt class="docutils literal"><span class="pre">alloc_size</span></tt>
attribute. However, this may cause mildly unintuitive behavior when used with
other attributes, such as <tt class="docutils literal"><span class="pre">enable_if</span></tt>.</p>
</div>
</div>
<div class="section" id="artificial">
<h3><a class="toc-backref" href="#id24">artificial</a><a class="headerlink" href="#artificial" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">artificial</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::artificial</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">artificial</span></tt> attribute can be applied to an inline function. If such a
function is inlined, the attribute indicates that debuggers should associate
the resulting instructions with the call site, rather than with the
corresponding line within the inlined callee.</p>
</div>
<div class="section" id="assert-capability-assert-shared-capability">
<h3><a class="toc-backref" href="#id25">assert_capability, assert_shared_capability</a><a class="headerlink" href="#assert-capability-assert-shared-capability" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">assert_capability</span></tt> <br/> <tt class="docutils literal"><span class="pre">assert_shared_capability</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::assert_capability</span></tt> <br/> <tt class="docutils literal"><span class="pre">clang::assert_shared_capability</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>Marks a function that dynamically tests whether a capability is held, and halts
the program if it is not held.</p>
</div>
<div class="section" id="assume-aligned">
<h3><a class="toc-backref" href="#id26">assume_aligned</a><a class="headerlink" href="#assume-aligned" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">assume_aligned</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::assume_aligned</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Use <tt class="docutils literal"><span class="pre">__attribute__((assume_aligned(&lt;alignment&gt;[,&lt;offset&gt;]))</span></tt> on a function
declaration to specify that the return value of the function (which must be a
pointer type) has the specified offset, in bytes, from an address with the
specified alignment. The offset is taken to be zero if omitted.</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="c1">// The returned pointer value has 32-byte alignment.</span>
<span class="kt">void</span> <span class="o">*</span><span class="n">a</span><span class="p">()</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">assume_aligned</span> <span class="p">(</span><span class="mi">32</span><span class="p">)));</span>

<span class="c1">// The returned pointer value is 4 bytes greater than an address having</span>
<span class="c1">// 32-byte alignment.</span>
<span class="kt">void</span> <span class="o">*</span><span class="n">b</span><span class="p">()</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">assume_aligned</span> <span class="p">(</span><span class="mi">32</span><span class="p">,</span> <span class="mi">4</span><span class="p">)));</span>
</pre></div>
</div>
<p>Note that this attribute provides information to the compiler regarding a
condition that the code already ensures is true. It does not cause the compiler
to enforce the provided alignment assumption.</p>
</div>
<div class="section" id="availability">
<h3><a class="toc-backref" href="#id27">availability</a><a class="headerlink" href="#availability" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">availability</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::availability</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::availability</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">availability</span></tt> attribute can be placed on declarations to describe the
lifecycle of that declaration relative to operating system versions.  Consider
the function declaration for a hypothetical function <tt class="docutils literal"><span class="pre">f</span></tt>:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">void</span> <span class="n">f</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">availability</span><span class="p">(</span><span class="n">macos</span><span class="p">,</span><span class="n">introduced</span><span class="o">=</span><span class="mf">10.4</span><span class="p">,</span><span class="n">deprecated</span><span class="o">=</span><span class="mf">10.6</span><span class="p">,</span><span class="n">obsoleted</span><span class="o">=</span><span class="mf">10.7</span><span class="p">)));</span>
</pre></div>
</div>
<p>The availability attribute states that <tt class="docutils literal"><span class="pre">f</span></tt> was introduced in macOS 10.4,
deprecated in macOS 10.6, and obsoleted in macOS 10.7.  This information
is used by Clang to determine when it is safe to use <tt class="docutils literal"><span class="pre">f</span></tt>: for example, if
Clang is instructed to compile code for macOS 10.5, a call to <tt class="docutils literal"><span class="pre">f()</span></tt>
succeeds.  If Clang is instructed to compile code for macOS 10.6, the call
succeeds but Clang emits a warning specifying that the function is deprecated.
Finally, if Clang is instructed to compile code for macOS 10.7, the call
fails because <tt class="docutils literal"><span class="pre">f()</span></tt> is no longer available.</p>
<p>The availability attribute is a comma-separated list starting with the
platform name and then including clauses specifying important milestones in the
declaration&#8217;s lifetime (in any order) along with additional information.  Those
clauses can be:</p>
<dl class="docutils">
<dt>introduced=<em>version</em></dt>
<dd>The first version in which this declaration was introduced.</dd>
<dt>deprecated=<em>version</em></dt>
<dd>The first version in which this declaration was deprecated, meaning that
users should migrate away from this API.</dd>
<dt>obsoleted=<em>version</em></dt>
<dd>The first version in which this declaration was obsoleted, meaning that it
was removed completely and can no longer be used.</dd>
<dt>unavailable</dt>
<dd>This declaration is never available on this platform.</dd>
<dt>message=<em>string-literal</em></dt>
<dd>Additional message text that Clang will provide when emitting a warning or
error about use of a deprecated or obsoleted declaration.  Useful to direct
users to replacement APIs.</dd>
<dt>replacement=<em>string-literal</em></dt>
<dd>Additional message text that Clang will use to provide Fix-It when emitting
a warning about use of a deprecated declaration. The Fix-It will replace
the deprecated declaration with the new declaration specified.</dd>
</dl>
<p>Multiple availability attributes can be placed on a declaration, which may
correspond to different platforms.  Only the availability attribute with the
platform corresponding to the target platform will be used; any others will be
ignored.  If no availability attribute specifies availability for the current
target platform, the availability attributes are ignored.  Supported platforms
are:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">ios</span></tt></dt>
<dd>Apple&#8217;s iOS operating system.  The minimum deployment target is specified by
the <tt class="docutils literal"><span class="pre">-mios-version-min=*version*</span></tt> or <tt class="docutils literal"><span class="pre">-miphoneos-version-min=*version*</span></tt>
command-line arguments.</dd>
<dt><tt class="docutils literal"><span class="pre">macos</span></tt></dt>
<dd>Apple&#8217;s macOS operating system.  The minimum deployment target is
specified by the <tt class="docutils literal"><span class="pre">-mmacosx-version-min=*version*</span></tt> command-line argument.
<tt class="docutils literal"><span class="pre">macosx</span></tt> is supported for backward-compatibility reasons, but it is
deprecated.</dd>
<dt><tt class="docutils literal"><span class="pre">tvos</span></tt></dt>
<dd>Apple&#8217;s tvOS operating system.  The minimum deployment target is specified by
the <tt class="docutils literal"><span class="pre">-mtvos-version-min=*version*</span></tt> command-line argument.</dd>
<dt><tt class="docutils literal"><span class="pre">watchos</span></tt></dt>
<dd>Apple&#8217;s watchOS operating system.  The minimum deployment target is specified by
the <tt class="docutils literal"><span class="pre">-mwatchos-version-min=*version*</span></tt> command-line argument.</dd>
</dl>
<p>A declaration can typically be used even when deploying back to a platform
version prior to when the declaration was introduced.  When this happens, the
declaration is <a class="reference external" href="https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPFrameworks/Concepts/WeakLinking.html">weakly linked</a>,
as if the <tt class="docutils literal"><span class="pre">weak_import</span></tt> attribute were added to the declaration.  A
weakly-linked declaration may or may not be present a run-time, and a program
can determine whether the declaration is present by checking whether the
address of that declaration is non-NULL.</p>
<p>The flag <tt class="docutils literal"><span class="pre">strict</span></tt> disallows using API when deploying back to a
platform version prior to when the declaration was introduced.  An
attempt to use such API before its introduction causes a hard error.
Weakly-linking is almost always a better API choice, since it allows
users to query availability at runtime.</p>
<p>If there are multiple declarations of the same entity, the availability
attributes must either match on a per-platform basis or later
declarations must not have availability attributes for that
platform. For example:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="kt">void</span> <span class="n">g</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">availability</span><span class="p">(</span><span class="n">macos</span><span class="p">,</span><span class="n">introduced</span><span class="o">=</span><span class="mf">10.4</span><span class="p">)));</span>
<span class="kt">void</span> <span class="n">g</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">availability</span><span class="p">(</span><span class="n">macos</span><span class="p">,</span><span class="n">introduced</span><span class="o">=</span><span class="mf">10.4</span><span class="p">)));</span> <span class="c1">// okay, matches</span>
<span class="kt">void</span> <span class="n">g</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">availability</span><span class="p">(</span><span class="n">ios</span><span class="p">,</span><span class="n">introduced</span><span class="o">=</span><span class="mf">4.0</span><span class="p">)));</span> <span class="c1">// okay, adds a new platform</span>
<span class="kt">void</span> <span class="n">g</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span> <span class="c1">// okay, inherits both macos and ios availability from above.</span>
<span class="kt">void</span> <span class="n">g</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">availability</span><span class="p">(</span><span class="n">macos</span><span class="p">,</span><span class="n">introduced</span><span class="o">=</span><span class="mf">10.5</span><span class="p">)));</span> <span class="c1">// error: mismatch</span>
</pre></div>
</div>
<p>When one method overrides another, the overriding method can be more widely available than the overridden method, e.g.,:</p>
<div class="highlight-objc"><div class="highlight"><pre><span class="k">@interface</span> <span class="nc">A</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">method</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">availability</span><span class="p">(</span><span class="n">macos</span><span class="p">,</span><span class="n">introduced</span><span class="o">=</span><span class="mf">10.4</span><span class="p">)));</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">method2</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">availability</span><span class="p">(</span><span class="n">macos</span><span class="p">,</span><span class="n">introduced</span><span class="o">=</span><span class="mf">10.4</span><span class="p">)));</span>
<span class="k">@end</span>

<span class="k">@interface</span> <span class="nc">B</span> : <span class="nc">A</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">method</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">availability</span><span class="p">(</span><span class="n">macos</span><span class="p">,</span><span class="n">introduced</span><span class="o">=</span><span class="mf">10.3</span><span class="p">)));</span> <span class="c1">// okay: method moved into base class later</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">method</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">availability</span><span class="p">(</span><span class="n">macos</span><span class="p">,</span><span class="n">introduced</span><span class="o">=</span><span class="mf">10.5</span><span class="p">)));</span> <span class="c1">// error: this method was available via the base class in 10.4</span>
<span class="k">@end</span>
</pre></div>
</div>
<p>Starting with the macOS 10.12 SDK, the <tt class="docutils literal"><span class="pre">API_AVAILABLE</span></tt> macro from
<tt class="docutils literal"><span class="pre">&lt;os/availability.h&gt;</span></tt> can simplify the spelling:</p>
<div class="highlight-objc"><div class="highlight"><pre><span class="k">@interface</span> <span class="nc">A</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">method</span> <span class="n">API_AVAILABLE</span><span class="p">(</span><span class="n">macos</span><span class="p">(</span><span class="mf">10.11</span><span class="p">)));</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">otherMethod</span> <span class="n">API_AVAILABLE</span><span class="p">(</span><span class="n">macos</span><span class="p">(</span><span class="mf">10.11</span><span class="p">),</span> <span class="n">ios</span><span class="p">(</span><span class="mf">11.0</span><span class="p">));</span>
<span class="k">@end</span>
</pre></div>
</div>
<p>Also see the documentation for <a class="reference external" href="http://clang.llvm.org/docs/LanguageExtensions.html#objective-c-available">&#64;available</a></p>
</div>
<div class="section" id="carries-dependency">
<h3><a class="toc-backref" href="#id28">carries_dependency</a><a class="headerlink" href="#carries-dependency" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">carries_dependency</span></tt></td>
<td><tt class="docutils literal"><span class="pre">carries_dependency</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">carries_dependency</span></tt> attribute specifies dependency propagation into and
out of functions.</p>
<p>When specified on a function or Objective-C method, the <tt class="docutils literal"><span class="pre">carries_dependency</span></tt>
attribute means that the return value carries a dependency out of the function,
so that the implementation need not constrain ordering upon return from that
function. Implementations of the function and its caller may choose to preserve
dependencies instead of emitting memory ordering instructions such as fences.</p>
<p>Note, this attribute does not change the meaning of the program, but may result
in generation of more efficient code.</p>
</div>
<div class="section" id="cf-consumed">
<h3><a class="toc-backref" href="#id29">cf_consumed</a><a class="headerlink" href="#cf-consumed" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">cf_consumed</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::cf_consumed</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::cf_consumed</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The behavior of a function with respect to reference counting for Foundation
(Objective-C), CoreFoundation (C) and OSObject (C++) is determined by a naming
convention (e.g. functions starting with &#8220;get&#8221; are assumed to return at
<tt class="docutils literal"><span class="pre">+0</span></tt>).</p>
<p>It can be overriden using a family of the following attributes.  In
Objective-C, the annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_returns_retained))</span></tt> applied to
a function communicates that the object is returned at <tt class="docutils literal"><span class="pre">+1</span></tt>, and the caller
is responsible for freeing it.
Similiarly, the annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_returns_not_retained))</span></tt>
specifies that the object is returned at <tt class="docutils literal"><span class="pre">+0</span></tt> and the ownership remains with
the callee.
The annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_consumes_self))</span></tt> specifies that
the Objective-C method call consumes the reference to <tt class="docutils literal"><span class="pre">self</span></tt>, e.g. by
attaching it to a supplied parameter.
Additionally, parameters can have an annotation
<tt class="docutils literal"><span class="pre">__attribute__((ns_consumed))</span></tt>, which specifies that passing an owned object
as that parameter effectively transfers the ownership, and the caller is no
longer responsible for it.
These attributes affect code generation when interacting with ARC code, and
they are used by the Clang Static Analyzer.</p>
<p>In C programs using CoreFoundation, a similar set of attributes:
<tt class="docutils literal"><span class="pre">__attribute__((cf_returns_not_retained))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((cf_returns_retained))</span></tt> and <tt class="docutils literal"><span class="pre">__attribute__((cf_consumed))</span></tt>
have the same respective semantics when applied to CoreFoundation objects.
These attributes affect code generation when interacting with ARC code, and
they are used by the Clang Static Analyzer.</p>
<p>Finally, in C++ interacting with XNU kernel (objects inheriting from OSObject),
the same attribute family is present:
<tt class="docutils literal"><span class="pre">__attribute__((os_returns_not_retained))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained))</span></tt> and <tt class="docutils literal"><span class="pre">__attribute__((os_consumed))</span></tt>,
with the same respective semantics.
Similar to <tt class="docutils literal"><span class="pre">__attribute__((ns_consumes_self))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((os_consumes_this))</span></tt> specifies that the method call consumes
the reference to &#8220;this&#8221; (e.g., when attaching it to a different object supplied
as a parameter).
Out parameters (parameters the function is meant to write into,
either via pointers-to-pointers or references-to-pointers)
may be annotated with <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained))</span></tt>
or <tt class="docutils literal"><span class="pre">__attribute__((os_returns_not_retained))</span></tt> which specifies that the object
written into the out parameter should (or respectively should not) be released
after use.
Since often out parameters may or may not be written depending on the exit
code of the function,
annotations <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained_on_zero))</span></tt>
and <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained_on_non_zero))</span></tt> specify that
an out parameter at <tt class="docutils literal"><span class="pre">+1</span></tt> is written if and only if the function returns a zero
(respectively non-zero) error code.
Observe that return-code-dependent out parameter annotations are only
available for retained out parameters, as non-retained object do not have to be
released by the callee.
These attributes are only used by the Clang Static Analyzer.</p>
<p>The family of attributes <tt class="docutils literal"><span class="pre">X_returns_X_retained</span></tt> can be added to functions,
C++ methods, and Objective-C methods and properties.
Attributes <tt class="docutils literal"><span class="pre">X_consumed</span></tt> can be added to parameters of methods, functions,
and Objective-C methods.</p>
</div>
<div class="section" id="cf-returns-not-retained">
<h3><a class="toc-backref" href="#id30">cf_returns_not_retained</a><a class="headerlink" href="#cf-returns-not-retained" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">cf_returns_not_retained</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::cf_returns_not_retained</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::cf_returns_not_retained</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The behavior of a function with respect to reference counting for Foundation
(Objective-C), CoreFoundation (C) and OSObject (C++) is determined by a naming
convention (e.g. functions starting with &#8220;get&#8221; are assumed to return at
<tt class="docutils literal"><span class="pre">+0</span></tt>).</p>
<p>It can be overriden using a family of the following attributes.  In
Objective-C, the annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_returns_retained))</span></tt> applied to
a function communicates that the object is returned at <tt class="docutils literal"><span class="pre">+1</span></tt>, and the caller
is responsible for freeing it.
Similiarly, the annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_returns_not_retained))</span></tt>
specifies that the object is returned at <tt class="docutils literal"><span class="pre">+0</span></tt> and the ownership remains with
the callee.
The annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_consumes_self))</span></tt> specifies that
the Objective-C method call consumes the reference to <tt class="docutils literal"><span class="pre">self</span></tt>, e.g. by
attaching it to a supplied parameter.
Additionally, parameters can have an annotation
<tt class="docutils literal"><span class="pre">__attribute__((ns_consumed))</span></tt>, which specifies that passing an owned object
as that parameter effectively transfers the ownership, and the caller is no
longer responsible for it.
These attributes affect code generation when interacting with ARC code, and
they are used by the Clang Static Analyzer.</p>
<p>In C programs using CoreFoundation, a similar set of attributes:
<tt class="docutils literal"><span class="pre">__attribute__((cf_returns_not_retained))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((cf_returns_retained))</span></tt> and <tt class="docutils literal"><span class="pre">__attribute__((cf_consumed))</span></tt>
have the same respective semantics when applied to CoreFoundation objects.
These attributes affect code generation when interacting with ARC code, and
they are used by the Clang Static Analyzer.</p>
<p>Finally, in C++ interacting with XNU kernel (objects inheriting from OSObject),
the same attribute family is present:
<tt class="docutils literal"><span class="pre">__attribute__((os_returns_not_retained))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained))</span></tt> and <tt class="docutils literal"><span class="pre">__attribute__((os_consumed))</span></tt>,
with the same respective semantics.
Similar to <tt class="docutils literal"><span class="pre">__attribute__((ns_consumes_self))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((os_consumes_this))</span></tt> specifies that the method call consumes
the reference to &#8220;this&#8221; (e.g., when attaching it to a different object supplied
as a parameter).
Out parameters (parameters the function is meant to write into,
either via pointers-to-pointers or references-to-pointers)
may be annotated with <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained))</span></tt>
or <tt class="docutils literal"><span class="pre">__attribute__((os_returns_not_retained))</span></tt> which specifies that the object
written into the out parameter should (or respectively should not) be released
after use.
Since often out parameters may or may not be written depending on the exit
code of the function,
annotations <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained_on_zero))</span></tt>
and <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained_on_non_zero))</span></tt> specify that
an out parameter at <tt class="docutils literal"><span class="pre">+1</span></tt> is written if and only if the function returns a zero
(respectively non-zero) error code.
Observe that return-code-dependent out parameter annotations are only
available for retained out parameters, as non-retained object do not have to be
released by the callee.
These attributes are only used by the Clang Static Analyzer.</p>
<p>The family of attributes <tt class="docutils literal"><span class="pre">X_returns_X_retained</span></tt> can be added to functions,
C++ methods, and Objective-C methods and properties.
Attributes <tt class="docutils literal"><span class="pre">X_consumed</span></tt> can be added to parameters of methods, functions,
and Objective-C methods.</p>
</div>
<div class="section" id="cf-returns-retained">
<h3><a class="toc-backref" href="#id31">cf_returns_retained</a><a class="headerlink" href="#cf-returns-retained" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">cf_returns_retained</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::cf_returns_retained</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::cf_returns_retained</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The behavior of a function with respect to reference counting for Foundation
(Objective-C), CoreFoundation (C) and OSObject (C++) is determined by a naming
convention (e.g. functions starting with &#8220;get&#8221; are assumed to return at
<tt class="docutils literal"><span class="pre">+0</span></tt>).</p>
<p>It can be overriden using a family of the following attributes.  In
Objective-C, the annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_returns_retained))</span></tt> applied to
a function communicates that the object is returned at <tt class="docutils literal"><span class="pre">+1</span></tt>, and the caller
is responsible for freeing it.
Similiarly, the annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_returns_not_retained))</span></tt>
specifies that the object is returned at <tt class="docutils literal"><span class="pre">+0</span></tt> and the ownership remains with
the callee.
The annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_consumes_self))</span></tt> specifies that
the Objective-C method call consumes the reference to <tt class="docutils literal"><span class="pre">self</span></tt>, e.g. by
attaching it to a supplied parameter.
Additionally, parameters can have an annotation
<tt class="docutils literal"><span class="pre">__attribute__((ns_consumed))</span></tt>, which specifies that passing an owned object
as that parameter effectively transfers the ownership, and the caller is no
longer responsible for it.
These attributes affect code generation when interacting with ARC code, and
they are used by the Clang Static Analyzer.</p>
<p>In C programs using CoreFoundation, a similar set of attributes:
<tt class="docutils literal"><span class="pre">__attribute__((cf_returns_not_retained))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((cf_returns_retained))</span></tt> and <tt class="docutils literal"><span class="pre">__attribute__((cf_consumed))</span></tt>
have the same respective semantics when applied to CoreFoundation objects.
These attributes affect code generation when interacting with ARC code, and
they are used by the Clang Static Analyzer.</p>
<p>Finally, in C++ interacting with XNU kernel (objects inheriting from OSObject),
the same attribute family is present:
<tt class="docutils literal"><span class="pre">__attribute__((os_returns_not_retained))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained))</span></tt> and <tt class="docutils literal"><span class="pre">__attribute__((os_consumed))</span></tt>,
with the same respective semantics.
Similar to <tt class="docutils literal"><span class="pre">__attribute__((ns_consumes_self))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((os_consumes_this))</span></tt> specifies that the method call consumes
the reference to &#8220;this&#8221; (e.g., when attaching it to a different object supplied
as a parameter).
Out parameters (parameters the function is meant to write into,
either via pointers-to-pointers or references-to-pointers)
may be annotated with <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained))</span></tt>
or <tt class="docutils literal"><span class="pre">__attribute__((os_returns_not_retained))</span></tt> which specifies that the object
written into the out parameter should (or respectively should not) be released
after use.
Since often out parameters may or may not be written depending on the exit
code of the function,
annotations <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained_on_zero))</span></tt>
and <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained_on_non_zero))</span></tt> specify that
an out parameter at <tt class="docutils literal"><span class="pre">+1</span></tt> is written if and only if the function returns a zero
(respectively non-zero) error code.
Observe that return-code-dependent out parameter annotations are only
available for retained out parameters, as non-retained object do not have to be
released by the callee.
These attributes are only used by the Clang Static Analyzer.</p>
<p>The family of attributes <tt class="docutils literal"><span class="pre">X_returns_X_retained</span></tt> can be added to functions,
C++ methods, and Objective-C methods and properties.
Attributes <tt class="docutils literal"><span class="pre">X_consumed</span></tt> can be added to parameters of methods, functions,
and Objective-C methods.</p>
</div>
<div class="section" id="code-seg">
<h3><a class="toc-backref" href="#id32">code_seg</a><a class="headerlink" href="#code-seg" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">code_seg</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">__declspec(code_seg)</span></tt> attribute enables the placement of code into separate
named segments that can be paged or locked in memory individually. This attribute
is used to control the placement of instantiated templates and compiler-generated
code. See the documentation for <a class="reference external" href="http://msdn.microsoft.com/en-us/library/dn636922.aspx">__declspec(code_seg)</a> on MSDN.</p>
</div>
<div class="section" id="convergent">
<h3><a class="toc-backref" href="#id33">convergent</a><a class="headerlink" href="#convergent" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">convergent</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::convergent</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::convergent</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">convergent</span></tt> attribute can be placed on a function declaration. It is
translated into the LLVM <tt class="docutils literal"><span class="pre">convergent</span></tt> attribute, which indicates that the call
instructions of a function with this attribute cannot be made control-dependent
on any additional values.</p>
<p>In languages designed for SPMD/SIMT programming model, e.g. OpenCL or CUDA,
the call instructions of a function with this attribute must be executed by
all work items or threads in a work group or sub group.</p>
<p>This attribute is different from <tt class="docutils literal"><span class="pre">noduplicate</span></tt> because it allows duplicating
function calls if it can be proved that the duplicated function calls are
not made control-dependent on any additional values, e.g., unrolling a loop
executed by all work items.</p>
<p>Sample usage:
.. code-block:: c</p>
<blockquote>
<div>void convfunc(void) __attribute__((convergent));
// Setting it as a C++11 attribute is also valid in a C++ program.
// void convfunc(void) [[clang::convergent]];</div></blockquote>
</div>
<div class="section" id="cpu-dispatch">
<h3><a class="toc-backref" href="#id34">cpu_dispatch</a><a class="headerlink" href="#cpu-dispatch" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">cpu_dispatch</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::cpu_dispatch</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::cpu_dispatch</span></tt></td>
<td><tt class="docutils literal"><span class="pre">cpu_dispatch</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">cpu_specific</span></tt> and <tt class="docutils literal"><span class="pre">cpu_dispatch</span></tt> attributes are used to define and
resolve multiversioned functions. This form of multiversioning provides a
mechanism for declaring versions across translation units and manually
specifying the resolved function list. A specified CPU defines a set of minimum
features that are required for the function to be called. The result of this is
that future processors execute the most restrictive version of the function the
new processor can execute.</p>
<p>Function versions are defined with <tt class="docutils literal"><span class="pre">cpu_specific</span></tt>, which takes one or more CPU
names as a parameter. For example:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="c1">// Declares and defines the ivybridge version of single_cpu.</span>
<span class="n">__attribute__</span><span class="p">((</span><span class="n">cpu_specific</span><span class="p">(</span><span class="n">ivybridge</span><span class="p">)))</span>
<span class="kt">void</span> <span class="n">single_cpu</span><span class="p">(</span><span class="kt">void</span><span class="p">){}</span>

<span class="c1">// Declares and defines the atom version of single_cpu.</span>
<span class="n">__attribute__</span><span class="p">((</span><span class="n">cpu_specific</span><span class="p">(</span><span class="n">atom</span><span class="p">)))</span>
<span class="kt">void</span> <span class="n">single_cpu</span><span class="p">(</span><span class="kt">void</span><span class="p">){}</span>

<span class="c1">// Declares and defines both the ivybridge and atom version of multi_cpu.</span>
<span class="n">__attribute__</span><span class="p">((</span><span class="n">cpu_specific</span><span class="p">(</span><span class="n">ivybridge</span><span class="p">,</span> <span class="n">atom</span><span class="p">)))</span>
<span class="kt">void</span> <span class="n">multi_cpu</span><span class="p">(</span><span class="kt">void</span><span class="p">){}</span>
</pre></div>
</div>
<p>A dispatching (or resolving) function can be declared anywhere in a project&#8217;s
source code with <tt class="docutils literal"><span class="pre">cpu_dispatch</span></tt>. This attribute takes one or more CPU names
as a parameter (like <tt class="docutils literal"><span class="pre">cpu_specific</span></tt>). Functions marked with <tt class="docutils literal"><span class="pre">cpu_dispatch</span></tt>
are not expected to be defined, only declared. If such a marked function has a
definition, any side effects of the function are ignored; trivial function
bodies are permissible for ICC compatibility.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="c1">// Creates a resolver for single_cpu above.</span>
<span class="n">__attribute__</span><span class="p">((</span><span class="n">cpu_dispatch</span><span class="p">(</span><span class="n">ivybridge</span><span class="p">,</span> <span class="n">atom</span><span class="p">)))</span>
<span class="kt">void</span> <span class="n">single_cpu</span><span class="p">(</span><span class="kt">void</span><span class="p">){}</span>

<span class="c1">// Creates a resolver for multi_cpu, but adds a 3rd version defined in another</span>
<span class="c1">// translation unit.</span>
<span class="n">__attribute__</span><span class="p">((</span><span class="n">cpu_dispatch</span><span class="p">(</span><span class="n">ivybridge</span><span class="p">,</span> <span class="n">atom</span><span class="p">,</span> <span class="n">sandybridge</span><span class="p">)))</span>
<span class="kt">void</span> <span class="n">multi_cpu</span><span class="p">(</span><span class="kt">void</span><span class="p">){}</span>
</pre></div>
</div>
<p>Note that it is possible to have a resolving function that dispatches based on
more or fewer options than are present in the program. Specifying fewer will
result in the omitted options not being considered during resolution. Specifying
a version for resolution that isn&#8217;t defined in the program will result in a
linking failure.</p>
<p>It is also possible to specify a CPU name of <tt class="docutils literal"><span class="pre">generic</span></tt> which will be resolved
if the executing processor doesn&#8217;t satisfy the features required in the CPU
name. The behavior of a program executing on a processor that doesn&#8217;t satisfy
any option of a multiversioned function is undefined.</p>
</div>
<div class="section" id="cpu-specific">
<h3><a class="toc-backref" href="#id35">cpu_specific</a><a class="headerlink" href="#cpu-specific" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">cpu_specific</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::cpu_specific</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::cpu_specific</span></tt></td>
<td><tt class="docutils literal"><span class="pre">cpu_specific</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">cpu_specific</span></tt> and <tt class="docutils literal"><span class="pre">cpu_dispatch</span></tt> attributes are used to define and
resolve multiversioned functions. This form of multiversioning provides a
mechanism for declaring versions across translation units and manually
specifying the resolved function list. A specified CPU defines a set of minimum
features that are required for the function to be called. The result of this is
that future processors execute the most restrictive version of the function the
new processor can execute.</p>
<p>Function versions are defined with <tt class="docutils literal"><span class="pre">cpu_specific</span></tt>, which takes one or more CPU
names as a parameter. For example:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="c1">// Declares and defines the ivybridge version of single_cpu.</span>
<span class="n">__attribute__</span><span class="p">((</span><span class="n">cpu_specific</span><span class="p">(</span><span class="n">ivybridge</span><span class="p">)))</span>
<span class="kt">void</span> <span class="n">single_cpu</span><span class="p">(</span><span class="kt">void</span><span class="p">){}</span>

<span class="c1">// Declares and defines the atom version of single_cpu.</span>
<span class="n">__attribute__</span><span class="p">((</span><span class="n">cpu_specific</span><span class="p">(</span><span class="n">atom</span><span class="p">)))</span>
<span class="kt">void</span> <span class="n">single_cpu</span><span class="p">(</span><span class="kt">void</span><span class="p">){}</span>

<span class="c1">// Declares and defines both the ivybridge and atom version of multi_cpu.</span>
<span class="n">__attribute__</span><span class="p">((</span><span class="n">cpu_specific</span><span class="p">(</span><span class="n">ivybridge</span><span class="p">,</span> <span class="n">atom</span><span class="p">)))</span>
<span class="kt">void</span> <span class="n">multi_cpu</span><span class="p">(</span><span class="kt">void</span><span class="p">){}</span>
</pre></div>
</div>
<p>A dispatching (or resolving) function can be declared anywhere in a project&#8217;s
source code with <tt class="docutils literal"><span class="pre">cpu_dispatch</span></tt>. This attribute takes one or more CPU names
as a parameter (like <tt class="docutils literal"><span class="pre">cpu_specific</span></tt>). Functions marked with <tt class="docutils literal"><span class="pre">cpu_dispatch</span></tt>
are not expected to be defined, only declared. If such a marked function has a
definition, any side effects of the function are ignored; trivial function
bodies are permissible for ICC compatibility.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="c1">// Creates a resolver for single_cpu above.</span>
<span class="n">__attribute__</span><span class="p">((</span><span class="n">cpu_dispatch</span><span class="p">(</span><span class="n">ivybridge</span><span class="p">,</span> <span class="n">atom</span><span class="p">)))</span>
<span class="kt">void</span> <span class="n">single_cpu</span><span class="p">(</span><span class="kt">void</span><span class="p">){}</span>

<span class="c1">// Creates a resolver for multi_cpu, but adds a 3rd version defined in another</span>
<span class="c1">// translation unit.</span>
<span class="n">__attribute__</span><span class="p">((</span><span class="n">cpu_dispatch</span><span class="p">(</span><span class="n">ivybridge</span><span class="p">,</span> <span class="n">atom</span><span class="p">,</span> <span class="n">sandybridge</span><span class="p">)))</span>
<span class="kt">void</span> <span class="n">multi_cpu</span><span class="p">(</span><span class="kt">void</span><span class="p">){}</span>
</pre></div>
</div>
<p>Note that it is possible to have a resolving function that dispatches based on
more or fewer options than are present in the program. Specifying fewer will
result in the omitted options not being considered during resolution. Specifying
a version for resolution that isn&#8217;t defined in the program will result in a
linking failure.</p>
<p>It is also possible to specify a CPU name of <tt class="docutils literal"><span class="pre">generic</span></tt> which will be resolved
if the executing processor doesn&#8217;t satisfy the features required in the CPU
name. The behavior of a program executing on a processor that doesn&#8217;t satisfy
any option of a multiversioned function is undefined.</p>
</div>
<div class="section" id="deprecated">
<h3><a class="toc-backref" href="#id36">deprecated</a><a class="headerlink" href="#deprecated" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">deprecated</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::deprecated</span></tt> <br/> <tt class="docutils literal"><span class="pre">deprecated</span></tt></td>
<td><tt class="docutils literal"><span class="pre">deprecated</span></tt></td>
<td><tt class="docutils literal"><span class="pre">deprecated</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">deprecated</span></tt> attribute can be applied to a function, a variable, or a
type. This is useful when identifying functions, variables, or types that are
expected to be removed in a future version of a program.</p>
<p>Consider the function declaration for a hypothetical function <tt class="docutils literal"><span class="pre">f</span></tt>:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">void</span> <span class="n">f</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">deprecated</span><span class="p">(</span><span class="s">&quot;message&quot;</span><span class="p">,</span> <span class="s">&quot;replacement&quot;</span><span class="p">)));</span>
</pre></div>
</div>
<p>When spelled as <cite>__attribute__((deprecated))</cite>, the deprecated attribute can have
two optional string arguments. The first one is the message to display when
emitting the warning; the second one enables the compiler to provide a Fix-It
to replace the deprecated name with a new name. Otherwise, when spelled as
<cite>[[gnu::deprecated]] or [[deprecated]]</cite>, the attribute can have one optional
string argument which is the message to display when emitting the warning.</p>
</div>
<div class="section" id="diagnose-if">
<h3><a class="toc-backref" href="#id37">diagnose_if</a><a class="headerlink" href="#diagnose-if" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">diagnose_if</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">diagnose_if</span></tt> attribute can be placed on function declarations to emit
warnings or errors at compile-time if calls to the attributed function meet
certain user-defined criteria. For example:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="kt">int</span> <span class="n">abs</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">)</span>
  <span class="n">__attribute__</span><span class="p">((</span><span class="n">diagnose_if</span><span class="p">(</span><span class="n">a</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&quot;Redundant abs call&quot;</span><span class="p">,</span> <span class="s">&quot;warning&quot;</span><span class="p">)));</span>
<span class="kt">int</span> <span class="n">must_abs</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">)</span>
  <span class="n">__attribute__</span><span class="p">((</span><span class="n">diagnose_if</span><span class="p">(</span><span class="n">a</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&quot;Redundant abs call&quot;</span><span class="p">,</span> <span class="s">&quot;error&quot;</span><span class="p">)));</span>

<span class="kt">int</span> <span class="n">val</span> <span class="o">=</span> <span class="n">abs</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// warning: Redundant abs call</span>
<span class="kt">int</span> <span class="n">val2</span> <span class="o">=</span> <span class="n">must_abs</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// error: Redundant abs call</span>
<span class="kt">int</span> <span class="n">val3</span> <span class="o">=</span> <span class="n">abs</span><span class="p">(</span><span class="n">val</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">val4</span> <span class="o">=</span> <span class="n">must_abs</span><span class="p">(</span><span class="n">val</span><span class="p">);</span> <span class="c1">// Because run-time checks are not emitted for</span>
                          <span class="c1">// diagnose_if attributes, this executes without</span>
                          <span class="c1">// issue.</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">diagnose_if</span></tt> is closely related to <tt class="docutils literal"><span class="pre">enable_if</span></tt>, with a few key differences:</p>
<ul class="simple">
<li>Overload resolution is not aware of <tt class="docutils literal"><span class="pre">diagnose_if</span></tt> attributes: they&#8217;re
considered only after we select the best candidate from a given candidate set.</li>
<li>Function declarations that differ only in their <tt class="docutils literal"><span class="pre">diagnose_if</span></tt> attributes are
considered to be redeclarations of the same function (not overloads).</li>
<li>If the condition provided to <tt class="docutils literal"><span class="pre">diagnose_if</span></tt> cannot be evaluated, no
diagnostic will be emitted.</li>
</ul>
<p>Otherwise, <tt class="docutils literal"><span class="pre">diagnose_if</span></tt> is essentially the logical negation of <tt class="docutils literal"><span class="pre">enable_if</span></tt>.</p>
<p>As a result of bullet number two, <tt class="docutils literal"><span class="pre">diagnose_if</span></tt> attributes will stack on the
same function. For example:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="kt">int</span> <span class="n">foo</span><span class="p">()</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">diagnose_if</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;diag1&quot;</span><span class="p">,</span> <span class="s">&quot;warning&quot;</span><span class="p">)));</span>
<span class="kt">int</span> <span class="n">foo</span><span class="p">()</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">diagnose_if</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;diag2&quot;</span><span class="p">,</span> <span class="s">&quot;warning&quot;</span><span class="p">)));</span>

<span class="kt">int</span> <span class="n">bar</span> <span class="o">=</span> <span class="n">foo</span><span class="p">();</span> <span class="c1">// warning: diag1</span>
                 <span class="c1">// warning: diag2</span>
<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">fooptr</span><span class="p">)(</span><span class="kt">void</span><span class="p">)</span> <span class="o">=</span> <span class="n">foo</span><span class="p">;</span> <span class="c1">// warning: diag1</span>
                           <span class="c1">// warning: diag2</span>

<span class="n">constexpr</span> <span class="kt">int</span> <span class="nf">supportsAPILevel</span><span class="p">(</span><span class="kt">int</span> <span class="n">N</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">N</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="p">}</span>
<span class="kt">int</span> <span class="n">baz</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">)</span>
  <span class="n">__attribute__</span><span class="p">((</span><span class="n">diagnose_if</span><span class="p">(</span><span class="o">!</span><span class="n">supportsAPILevel</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
                             <span class="s">&quot;Upgrade to API level 10 to use baz&quot;</span><span class="p">,</span> <span class="s">&quot;error&quot;</span><span class="p">)));</span>
<span class="kt">int</span> <span class="n">baz</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">)</span>
  <span class="n">__attribute__</span><span class="p">((</span><span class="n">diagnose_if</span><span class="p">(</span><span class="o">!</span><span class="n">a</span><span class="p">,</span> <span class="s">&quot;0 is not recommended.&quot;</span><span class="p">,</span> <span class="s">&quot;warning&quot;</span><span class="p">)));</span>

<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">bazptr</span><span class="p">)(</span><span class="kt">int</span><span class="p">)</span> <span class="o">=</span> <span class="n">baz</span><span class="p">;</span> <span class="c1">// error: Upgrade to API level 10 to use baz</span>
<span class="kt">int</span> <span class="n">v</span> <span class="o">=</span> <span class="n">baz</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="c1">// error: Upgrade to API level 10 to use baz</span>
</pre></div>
</div>
<p>Query for this feature with <tt class="docutils literal"><span class="pre">__has_attribute(diagnose_if)</span></tt>.</p>
</div>
<div class="section" id="disable-tail-calls">
<h3><a class="toc-backref" href="#id38">disable_tail_calls</a><a class="headerlink" href="#disable-tail-calls" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">disable_tail_calls</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::disable_tail_calls</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::disable_tail_calls</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">disable_tail_calls</span></tt> attribute instructs the backend to not perform tail call optimization inside the marked function.</p>
<p>For example:</p>
<blockquote>
<div><div class="highlight-c"><div class="highlight"><pre><span class="kt">int</span> <span class="n">callee</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">foo</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">disable_tail_calls</span><span class="p">))</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">callee</span><span class="p">(</span><span class="n">a</span><span class="p">);</span> <span class="c1">// This call is not tail-call optimized.</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Marking virtual functions as <tt class="docutils literal"><span class="pre">disable_tail_calls</span></tt> is legal.</p>
<blockquote>
<div><div class="highlight-c++"><div class="highlight"><pre><span class="kt">int</span> <span class="n">callee</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>

<span class="k">class</span> <span class="nc">Base</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="p">[[</span><span class="n">clang</span><span class="o">::</span><span class="n">disable_tail_calls</span><span class="p">]]</span> <span class="k">virtual</span> <span class="kt">int</span> <span class="n">foo1</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">callee</span><span class="p">();</span> <span class="c1">// This call is not tail-call optimized.</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Derived1</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Base</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="kt">int</span> <span class="n">foo1</span><span class="p">()</span> <span class="n">override</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">callee</span><span class="p">();</span> <span class="c1">// This call is tail-call optimized.</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="enable-if">
<h3><a class="toc-backref" href="#id39">enable_if</a><a class="headerlink" href="#enable-if" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">enable_if</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Some features of this attribute are experimental. The meaning of
multiple enable_if attributes on a single declaration is subject to change in
a future version of clang. Also, the ABI is not standardized and the name
mangling may change in future versions. To avoid that, use asm labels.</p>
</div>
<p>The <tt class="docutils literal"><span class="pre">enable_if</span></tt> attribute can be placed on function declarations to control
which overload is selected based on the values of the function&#8217;s arguments.
When combined with the <tt class="docutils literal"><span class="pre">overloadable</span></tt> attribute, this feature is also
available in C.</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">int</span> <span class="n">isdigit</span><span class="p">(</span><span class="kt">int</span> <span class="n">c</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">isdigit</span><span class="p">(</span><span class="kt">int</span> <span class="n">c</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">enable_if</span><span class="p">(</span><span class="n">c</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">||</span> <span class="n">c</span> <span class="o">&gt;</span> <span class="mi">255</span><span class="p">,</span> <span class="s">&quot;chosen when &#39;c&#39; is out of range&quot;</span><span class="p">)))</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">unavailable</span><span class="p">(</span><span class="s">&quot;&#39;c&#39; must have the value of an unsigned char or EOF&quot;</span><span class="p">)));</span>

<span class="kt">void</span> <span class="n">foo</span><span class="p">(</span><span class="kt">char</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">isdigit</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
  <span class="n">isdigit</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
  <span class="n">isdigit</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">);</span>  <span class="c1">// results in a compile-time error.</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The enable_if attribute takes two arguments, the first is an expression written
in terms of the function parameters, the second is a string explaining why this
overload candidate could not be selected to be displayed in diagnostics. The
expression is part of the function signature for the purposes of determining
whether it is a redeclaration (following the rules used when determining
whether a C++ template specialization is ODR-equivalent), but is not part of
the type.</p>
<p>The enable_if expression is evaluated as if it were the body of a
bool-returning constexpr function declared with the arguments of the function
it is being applied to, then called with the parameters at the call site. If the
result is false or could not be determined through constant expression
evaluation, then this overload will not be chosen and the provided string may
be used in a diagnostic if the compile fails as a result.</p>
<p>Because the enable_if expression is an unevaluated context, there are no global
state changes, nor the ability to pass information from the enable_if
expression to the function body. For example, suppose we want calls to
strnlen(strbuf, maxlen) to resolve to strnlen_chk(strbuf, maxlen, size of
strbuf) only if the size of strbuf can be determined:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="n">__attribute__</span><span class="p">((</span><span class="n">always_inline</span><span class="p">))</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">size_t</span> <span class="n">strnlen</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">maxlen</span><span class="p">)</span>
  <span class="n">__attribute__</span><span class="p">((</span><span class="n">overloadable</span><span class="p">))</span>
  <span class="n">__attribute__</span><span class="p">((</span><span class="n">enable_if</span><span class="p">(</span><span class="n">__builtin_object_size</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">))),</span>
                           <span class="s">&quot;chosen when the buffer size is known but &#39;maxlen&#39; is not&quot;</span><span class="p">)))</span>
<span class="p">{</span>
  <span class="k">return</span> <span class="n">strnlen_chk</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">maxlen</span><span class="p">,</span> <span class="n">__builtin_object_size</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Multiple enable_if attributes may be applied to a single declaration. In this
case, the enable_if expressions are evaluated from left to right in the
following manner. First, the candidates whose enable_if expressions evaluate to
false or cannot be evaluated are discarded. If the remaining candidates do not
share ODR-equivalent enable_if expressions, the overload resolution is
ambiguous. Otherwise, enable_if overload resolution continues with the next
enable_if attribute on the candidates that have not been discarded and have
remaining enable_if attributes. In this way, we pick the most specific
overload out of a number of viable overloads using enable_if.</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">void</span> <span class="n">f</span><span class="p">()</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">enable_if</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)));</span>  <span class="c1">// #1</span>
<span class="kt">void</span> <span class="n">f</span><span class="p">()</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">enable_if</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)))</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">enable_if</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)));</span>  <span class="c1">// #2</span>

<span class="kt">void</span> <span class="n">g</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">j</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">enable_if</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)));</span>  <span class="c1">// #1</span>
<span class="kt">void</span> <span class="n">g</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">j</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">enable_if</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)))</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">enable_if</span><span class="p">(</span><span class="kc">true</span><span class="p">)));</span>  <span class="c1">// #2</span>
</pre></div>
</div>
<p>In this example, a call to f() is always resolved to #2, as the first enable_if
expression is ODR-equivalent for both declarations, but #1 does not have another
enable_if expression to continue evaluating, so the next round of evaluation has
only a single candidate. In a call to g(1, 1), the call is ambiguous even though
#2 has more enable_if attributes, because the first enable_if expressions are
not ODR-equivalent.</p>
<p>Query for this feature with <tt class="docutils literal"><span class="pre">__has_attribute(enable_if)</span></tt>.</p>
<p>Note that functions with one or more <tt class="docutils literal"><span class="pre">enable_if</span></tt> attributes may not have
their address taken, unless all of the conditions specified by said
<tt class="docutils literal"><span class="pre">enable_if</span></tt> are constants that evaluate to <tt class="docutils literal"><span class="pre">true</span></tt>. For example:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">const</span> <span class="kt">int</span> <span class="n">TrueConstant</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">FalseConstant</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">f</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">enable_if</span><span class="p">(</span><span class="n">a</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)));</span>
<span class="kt">int</span> <span class="n">g</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">enable_if</span><span class="p">(</span><span class="n">a</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">a</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)));</span>
<span class="kt">int</span> <span class="n">h</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">enable_if</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)));</span>
<span class="kt">int</span> <span class="n">i</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">enable_if</span><span class="p">(</span><span class="n">TrueConstant</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)));</span>
<span class="kt">int</span> <span class="n">j</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">enable_if</span><span class="p">(</span><span class="n">FalseConstant</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)));</span>

<span class="kt">void</span> <span class="nf">fn</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">ptr</span><span class="p">)(</span><span class="kt">int</span><span class="p">);</span>
  <span class="n">ptr</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">f</span><span class="p">;</span> <span class="c1">// error: &#39;a &gt; 0&#39; is not always true</span>
  <span class="n">ptr</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">g</span><span class="p">;</span> <span class="c1">// error: &#39;a == 0 || a != 0&#39; is not a truthy constant</span>
  <span class="n">ptr</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">h</span><span class="p">;</span> <span class="c1">// OK: 1 is a truthy constant</span>
  <span class="n">ptr</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">i</span><span class="p">;</span> <span class="c1">// OK: &#39;TrueConstant&#39; is a truthy constant</span>
  <span class="n">ptr</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">j</span><span class="p">;</span> <span class="c1">// error: &#39;FalseConstant&#39; is a constant, but not truthy</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Because <tt class="docutils literal"><span class="pre">enable_if</span></tt> evaluation happens during overload resolution,
<tt class="docutils literal"><span class="pre">enable_if</span></tt> may give unintuitive results when used with templates, depending
on when overloads are resolved. In the example below, clang will emit a
diagnostic about no viable overloads for <tt class="docutils literal"><span class="pre">foo</span></tt> in <tt class="docutils literal"><span class="pre">bar</span></tt>, but not in <tt class="docutils literal"><span class="pre">baz</span></tt>:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">double</span> <span class="n">foo</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">enable_if</span><span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)));</span>
<span class="kt">void</span> <span class="o">*</span><span class="n">foo</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">enable_if</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)));</span>
<span class="k">template</span> <span class="o">&lt;</span><span class="kt">int</span> <span class="n">I</span><span class="o">&gt;</span>
<span class="k">auto</span> <span class="n">bar</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">foo</span><span class="p">(</span><span class="n">I</span><span class="p">);</span> <span class="p">}</span>

<span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="k">auto</span> <span class="n">baz</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">foo</span><span class="p">(</span><span class="n">T</span><span class="o">::</span><span class="n">number</span><span class="p">);</span> <span class="p">}</span>

<span class="k">struct</span> <span class="n">WithNumber</span> <span class="p">{</span> <span class="n">constexpr</span> <span class="k">static</span> <span class="kt">int</span> <span class="n">number</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="p">};</span>
<span class="kt">void</span> <span class="n">callThem</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">bar</span><span class="o">&lt;</span><span class="k">sizeof</span><span class="p">(</span><span class="n">WithNumber</span><span class="p">)</span><span class="o">&gt;</span><span class="p">();</span>
  <span class="n">baz</span><span class="o">&lt;</span><span class="n">WithNumber</span><span class="o">&gt;</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This is because, in <tt class="docutils literal"><span class="pre">bar</span></tt>, <tt class="docutils literal"><span class="pre">foo</span></tt> is resolved prior to template
instantiation, so the value for <tt class="docutils literal"><span class="pre">I</span></tt> isn&#8217;t known (thus, both <tt class="docutils literal"><span class="pre">enable_if</span></tt>
conditions for <tt class="docutils literal"><span class="pre">foo</span></tt> fail). However, in <tt class="docutils literal"><span class="pre">baz</span></tt>, <tt class="docutils literal"><span class="pre">foo</span></tt> is resolved during
template instantiation, so the value for <tt class="docutils literal"><span class="pre">T::number</span></tt> is known.</p>
</div>
<div class="section" id="exclude-from-explicit-instantiation">
<h3><a class="toc-backref" href="#id40">exclude_from_explicit_instantiation</a><a class="headerlink" href="#exclude-from-explicit-instantiation" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">exclude_from_explicit_instantiation</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::exclude_from_explicit_instantiation</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::exclude_from_explicit_instantiation</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">exclude_from_explicit_instantiation</span></tt> attribute opts-out a member of a
class template from being part of explicit template instantiations of that
class template. This means that an explicit instantiation will not instantiate
members of the class template marked with the attribute, but also that code
where an extern template declaration of the enclosing class template is visible
will not take for granted that an external instantiation of the class template
would provide those members (which would otherwise be a link error, since the
explicit instantiation won&#8217;t provide those members). For example, let&#8217;s say we
don&#8217;t want the <tt class="docutils literal"><span class="pre">data()</span></tt> method to be part of libc++&#8217;s ABI. To make sure it
is not exported from the dylib, we give it hidden visibility:</p>
<blockquote>
<div><div class="highlight-c++"><div class="highlight"><pre><span class="c1">// in &lt;string&gt;</span>
<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">CharT</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">basic_string</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="n">__attribute__</span><span class="p">((</span><span class="n">__visibility__</span><span class="p">(</span><span class="s">&quot;hidden&quot;</span><span class="p">)))</span>
  <span class="k">const</span> <span class="n">value_type</span><span class="o">*</span> <span class="n">data</span><span class="p">()</span> <span class="k">const</span> <span class="n">noexcept</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">template</span> <span class="k">class</span> <span class="nc">basic_string</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>Since an explicit template instantiation declaration for <tt class="docutils literal"><span class="pre">basic_string&lt;char&gt;</span></tt>
is provided, the compiler is free to assume that <tt class="docutils literal"><span class="pre">basic_string&lt;char&gt;::data()</span></tt>
will be provided by another translation unit, and it is free to produce an
external call to this function. However, since <tt class="docutils literal"><span class="pre">data()</span></tt> has hidden visibility
and the explicit template instantiation is provided in a shared library (as
opposed to simply another translation unit), <tt class="docutils literal"><span class="pre">basic_string&lt;char&gt;::data()</span></tt>
won&#8217;t be found and a link error will ensue. This happens because the compiler
assumes that <tt class="docutils literal"><span class="pre">basic_string&lt;char&gt;::data()</span></tt> is part of the explicit template
instantiation declaration, when it really isn&#8217;t. To tell the compiler that
<tt class="docutils literal"><span class="pre">data()</span></tt> is not part of the explicit template instantiation declaration, the
<tt class="docutils literal"><span class="pre">exclude_from_explicit_instantiation</span></tt> attribute can be used:</p>
<blockquote>
<div><div class="highlight-c++"><div class="highlight"><pre><span class="c1">// in &lt;string&gt;</span>
<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">CharT</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">basic_string</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="n">__attribute__</span><span class="p">((</span><span class="n">__visibility__</span><span class="p">(</span><span class="s">&quot;hidden&quot;</span><span class="p">)))</span>
  <span class="n">__attribute__</span><span class="p">((</span><span class="n">exclude_from_explicit_instantiation</span><span class="p">))</span>
  <span class="k">const</span> <span class="n">value_type</span><span class="o">*</span> <span class="n">data</span><span class="p">()</span> <span class="k">const</span> <span class="n">noexcept</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">template</span> <span class="k">class</span> <span class="nc">basic_string</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>Now, the compiler won&#8217;t assume that <tt class="docutils literal"><span class="pre">basic_string&lt;char&gt;::data()</span></tt> is provided
externally despite there being an explicit template instantiation declaration:
the compiler will implicitly instantiate <tt class="docutils literal"><span class="pre">basic_string&lt;char&gt;::data()</span></tt> in the
TUs where it is used.</p>
<p>This attribute can be used on static and non-static member functions of class
templates, static data members of class templates and member classes of class
templates.</p>
</div>
<div class="section" id="external-source-symbol">
<h3><a class="toc-backref" href="#id41">external_source_symbol</a><a class="headerlink" href="#external-source-symbol" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">external_source_symbol</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::external_source_symbol</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::external_source_symbol</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">external_source_symbol</span></tt> attribute specifies that a declaration originates
from an external source and describes the nature of that source.</p>
<p>The fact that Clang is capable of recognizing declarations that were defined
externally can be used to provide better tooling support for mixed-language
projects or projects that rely on auto-generated code. For instance, an IDE that
uses Clang and that supports mixed-language projects can use this attribute to
provide a correct &#8216;jump-to-definition&#8217; feature. For a concrete example,
consider a protocol that&#8217;s defined in a Swift file:</p>
<div class="highlight-swift"><pre>@objc public protocol SwiftProtocol {
  func method()
}</pre>
</div>
<p>This protocol can be used from Objective-C code by including a header file that
was generated by the Swift compiler. The declarations in that header can use
the <tt class="docutils literal"><span class="pre">external_source_symbol</span></tt> attribute to make Clang aware of the fact
that <tt class="docutils literal"><span class="pre">SwiftProtocol</span></tt> actually originates from a Swift module:</p>
<div class="highlight-objc"><pre>__attribute__((external_source_symbol(language="Swift",defined_in="module")))
@protocol SwiftProtocol
@required
- (void) method;
@end</pre>
</div>
<p>Consequently, when &#8216;jump-to-definition&#8217; is performed at a location that
references <tt class="docutils literal"><span class="pre">SwiftProtocol</span></tt>, the IDE can jump to the original definition in
the Swift source file rather than jumping to the Objective-C declaration in the
auto-generated header file.</p>
<p>The <tt class="docutils literal"><span class="pre">external_source_symbol</span></tt> attribute is a comma-separated list that includes
clauses that describe the origin and the nature of the particular declaration.
Those clauses can be:</p>
<dl class="docutils">
<dt>language=<em>string-literal</em></dt>
<dd>The name of the source language in which this declaration was defined.</dd>
<dt>defined_in=<em>string-literal</em></dt>
<dd>The name of the source container in which the declaration was defined. The
exact definition of source container is language-specific, e.g. Swift&#8217;s
source containers are modules, so <tt class="docutils literal"><span class="pre">defined_in</span></tt> should specify the Swift
module name.</dd>
<dt>generated_declaration</dt>
<dd>This declaration was automatically generated by some tool.</dd>
</dl>
<p>The clauses can be specified in any order. The clauses that are listed above are
all optional, but the attribute has to have at least one clause.</p>
</div>
<div class="section" id="flatten">
<h3><a class="toc-backref" href="#id42">flatten</a><a class="headerlink" href="#flatten" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">flatten</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::flatten</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">flatten</span></tt> attribute causes calls within the attributed function to
be inlined unless it is impossible to do so, for example if the body of the
callee is unavailable or if the callee has the <tt class="docutils literal"><span class="pre">noinline</span></tt> attribute.</p>
</div>
<div class="section" id="force-align-arg-pointer">
<h3><a class="toc-backref" href="#id43">force_align_arg_pointer</a><a class="headerlink" href="#force-align-arg-pointer" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">force_align_arg_pointer</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::force_align_arg_pointer</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>Use this attribute to force stack alignment.</p>
<p>Legacy x86 code uses 4-byte stack alignment. Newer aligned SSE instructions
(like &#8216;movaps&#8217;) that work with the stack require operands to be 16-byte aligned.
This attribute realigns the stack in the function prologue to make sure the
stack can be used with SSE instructions.</p>
<p>Note that the x86_64 ABI forces 16-byte stack alignment at the call site.
Because of this, &#8216;force_align_arg_pointer&#8217; is not needed on x86_64, except in
rare cases where the caller does not align the stack properly (e.g. flow
jumps from i386 arch code).</p>
<blockquote>
<div><div class="highlight-c"><div class="highlight"><pre><span class="n">__attribute__</span> <span class="p">((</span><span class="n">force_align_arg_pointer</span><span class="p">))</span>
<span class="kt">void</span> <span class="n">f</span> <span class="p">()</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="format">
<h3><a class="toc-backref" href="#id44">format</a><a class="headerlink" href="#format" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">format</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::format</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>Clang supports the <tt class="docutils literal"><span class="pre">format</span></tt> attribute, which indicates that the function
accepts a <tt class="docutils literal"><span class="pre">printf</span></tt> or <tt class="docutils literal"><span class="pre">scanf</span></tt>-like format string and corresponding
arguments or a <tt class="docutils literal"><span class="pre">va_list</span></tt> that contains these arguments.</p>
<p>Please see <a class="reference external" href="http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html">GCC documentation about format attribute</a> to find details
about attribute syntax.</p>
<p>Clang implements two kinds of checks with this attribute.</p>
<ol class="arabic">
<li><p class="first">Clang checks that the function with the <tt class="docutils literal"><span class="pre">format</span></tt> attribute is called with
a format string that uses format specifiers that are allowed, and that
arguments match the format string.  This is the <tt class="docutils literal"><span class="pre">-Wformat</span></tt> warning, it is
on by default.</p>
</li>
<li><p class="first">Clang checks that the format string argument is a literal string.  This is
the <tt class="docutils literal"><span class="pre">-Wformat-nonliteral</span></tt> warning, it is off by default.</p>
<p>Clang implements this mostly the same way as GCC, but there is a difference
for functions that accept a <tt class="docutils literal"><span class="pre">va_list</span></tt> argument (for example, <tt class="docutils literal"><span class="pre">vprintf</span></tt>).
GCC does not emit <tt class="docutils literal"><span class="pre">-Wformat-nonliteral</span></tt> warning for calls to such
functions.  Clang does not warn if the format string comes from a function
parameter, where the function is annotated with a compatible attribute,
otherwise it warns.  For example:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">__attribute__</span><span class="p">((</span><span class="n">__format__</span> <span class="p">(</span><span class="n">__scanf__</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)))</span>
<span class="kt">void</span> <span class="n">foo</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">s</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="p">...)</span> <span class="p">{</span>
  <span class="kt">va_list</span> <span class="n">ap</span><span class="p">;</span>
  <span class="n">va_start</span><span class="p">(</span><span class="n">ap</span><span class="p">,</span> <span class="n">buf</span><span class="p">);</span>

  <span class="n">vprintf</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">ap</span><span class="p">);</span> <span class="c1">// warning: format string is not a string literal</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this case we warn because <tt class="docutils literal"><span class="pre">s</span></tt> contains a format string for a
<tt class="docutils literal"><span class="pre">scanf</span></tt>-like function, but it is passed to a <tt class="docutils literal"><span class="pre">printf</span></tt>-like function.</p>
<p>If the attribute is removed, clang still warns, because the format string is
not a string literal.</p>
<p>Another example:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">__attribute__</span><span class="p">((</span><span class="n">__format__</span> <span class="p">(</span><span class="n">__printf__</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)))</span>
<span class="kt">void</span> <span class="n">foo</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">s</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="p">...)</span> <span class="p">{</span>
  <span class="kt">va_list</span> <span class="n">ap</span><span class="p">;</span>
  <span class="n">va_start</span><span class="p">(</span><span class="n">ap</span><span class="p">,</span> <span class="n">buf</span><span class="p">);</span>

  <span class="n">vprintf</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">ap</span><span class="p">);</span> <span class="c1">// warning</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this case Clang does not warn because the format string <tt class="docutils literal"><span class="pre">s</span></tt> and
the corresponding arguments are annotated.  If the arguments are
incorrect, the caller of <tt class="docutils literal"><span class="pre">foo</span></tt> will receive a warning.</p>
</li>
</ol>
</div>
<div class="section" id="gnu-inline">
<h3><a class="toc-backref" href="#id45">gnu_inline</a><a class="headerlink" href="#gnu-inline" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">gnu_inline</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::gnu_inline</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">gnu_inline</span></tt> changes the meaning of <tt class="docutils literal"><span class="pre">extern</span> <span class="pre">inline</span></tt> to use GNU inline
semantics, meaning:</p>
<ul class="simple">
<li>If any declaration that is declared <tt class="docutils literal"><span class="pre">inline</span></tt> is not declared <tt class="docutils literal"><span class="pre">extern</span></tt>,
then the <tt class="docutils literal"><span class="pre">inline</span></tt> keyword is just a hint. In particular, an out-of-line
definition is still emitted for a function with external linkage, even if all
call sites are inlined, unlike in C99 and C++ inline semantics.</li>
<li>If all declarations that are declared <tt class="docutils literal"><span class="pre">inline</span></tt> are also declared
<tt class="docutils literal"><span class="pre">extern</span></tt>, then the function body is present only for inlining and no
out-of-line version is emitted.</li>
</ul>
<p>Some important consequences: <tt class="docutils literal"><span class="pre">static</span> <span class="pre">inline</span></tt> emits an out-of-line
version if needed, a plain <tt class="docutils literal"><span class="pre">inline</span></tt> definition emits an out-of-line version
always, and an <tt class="docutils literal"><span class="pre">extern</span> <span class="pre">inline</span></tt> definition (in a header) followed by a
(non-<tt class="docutils literal"><span class="pre">extern</span></tt>) <tt class="docutils literal"><span class="pre">inline</span></tt> declaration in a source file emits an out-of-line
version of the function in that source file but provides the function body for
inlining to all includers of the header.</p>
<p>Either <tt class="docutils literal"><span class="pre">__GNUC_GNU_INLINE__</span></tt> (GNU inline semantics) or
<tt class="docutils literal"><span class="pre">__GNUC_STDC_INLINE__</span></tt> (C99 semantics) will be defined (they are mutually
exclusive). If <tt class="docutils literal"><span class="pre">__GNUC_STDC_INLINE__</span></tt> is defined, then the <tt class="docutils literal"><span class="pre">gnu_inline</span></tt>
function attribute can be used to get GNU inline semantics on a per function
basis. If <tt class="docutils literal"><span class="pre">__GNUC_GNU_INLINE__</span></tt> is defined, then the translation unit is
already being compiled with GNU inline semantics as the implied default. It is
unspecified which macro is defined in a C++ compilation.</p>
<p>GNU inline semantics are the default behavior with <tt class="docutils literal"><span class="pre">-std=gnu89</span></tt>,
<tt class="docutils literal"><span class="pre">-std=c89</span></tt>, <tt class="docutils literal"><span class="pre">-std=c94</span></tt>, or <tt class="docutils literal"><span class="pre">-fgnu89-inline</span></tt>.</p>
</div>
<div class="section" id="ifunc">
<h3><a class="toc-backref" href="#id46">ifunc</a><a class="headerlink" href="#ifunc" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ifunc</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::ifunc</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">__attribute__((ifunc(&quot;resolver&quot;)))</span></tt> is used to mark that the address of a declaration should be resolved at runtime by calling a resolver function.</p>
<p>The symbol name of the resolver function is given in quotes.  A function with this name (after mangling) must be defined in the current translation unit; it may be <tt class="docutils literal"><span class="pre">static</span></tt>.  The resolver function should return a pointer.</p>
<p>The <tt class="docutils literal"><span class="pre">ifunc</span></tt> attribute may only be used on a function declaration.  A function declaration with an <tt class="docutils literal"><span class="pre">ifunc</span></tt> attribute is considered to be a definition of the declared entity.  The entity must not have weak linkage; for example, in C++, it cannot be applied to a declaration if a definition at that location would be considered inline.</p>
<p>Not all targets support this attribute. ELF target support depends on both the linker and runtime linker, and is available in at least lld 4.0 and later, binutils 2.20.1 and later, glibc v2.11.1 and later, and FreeBSD 9.1 and later. Non-ELF targets currently do not support this attribute.</p>
</div>
<div class="section" id="import-module">
<h3><a class="toc-backref" href="#id47">import_module</a><a class="headerlink" href="#import-module" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">import_module</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::import_module</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::import_module</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Clang supports the <tt class="docutils literal"><span class="pre">__attribute__((import_module(&lt;module_name&gt;)))</span></tt>
attribute for the WebAssembly target. This attribute may be attached to a
function declaration, where it modifies how the symbol is to be imported
within the WebAssembly linking environment.</p>
<p>WebAssembly imports use a two-level namespace scheme, consisting of a module
name, which typically identifies a module from which to import, and a field
name, which typically identifies a field from that module to import. By
default, module names for C/C++ symbols are assigned automatically by the
linker. This attribute can be used to override the default behavior, and
reuqest a specific module name be used instead.</p>
</div>
<div class="section" id="import-name">
<h3><a class="toc-backref" href="#id48">import_name</a><a class="headerlink" href="#import-name" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">import_name</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::import_name</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::import_name</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Clang supports the <tt class="docutils literal"><span class="pre">__attribute__((import_name(&lt;name&gt;)))</span></tt>
attribute for the WebAssembly target. This attribute may be attached to a
function declaration, where it modifies how the symbol is to be imported
within the WebAssembly linking environment.</p>
<p>WebAssembly imports use a two-level namespace scheme, consisting of a module
name, which typically identifies a module from which to import, and a field
name, which typically identifies a field from that module to import. By
default, field names for C/C++ symbols are the same as their C/C++ symbol
names. This attribute can be used to override the default behavior, and
reuqest a specific field name be used instead.</p>
</div>
<div class="section" id="internal-linkage">
<h3><a class="toc-backref" href="#id49">internal_linkage</a><a class="headerlink" href="#internal-linkage" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">internal_linkage</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::internal_linkage</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::internal_linkage</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">internal_linkage</span></tt> attribute changes the linkage type of the declaration to internal.
This is similar to C-style <tt class="docutils literal"><span class="pre">static</span></tt>, but can be used on classes and class methods. When applied to a class definition,
this attribute affects all methods and static data members of that class.
This can be used to contain the ABI of a C++ library by excluding unwanted class methods from the export tables.</p>
</div>
<div class="section" id="interrupt-arm">
<h3><a class="toc-backref" href="#id50">interrupt (ARM)</a><a class="headerlink" href="#interrupt-arm" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">interrupt</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::interrupt</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>Clang supports the GNU style <tt class="docutils literal"><span class="pre">__attribute__((interrupt(&quot;TYPE&quot;)))</span></tt> attribute on
ARM targets. This attribute may be attached to a function definition and
instructs the backend to generate appropriate function entry/exit code so that
it can be used directly as an interrupt service routine.</p>
<p>The parameter passed to the interrupt attribute is optional, but if
provided it must be a string literal with one of the following values: &#8220;IRQ&#8221;,
&#8220;FIQ&#8221;, &#8220;SWI&#8221;, &#8220;ABORT&#8221;, &#8220;UNDEF&#8221;.</p>
<p>The semantics are as follows:</p>
<ul>
<li><p class="first">If the function is AAPCS, Clang instructs the backend to realign the stack to
8 bytes on entry. This is a general requirement of the AAPCS at public
interfaces, but may not hold when an exception is taken. Doing this allows
other AAPCS functions to be called.</p>
</li>
<li><p class="first">If the CPU is M-class this is all that needs to be done since the architecture
itself is designed in such a way that functions obeying the normal AAPCS ABI
constraints are valid exception handlers.</p>
</li>
<li><p class="first">If the CPU is not M-class, the prologue and epilogue are modified to save all
non-banked registers that are used, so that upon return the user-mode state
will not be corrupted. Note that to avoid unnecessary overhead, only
general-purpose (integer) registers are saved in this way. If VFP operations
are needed, that state must be saved manually.</p>
<p>Specifically, interrupt kinds other than &#8220;FIQ&#8221; will save all core registers
except &#8220;lr&#8221; and &#8220;sp&#8221;. &#8220;FIQ&#8221; interrupts will save r0-r7.</p>
</li>
<li><p class="first">If the CPU is not M-class, the return instruction is changed to one of the
canonical sequences permitted by the architecture for exception return. Where
possible the function itself will make the necessary &#8220;lr&#8221; adjustments so that
the &#8220;preferred return address&#8221; is selected.</p>
<p>Unfortunately the compiler is unable to make this guarantee for an &#8220;UNDEF&#8221;
handler, where the offset from &#8220;lr&#8221; to the preferred return address depends on
the execution state of the code which generated the exception. In this case
a sequence equivalent to &#8220;movs pc, lr&#8221; will be used.</p>
</li>
</ul>
</div>
<div class="section" id="interrupt-avr">
<h3><a class="toc-backref" href="#id51">interrupt (AVR)</a><a class="headerlink" href="#interrupt-avr" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">interrupt</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::interrupt</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Clang supports the GNU style <tt class="docutils literal"><span class="pre">__attribute__((interrupt))</span></tt> attribute on
AVR targets. This attribute may be attached to a function definition and instructs
the backend to generate appropriate function entry/exit code so that it can be used
directly as an interrupt service routine.</p>
<p>On the AVR, the hardware globally disables interrupts when an interrupt is executed.
The first instruction of an interrupt handler declared with this attribute is a SEI
instruction to re-enable interrupts. See also the signal attribute that
does not insert a SEI instruction.</p>
</div>
<div class="section" id="interrupt-mips">
<h3><a class="toc-backref" href="#id52">interrupt (MIPS)</a><a class="headerlink" href="#interrupt-mips" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">interrupt</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::interrupt</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Clang supports the GNU style <tt class="docutils literal"><span class="pre">__attribute__((interrupt(&quot;ARGUMENT&quot;)))</span></tt> attribute on
MIPS targets. This attribute may be attached to a function definition and instructs
the backend to generate appropriate function entry/exit code so that it can be used
directly as an interrupt service routine.</p>
<p>By default, the compiler will produce a function prologue and epilogue suitable for
an interrupt service routine that handles an External Interrupt Controller (eic)
generated interrupt. This behaviour can be explicitly requested with the &#8220;eic&#8221;
argument.</p>
<p>Otherwise, for use with vectored interrupt mode, the argument passed should be
of the form &#8220;vector=LEVEL&#8221; where LEVEL is one of the following values:
&#8220;sw0&#8221;, &#8220;sw1&#8221;, &#8220;hw0&#8221;, &#8220;hw1&#8221;, &#8220;hw2&#8221;, &#8220;hw3&#8221;, &#8220;hw4&#8221;, &#8220;hw5&#8221;. The compiler will
then set the interrupt mask to the corresponding level which will mask all
interrupts up to and including the argument.</p>
<p>The semantics are as follows:</p>
<ul class="simple">
<li>The prologue is modified so that the Exception Program Counter (EPC) and
Status coprocessor registers are saved to the stack. The interrupt mask is
set so that the function can only be interrupted by a higher priority
interrupt. The epilogue will restore the previous values of EPC and Status.</li>
<li>The prologue and epilogue are modified to save and restore all non-kernel
registers as necessary.</li>
<li>The FPU is disabled in the prologue, as the floating pointer registers are not
spilled to the stack.</li>
<li>The function return sequence is changed to use an exception return instruction.</li>
<li>The parameter sets the interrupt mask for the function corresponding to the
interrupt level specified. If no mask is specified the interrupt mask
defaults to &#8220;eic&#8221;.</li>
</ul>
</div>
<div class="section" id="interrupt-riscv">
<h3><a class="toc-backref" href="#id53">interrupt (RISCV)</a><a class="headerlink" href="#interrupt-riscv" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">interrupt</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::interrupt</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Clang supports the GNU style <tt class="docutils literal"><span class="pre">__attribute__((interrupt))</span></tt> attribute on RISCV
targets. This attribute may be attached to a function definition and instructs
the backend to generate appropriate function entry/exit code so that it can be
used directly as an interrupt service routine.</p>
<p>Permissible values for this parameter are <tt class="docutils literal"><span class="pre">user</span></tt>, <tt class="docutils literal"><span class="pre">supervisor</span></tt>,
and <tt class="docutils literal"><span class="pre">machine</span></tt>. If there is no parameter, then it defaults to machine.</p>
<p>Repeated interrupt attribute on the same declaration will cause a warning
to be emitted. In case of repeated declarations, the last one prevails.</p>
<p>Refer to:
<a class="reference external" href="https://gcc.gnu.org/onlinedocs/gcc/RISC-V-Function-Attributes.html">https://gcc.gnu.org/onlinedocs/gcc/RISC-V-Function-Attributes.html</a>
<a class="reference external" href="https://riscv.org/specifications/privileged-isa/">https://riscv.org/specifications/privileged-isa/</a>
The RISC-V Instruction Set Manual Volume II: Privileged Architecture
Version 1.10.</p>
</div>
<div class="section" id="kernel">
<h3><a class="toc-backref" href="#id54">kernel</a><a class="headerlink" href="#kernel" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">kernel</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">__attribute__((kernel))</span></tt> is used to mark a <tt class="docutils literal"><span class="pre">kernel</span></tt> function in
RenderScript.</p>
<p>In RenderScript, <tt class="docutils literal"><span class="pre">kernel</span></tt> functions are used to express data-parallel
computations.  The RenderScript runtime efficiently parallelizes <tt class="docutils literal"><span class="pre">kernel</span></tt>
functions to run on computational resources such as multi-core CPUs and GPUs.
See the <a class="reference external" href="https://developer.android.com/guide/topics/renderscript/compute.html">RenderScript</a> documentation for more information.</p>
</div>
<div class="section" id="lifetimebound">
<h3><a class="toc-backref" href="#id55">lifetimebound</a><a class="headerlink" href="#lifetimebound" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">lifetimebound</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::lifetimebound</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">lifetimebound</span></tt> attribute indicates that a resource owned by
a function parameter or implicit object parameter
is retained by the return value of the annotated function
(or, for a parameter of a constructor, in the value of the constructed object).
It is only supported in C++.</p>
<p>This attribute provides an experimental implementation of the facility
described in the C++ committee paper [<a class="reference external" href="http://wg21.link/p0936r0](P0936R0">http://wg21.link/p0936r0](P0936R0</a>),
and is subject to change as the design of the corresponding functionality
changes.</p>
</div>
<div class="section" id="long-call-far">
<h3><a class="toc-backref" href="#id56">long_call, far</a><a class="headerlink" href="#long-call-far" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">long_call</span></tt> <br/> <tt class="docutils literal"><span class="pre">far</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::long_call</span></tt> <br/> <tt class="docutils literal"><span class="pre">gnu::far</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Clang supports the <tt class="docutils literal"><span class="pre">__attribute__((long_call))</span></tt>, <tt class="docutils literal"><span class="pre">__attribute__((far))</span></tt>,
and <tt class="docutils literal"><span class="pre">__attribute__((near))</span></tt> attributes on MIPS targets. These attributes may
only be added to function declarations and change the code generated
by the compiler when directly calling the function. The <tt class="docutils literal"><span class="pre">near</span></tt> attribute
allows calls to the function to be made using the <tt class="docutils literal"><span class="pre">jal</span></tt> instruction, which
requires the function to be located in the same naturally aligned 256MB
segment as the caller.  The <tt class="docutils literal"><span class="pre">long_call</span></tt> and <tt class="docutils literal"><span class="pre">far</span></tt> attributes are synonyms
and require the use of a different call sequence that works regardless
of the distance between the functions.</p>
<p>These attributes have no effect for position-independent code.</p>
<p>These attributes take priority over command line switches such
as <tt class="docutils literal"><span class="pre">-mlong-calls</span></tt> and <tt class="docutils literal"><span class="pre">-mno-long-calls</span></tt>.</p>
</div>
<div class="section" id="micromips">
<h3><a class="toc-backref" href="#id57">micromips</a><a class="headerlink" href="#micromips" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">micromips</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::micromips</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Clang supports the GNU style <tt class="docutils literal"><span class="pre">__attribute__((micromips))</span></tt> and
<tt class="docutils literal"><span class="pre">__attribute__((nomicromips))</span></tt> attributes on MIPS targets. These attributes
may be attached to a function definition and instructs the backend to generate
or not to generate microMIPS code for that function.</p>
<p>These attributes override the <cite>-mmicromips</cite> and <cite>-mno-micromips</cite> options
on the command line.</p>
</div>
<div class="section" id="min-vector-width">
<h3><a class="toc-backref" href="#id58">min_vector_width</a><a class="headerlink" href="#min-vector-width" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">min_vector_width</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::min_vector_width</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::min_vector_width</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Clang supports the <tt class="docutils literal"><span class="pre">__attribute__((min_vector_width(width)))</span></tt> attribute. This
attribute may be attached to a function and informs the backend that this
function desires vectors of at least this width to be generated. Target-specific
maximum vector widths still apply. This means even if you ask for something
larger than the target supports, you will only get what the target supports.
This attribute is meant to be a hint to control target heuristics that may
generate narrower vectors than what the target hardware supports.</p>
<p>This is currently used by the X86 target to allow some CPUs that support 512-bit
vectors to be limited to using 256-bit vectors to avoid frequency penalties.
This is currently enabled with the <tt class="docutils literal"><span class="pre">-prefer-vector-width=256</span></tt> command line
option. The <tt class="docutils literal"><span class="pre">min_vector_width</span></tt> attribute can be used to prevent the backend
from trying to split vector operations to match the <tt class="docutils literal"><span class="pre">prefer-vector-width</span></tt>. All
X86 vector intrinsics from x86intrin.h already set this attribute. Additionally,
use of any of the X86-specific vector builtins will implicitly set this
attribute on the calling function. The intent is that explicitly writing vector
code using the X86 intrinsics will prevent <tt class="docutils literal"><span class="pre">prefer-vector-width</span></tt> from
affecting the code.</p>
</div>
<div class="section" id="no-caller-saved-registers">
<h3><a class="toc-backref" href="#id59">no_caller_saved_registers</a><a class="headerlink" href="#no-caller-saved-registers" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">no_caller_saved_registers</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::no_caller_saved_registers</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>Use this attribute to indicate that the specified function has no
caller-saved registers. That is, all registers are callee-saved except for
registers used for passing parameters to the function or returning parameters
from the function.
The compiler saves and restores any modified registers that were not used for
passing or returning arguments to the function.</p>
<p>The user can call functions specified with the &#8216;no_caller_saved_registers&#8217;
attribute from an interrupt handler without saving and restoring all
call-clobbered registers.</p>
<p>Note that &#8216;no_caller_saved_registers&#8217; attribute is not a calling convention.
In fact, it only overrides the decision of which registers should be saved by
the caller, but not how the parameters are passed from the caller to the callee.</p>
<p>For example:</p>
<blockquote>
<div><div class="highlight-c"><div class="highlight"><pre><span class="n">__attribute__</span> <span class="p">((</span><span class="n">no_caller_saved_registers</span><span class="p">,</span> <span class="n">fastcall</span><span class="p">))</span>
<span class="kt">void</span> <span class="n">f</span> <span class="p">(</span><span class="kt">int</span> <span class="n">arg1</span><span class="p">,</span> <span class="kt">int</span> <span class="n">arg2</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this case parameters &#8216;arg1&#8217; and &#8216;arg2&#8217; will be passed in registers.
In this case, on 32-bit x86 targets, the function &#8216;f&#8217; will use ECX and EDX as
register parameters. However, it will not assume any scratch registers and
should save and restore any modified registers except for ECX and EDX.</p>
</div></blockquote>
</div>
<div class="section" id="no-sanitize">
<h3><a class="toc-backref" href="#id60">no_sanitize</a><a class="headerlink" href="#no-sanitize" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">no_sanitize</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::no_sanitize</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::no_sanitize</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Use the <tt class="docutils literal"><span class="pre">no_sanitize</span></tt> attribute on a function or a global variable
declaration to specify that a particular instrumentation or set of
instrumentations should not be applied. The attribute takes a list of
string literals, which have the same meaning as values accepted by the
<tt class="docutils literal"><span class="pre">-fno-sanitize=</span></tt> flag. For example,
<tt class="docutils literal"><span class="pre">__attribute__((no_sanitize(&quot;address&quot;,</span> <span class="pre">&quot;thread&quot;)))</span></tt> specifies that
AddressSanitizer and ThreadSanitizer should not be applied to the
function or variable.</p>
<p>See <a class="reference internal" href="UsersManual.html#controlling-code-generation"><em>Controlling Code Generation</em></a> for a
full list of supported sanitizer flags.</p>
</div>
<div class="section" id="no-sanitize-address-no-address-safety-analysis">
<h3><a class="toc-backref" href="#id61">no_sanitize_address, no_address_safety_analysis</a><a class="headerlink" href="#no-sanitize-address-no-address-safety-analysis" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">no_address_safety_analysis</span></tt> <br/> <tt class="docutils literal"><span class="pre">no_sanitize_address</span></tt> <br/> <tt class="docutils literal"><span class="pre">no_sanitize_thread</span></tt> <br/> <tt class="docutils literal"><span class="pre">no_sanitize_memory</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::no_address_safety_analysis</span></tt> <br/> <tt class="docutils literal"><span class="pre">gnu::no_sanitize_address</span></tt> <br/> <tt class="docutils literal"><span class="pre">gnu::no_sanitize_thread</span></tt> <br/> <tt class="docutils literal"><span class="pre">clang::no_sanitize_memory</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::no_sanitize_memory</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p id="langext-address-sanitizer">Use <tt class="docutils literal"><span class="pre">__attribute__((no_sanitize_address))</span></tt> on a function or a global
variable declaration to specify that address safety instrumentation
(e.g. AddressSanitizer) should not be applied.</p>
</div>
<div class="section" id="no-sanitize-memory">
<h3><a class="toc-backref" href="#id62">no_sanitize_memory</a><a class="headerlink" href="#no-sanitize-memory" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">no_address_safety_analysis</span></tt> <br/> <tt class="docutils literal"><span class="pre">no_sanitize_address</span></tt> <br/> <tt class="docutils literal"><span class="pre">no_sanitize_thread</span></tt> <br/> <tt class="docutils literal"><span class="pre">no_sanitize_memory</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::no_address_safety_analysis</span></tt> <br/> <tt class="docutils literal"><span class="pre">gnu::no_sanitize_address</span></tt> <br/> <tt class="docutils literal"><span class="pre">gnu::no_sanitize_thread</span></tt> <br/> <tt class="docutils literal"><span class="pre">clang::no_sanitize_memory</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::no_sanitize_memory</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p id="langext-memory-sanitizer">Use <tt class="docutils literal"><span class="pre">__attribute__((no_sanitize_memory))</span></tt> on a function declaration to
specify that checks for uninitialized memory should not be inserted
(e.g. by MemorySanitizer). The function may still be instrumented by the tool
to avoid false positives in other places.</p>
</div>
<div class="section" id="no-sanitize-thread">
<h3><a class="toc-backref" href="#id63">no_sanitize_thread</a><a class="headerlink" href="#no-sanitize-thread" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">no_address_safety_analysis</span></tt> <br/> <tt class="docutils literal"><span class="pre">no_sanitize_address</span></tt> <br/> <tt class="docutils literal"><span class="pre">no_sanitize_thread</span></tt> <br/> <tt class="docutils literal"><span class="pre">no_sanitize_memory</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::no_address_safety_analysis</span></tt> <br/> <tt class="docutils literal"><span class="pre">gnu::no_sanitize_address</span></tt> <br/> <tt class="docutils literal"><span class="pre">gnu::no_sanitize_thread</span></tt> <br/> <tt class="docutils literal"><span class="pre">clang::no_sanitize_memory</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::no_sanitize_memory</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p id="langext-thread-sanitizer">Use <tt class="docutils literal"><span class="pre">__attribute__((no_sanitize_thread))</span></tt> on a function declaration to
specify that checks for data races on plain (non-atomic) memory accesses should
not be inserted by ThreadSanitizer. The function is still instrumented by the
tool to avoid false positives and provide meaningful stack traces.</p>
</div>
<div class="section" id="no-split-stack">
<h3><a class="toc-backref" href="#id64">no_split_stack</a><a class="headerlink" href="#no-split-stack" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">no_split_stack</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::no_split_stack</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">no_split_stack</span></tt> attribute disables the emission of the split stack
preamble for a particular function. It has no effect if <tt class="docutils literal"><span class="pre">-fsplit-stack</span></tt>
is not specified.</p>
</div>
<div class="section" id="no-stack-protector">
<h3><a class="toc-backref" href="#id65">no_stack_protector</a><a class="headerlink" href="#no-stack-protector" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">no_stack_protector</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::no_stack_protector</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::no_stack_protector</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Clang supports the <tt class="docutils literal"><span class="pre">__attribute__((no_stack_protector))</span></tt> attribute which disables
the stack protector on the specified function. This attribute is useful for
selectively disabling the stack protector on some functions when building with
<tt class="docutils literal"><span class="pre">-fstack-protector</span></tt> compiler option.</p>
<p>For example, it disables the stack protector for the function <tt class="docutils literal"><span class="pre">foo</span></tt> but function
<tt class="docutils literal"><span class="pre">bar</span></tt> will still be built with the stack protector with the <tt class="docutils literal"><span class="pre">-fstack-protector</span></tt>
option.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="kt">int</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">no_stack_protector</span><span class="p">))</span>
<span class="n">foo</span> <span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">);</span> <span class="c1">// stack protection will be disabled for foo.</span>

<span class="kt">int</span> <span class="n">bar</span><span class="p">(</span><span class="kt">int</span> <span class="n">y</span><span class="p">);</span> <span class="c1">// bar can be built with the stack protector.</span>
</pre></div>
</div>
</div>
<div class="section" id="noalias">
<h3><a class="toc-backref" href="#id66">noalias</a><a class="headerlink" href="#noalias" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">noalias</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">noalias</span></tt> attribute indicates that the only memory accesses inside
function are loads and stores from objects pointed to by its pointer-typed
arguments, with arbitrary offsets.</p>
</div>
<div class="section" id="nocf-check">
<h3><a class="toc-backref" href="#id67">nocf_check</a><a class="headerlink" href="#nocf-check" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">nocf_check</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::nocf_check</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Jump Oriented Programming attacks rely on tampering with addresses used by
indirect call / jmp, e.g. redirect control-flow to non-programmer
intended bytes in the binary.
X86 Supports Indirect Branch Tracking (IBT) as part of Control-Flow
Enforcement Technology (CET). IBT instruments ENDBR instructions used to
specify valid targets of indirect call / jmp.
The <tt class="docutils literal"><span class="pre">nocf_check</span></tt> attribute has two roles:
1. Appertains to a function - do not add ENDBR instruction at the beginning of
the function.
2. Appertains to a function pointer - do not track the target function of this
pointer (by adding nocf_check prefix to the indirect-call instruction).</p>
</div>
<div class="section" id="nodiscard-warn-unused-result">
<h3><a class="toc-backref" href="#id68">nodiscard, warn_unused_result</a><a class="headerlink" href="#nodiscard-warn-unused-result" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">warn_unused_result</span></tt></td>
<td><tt class="docutils literal"><span class="pre">nodiscard</span></tt> <br/> <tt class="docutils literal"><span class="pre">clang::warn_unused_result</span></tt> <br/> <tt class="docutils literal"><span class="pre">gnu::warn_unused_result</span></tt></td>
<td><tt class="docutils literal"><span class="pre">nodiscard</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Clang supports the ability to diagnose when the results of a function call
expression are discarded under suspicious circumstances. A diagnostic is
generated when a function or its return type is marked with <tt class="docutils literal"><span class="pre">[[nodiscard]]</span></tt>
(or <tt class="docutils literal"><span class="pre">__attribute__((warn_unused_result))</span></tt>) and the function call appears as a
potentially-evaluated discarded-value expression that is not explicitly cast to
<cite>void</cite>.</p>
</div>
<div class="section" id="noduplicate">
<h3><a class="toc-backref" href="#id69">noduplicate</a><a class="headerlink" href="#noduplicate" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">noduplicate</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::noduplicate</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::noduplicate</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">noduplicate</span></tt> attribute can be placed on function declarations to control
whether function calls to this function can be duplicated or not as a result of
optimizations. This is required for the implementation of functions with
certain special requirements, like the OpenCL &#8220;barrier&#8221; function, that might
need to be run concurrently by all the threads that are executing in lockstep
on the hardware. For example this attribute applied on the function
&#8220;nodupfunc&#8221; in the code below avoids that:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="kt">void</span> <span class="n">nodupfunc</span><span class="p">()</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">noduplicate</span><span class="p">));</span>
<span class="c1">// Setting it as a C++11 attribute is also valid</span>
<span class="c1">// void nodupfunc() [[clang::noduplicate]];</span>
<span class="kt">void</span> <span class="n">foo</span><span class="p">();</span>
<span class="kt">void</span> <span class="n">bar</span><span class="p">();</span>

<span class="n">nodupfunc</span><span class="p">();</span>
<span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">foo</span><span class="p">();</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="n">bar</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>gets possibly modified by some optimizations into code similar to this:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">nodupfunc</span><span class="p">();</span>
  <span class="n">foo</span><span class="p">();</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="n">nodupfunc</span><span class="p">();</span>
  <span class="n">bar</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>where the call to &#8220;nodupfunc&#8221; is duplicated and sunk into the two branches
of the condition.</p>
</div>
<div class="section" id="nomicromips">
<h3><a class="toc-backref" href="#id70">nomicromips</a><a class="headerlink" href="#nomicromips" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">nomicromips</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::nomicromips</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Clang supports the GNU style <tt class="docutils literal"><span class="pre">__attribute__((micromips))</span></tt> and
<tt class="docutils literal"><span class="pre">__attribute__((nomicromips))</span></tt> attributes on MIPS targets. These attributes
may be attached to a function definition and instructs the backend to generate
or not to generate microMIPS code for that function.</p>
<p>These attributes override the <cite>-mmicromips</cite> and <cite>-mno-micromips</cite> options
on the command line.</p>
</div>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#id71">noreturn</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">noreturn</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>A function declared as <tt class="docutils literal"><span class="pre">[[noreturn]]</span></tt> shall not return to its caller. The
compiler will generate a diagnostic for a function declared as <tt class="docutils literal"><span class="pre">[[noreturn]]</span></tt>
that appears to be capable of returning to its caller.</p>
</div>
<div class="section" id="not-tail-called">
<h3><a class="toc-backref" href="#id72">not_tail_called</a><a class="headerlink" href="#not-tail-called" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">not_tail_called</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::not_tail_called</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::not_tail_called</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">not_tail_called</span></tt> attribute prevents tail-call optimization on statically bound calls. It has no effect on indirect calls. Virtual functions, objective-c methods, and functions marked as <tt class="docutils literal"><span class="pre">always_inline</span></tt> cannot be marked as <tt class="docutils literal"><span class="pre">not_tail_called</span></tt>.</p>
<p>For example, it prevents tail-call optimization in the following case:</p>
<blockquote>
<div><div class="highlight-c"><div class="highlight"><pre><span class="kt">int</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">not_tail_called</span><span class="p">))</span> <span class="n">foo1</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">foo2</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">foo1</span><span class="p">(</span><span class="n">a</span><span class="p">);</span> <span class="c1">// No tail-call optimization on direct calls.</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>However, it doesn&#8217;t prevent tail-call optimization in this case:</p>
<blockquote>
<div><div class="highlight-c"><div class="highlight"><pre><span class="kt">int</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">not_tail_called</span><span class="p">))</span> <span class="n">foo1</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">foo2</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">fn</span><span class="p">)(</span><span class="kt">int</span><span class="p">)</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">foo1</span><span class="p">;</span>

  <span class="c1">// not_tail_called has no effect on an indirect call even if the call can be</span>
  <span class="c1">// resolved at compile time.</span>
  <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="n">fn</span><span class="p">)(</span><span class="n">a</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Marking virtual functions as <tt class="docutils literal"><span class="pre">not_tail_called</span></tt> is an error:</p>
<blockquote>
<div><div class="highlight-c++"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Base</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="c1">// not_tail_called on a virtual function is an error.</span>
  <span class="p">[[</span><span class="n">clang</span><span class="o">::</span><span class="n">not_tail_called</span><span class="p">]]</span> <span class="k">virtual</span> <span class="kt">int</span> <span class="n">foo1</span><span class="p">();</span>

  <span class="k">virtual</span> <span class="kt">int</span> <span class="n">foo2</span><span class="p">();</span>

  <span class="c1">// Non-virtual functions can be marked ``not_tail_called``.</span>
  <span class="p">[[</span><span class="n">clang</span><span class="o">::</span><span class="n">not_tail_called</span><span class="p">]]</span> <span class="kt">int</span> <span class="n">foo3</span><span class="p">();</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Derived1</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Base</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="kt">int</span> <span class="n">foo1</span><span class="p">()</span> <span class="n">override</span><span class="p">;</span>

  <span class="c1">// not_tail_called on a virtual function is an error.</span>
  <span class="p">[[</span><span class="n">clang</span><span class="o">::</span><span class="n">not_tail_called</span><span class="p">]]</span> <span class="kt">int</span> <span class="n">foo2</span><span class="p">()</span> <span class="n">override</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="nothrow">
<h3><a class="toc-backref" href="#id73">nothrow</a><a class="headerlink" href="#nothrow" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">nothrow</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::nothrow</span></tt></td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">nothrow</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Clang supports the GNU style <tt class="docutils literal"><span class="pre">__attribute__((nothrow))</span></tt> and Microsoft style
<tt class="docutils literal"><span class="pre">__declspec(nothrow)</span></tt> attribute as an equivalent of <cite>noexcept</cite> on function
declarations. This attribute informs the compiler that the annotated function
does not throw an exception. This prevents exception-unwinding. This attribute
is particularly useful on functions in the C Standard Library that are
guaranteed to not throw an exception.</p>
</div>
<div class="section" id="ns-consumed">
<h3><a class="toc-backref" href="#id74">ns_consumed</a><a class="headerlink" href="#ns-consumed" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ns_consumed</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::ns_consumed</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::ns_consumed</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The behavior of a function with respect to reference counting for Foundation
(Objective-C), CoreFoundation (C) and OSObject (C++) is determined by a naming
convention (e.g. functions starting with &#8220;get&#8221; are assumed to return at
<tt class="docutils literal"><span class="pre">+0</span></tt>).</p>
<p>It can be overriden using a family of the following attributes.  In
Objective-C, the annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_returns_retained))</span></tt> applied to
a function communicates that the object is returned at <tt class="docutils literal"><span class="pre">+1</span></tt>, and the caller
is responsible for freeing it.
Similiarly, the annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_returns_not_retained))</span></tt>
specifies that the object is returned at <tt class="docutils literal"><span class="pre">+0</span></tt> and the ownership remains with
the callee.
The annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_consumes_self))</span></tt> specifies that
the Objective-C method call consumes the reference to <tt class="docutils literal"><span class="pre">self</span></tt>, e.g. by
attaching it to a supplied parameter.
Additionally, parameters can have an annotation
<tt class="docutils literal"><span class="pre">__attribute__((ns_consumed))</span></tt>, which specifies that passing an owned object
as that parameter effectively transfers the ownership, and the caller is no
longer responsible for it.
These attributes affect code generation when interacting with ARC code, and
they are used by the Clang Static Analyzer.</p>
<p>In C programs using CoreFoundation, a similar set of attributes:
<tt class="docutils literal"><span class="pre">__attribute__((cf_returns_not_retained))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((cf_returns_retained))</span></tt> and <tt class="docutils literal"><span class="pre">__attribute__((cf_consumed))</span></tt>
have the same respective semantics when applied to CoreFoundation objects.
These attributes affect code generation when interacting with ARC code, and
they are used by the Clang Static Analyzer.</p>
<p>Finally, in C++ interacting with XNU kernel (objects inheriting from OSObject),
the same attribute family is present:
<tt class="docutils literal"><span class="pre">__attribute__((os_returns_not_retained))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained))</span></tt> and <tt class="docutils literal"><span class="pre">__attribute__((os_consumed))</span></tt>,
with the same respective semantics.
Similar to <tt class="docutils literal"><span class="pre">__attribute__((ns_consumes_self))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((os_consumes_this))</span></tt> specifies that the method call consumes
the reference to &#8220;this&#8221; (e.g., when attaching it to a different object supplied
as a parameter).
Out parameters (parameters the function is meant to write into,
either via pointers-to-pointers or references-to-pointers)
may be annotated with <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained))</span></tt>
or <tt class="docutils literal"><span class="pre">__attribute__((os_returns_not_retained))</span></tt> which specifies that the object
written into the out parameter should (or respectively should not) be released
after use.
Since often out parameters may or may not be written depending on the exit
code of the function,
annotations <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained_on_zero))</span></tt>
and <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained_on_non_zero))</span></tt> specify that
an out parameter at <tt class="docutils literal"><span class="pre">+1</span></tt> is written if and only if the function returns a zero
(respectively non-zero) error code.
Observe that return-code-dependent out parameter annotations are only
available for retained out parameters, as non-retained object do not have to be
released by the callee.
These attributes are only used by the Clang Static Analyzer.</p>
<p>The family of attributes <tt class="docutils literal"><span class="pre">X_returns_X_retained</span></tt> can be added to functions,
C++ methods, and Objective-C methods and properties.
Attributes <tt class="docutils literal"><span class="pre">X_consumed</span></tt> can be added to parameters of methods, functions,
and Objective-C methods.</p>
</div>
<div class="section" id="ns-consumes-self">
<h3><a class="toc-backref" href="#id75">ns_consumes_self</a><a class="headerlink" href="#ns-consumes-self" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ns_consumes_self</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::ns_consumes_self</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::ns_consumes_self</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The behavior of a function with respect to reference counting for Foundation
(Objective-C), CoreFoundation (C) and OSObject (C++) is determined by a naming
convention (e.g. functions starting with &#8220;get&#8221; are assumed to return at
<tt class="docutils literal"><span class="pre">+0</span></tt>).</p>
<p>It can be overriden using a family of the following attributes.  In
Objective-C, the annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_returns_retained))</span></tt> applied to
a function communicates that the object is returned at <tt class="docutils literal"><span class="pre">+1</span></tt>, and the caller
is responsible for freeing it.
Similiarly, the annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_returns_not_retained))</span></tt>
specifies that the object is returned at <tt class="docutils literal"><span class="pre">+0</span></tt> and the ownership remains with
the callee.
The annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_consumes_self))</span></tt> specifies that
the Objective-C method call consumes the reference to <tt class="docutils literal"><span class="pre">self</span></tt>, e.g. by
attaching it to a supplied parameter.
Additionally, parameters can have an annotation
<tt class="docutils literal"><span class="pre">__attribute__((ns_consumed))</span></tt>, which specifies that passing an owned object
as that parameter effectively transfers the ownership, and the caller is no
longer responsible for it.
These attributes affect code generation when interacting with ARC code, and
they are used by the Clang Static Analyzer.</p>
<p>In C programs using CoreFoundation, a similar set of attributes:
<tt class="docutils literal"><span class="pre">__attribute__((cf_returns_not_retained))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((cf_returns_retained))</span></tt> and <tt class="docutils literal"><span class="pre">__attribute__((cf_consumed))</span></tt>
have the same respective semantics when applied to CoreFoundation objects.
These attributes affect code generation when interacting with ARC code, and
they are used by the Clang Static Analyzer.</p>
<p>Finally, in C++ interacting with XNU kernel (objects inheriting from OSObject),
the same attribute family is present:
<tt class="docutils literal"><span class="pre">__attribute__((os_returns_not_retained))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained))</span></tt> and <tt class="docutils literal"><span class="pre">__attribute__((os_consumed))</span></tt>,
with the same respective semantics.
Similar to <tt class="docutils literal"><span class="pre">__attribute__((ns_consumes_self))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((os_consumes_this))</span></tt> specifies that the method call consumes
the reference to &#8220;this&#8221; (e.g., when attaching it to a different object supplied
as a parameter).
Out parameters (parameters the function is meant to write into,
either via pointers-to-pointers or references-to-pointers)
may be annotated with <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained))</span></tt>
or <tt class="docutils literal"><span class="pre">__attribute__((os_returns_not_retained))</span></tt> which specifies that the object
written into the out parameter should (or respectively should not) be released
after use.
Since often out parameters may or may not be written depending on the exit
code of the function,
annotations <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained_on_zero))</span></tt>
and <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained_on_non_zero))</span></tt> specify that
an out parameter at <tt class="docutils literal"><span class="pre">+1</span></tt> is written if and only if the function returns a zero
(respectively non-zero) error code.
Observe that return-code-dependent out parameter annotations are only
available for retained out parameters, as non-retained object do not have to be
released by the callee.
These attributes are only used by the Clang Static Analyzer.</p>
<p>The family of attributes <tt class="docutils literal"><span class="pre">X_returns_X_retained</span></tt> can be added to functions,
C++ methods, and Objective-C methods and properties.
Attributes <tt class="docutils literal"><span class="pre">X_consumed</span></tt> can be added to parameters of methods, functions,
and Objective-C methods.</p>
</div>
<div class="section" id="ns-returns-autoreleased">
<h3><a class="toc-backref" href="#id76">ns_returns_autoreleased</a><a class="headerlink" href="#ns-returns-autoreleased" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ns_returns_autoreleased</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::ns_returns_autoreleased</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::ns_returns_autoreleased</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The behavior of a function with respect to reference counting for Foundation
(Objective-C), CoreFoundation (C) and OSObject (C++) is determined by a naming
convention (e.g. functions starting with &#8220;get&#8221; are assumed to return at
<tt class="docutils literal"><span class="pre">+0</span></tt>).</p>
<p>It can be overriden using a family of the following attributes.  In
Objective-C, the annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_returns_retained))</span></tt> applied to
a function communicates that the object is returned at <tt class="docutils literal"><span class="pre">+1</span></tt>, and the caller
is responsible for freeing it.
Similiarly, the annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_returns_not_retained))</span></tt>
specifies that the object is returned at <tt class="docutils literal"><span class="pre">+0</span></tt> and the ownership remains with
the callee.
The annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_consumes_self))</span></tt> specifies that
the Objective-C method call consumes the reference to <tt class="docutils literal"><span class="pre">self</span></tt>, e.g. by
attaching it to a supplied parameter.
Additionally, parameters can have an annotation
<tt class="docutils literal"><span class="pre">__attribute__((ns_consumed))</span></tt>, which specifies that passing an owned object
as that parameter effectively transfers the ownership, and the caller is no
longer responsible for it.
These attributes affect code generation when interacting with ARC code, and
they are used by the Clang Static Analyzer.</p>
<p>In C programs using CoreFoundation, a similar set of attributes:
<tt class="docutils literal"><span class="pre">__attribute__((cf_returns_not_retained))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((cf_returns_retained))</span></tt> and <tt class="docutils literal"><span class="pre">__attribute__((cf_consumed))</span></tt>
have the same respective semantics when applied to CoreFoundation objects.
These attributes affect code generation when interacting with ARC code, and
they are used by the Clang Static Analyzer.</p>
<p>Finally, in C++ interacting with XNU kernel (objects inheriting from OSObject),
the same attribute family is present:
<tt class="docutils literal"><span class="pre">__attribute__((os_returns_not_retained))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained))</span></tt> and <tt class="docutils literal"><span class="pre">__attribute__((os_consumed))</span></tt>,
with the same respective semantics.
Similar to <tt class="docutils literal"><span class="pre">__attribute__((ns_consumes_self))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((os_consumes_this))</span></tt> specifies that the method call consumes
the reference to &#8220;this&#8221; (e.g., when attaching it to a different object supplied
as a parameter).
Out parameters (parameters the function is meant to write into,
either via pointers-to-pointers or references-to-pointers)
may be annotated with <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained))</span></tt>
or <tt class="docutils literal"><span class="pre">__attribute__((os_returns_not_retained))</span></tt> which specifies that the object
written into the out parameter should (or respectively should not) be released
after use.
Since often out parameters may or may not be written depending on the exit
code of the function,
annotations <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained_on_zero))</span></tt>
and <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained_on_non_zero))</span></tt> specify that
an out parameter at <tt class="docutils literal"><span class="pre">+1</span></tt> is written if and only if the function returns a zero
(respectively non-zero) error code.
Observe that return-code-dependent out parameter annotations are only
available for retained out parameters, as non-retained object do not have to be
released by the callee.
These attributes are only used by the Clang Static Analyzer.</p>
<p>The family of attributes <tt class="docutils literal"><span class="pre">X_returns_X_retained</span></tt> can be added to functions,
C++ methods, and Objective-C methods and properties.
Attributes <tt class="docutils literal"><span class="pre">X_consumed</span></tt> can be added to parameters of methods, functions,
and Objective-C methods.</p>
</div>
<div class="section" id="ns-returns-not-retained">
<h3><a class="toc-backref" href="#id77">ns_returns_not_retained</a><a class="headerlink" href="#ns-returns-not-retained" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ns_returns_not_retained</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::ns_returns_not_retained</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::ns_returns_not_retained</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The behavior of a function with respect to reference counting for Foundation
(Objective-C), CoreFoundation (C) and OSObject (C++) is determined by a naming
convention (e.g. functions starting with &#8220;get&#8221; are assumed to return at
<tt class="docutils literal"><span class="pre">+0</span></tt>).</p>
<p>It can be overriden using a family of the following attributes.  In
Objective-C, the annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_returns_retained))</span></tt> applied to
a function communicates that the object is returned at <tt class="docutils literal"><span class="pre">+1</span></tt>, and the caller
is responsible for freeing it.
Similiarly, the annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_returns_not_retained))</span></tt>
specifies that the object is returned at <tt class="docutils literal"><span class="pre">+0</span></tt> and the ownership remains with
the callee.
The annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_consumes_self))</span></tt> specifies that
the Objective-C method call consumes the reference to <tt class="docutils literal"><span class="pre">self</span></tt>, e.g. by
attaching it to a supplied parameter.
Additionally, parameters can have an annotation
<tt class="docutils literal"><span class="pre">__attribute__((ns_consumed))</span></tt>, which specifies that passing an owned object
as that parameter effectively transfers the ownership, and the caller is no
longer responsible for it.
These attributes affect code generation when interacting with ARC code, and
they are used by the Clang Static Analyzer.</p>
<p>In C programs using CoreFoundation, a similar set of attributes:
<tt class="docutils literal"><span class="pre">__attribute__((cf_returns_not_retained))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((cf_returns_retained))</span></tt> and <tt class="docutils literal"><span class="pre">__attribute__((cf_consumed))</span></tt>
have the same respective semantics when applied to CoreFoundation objects.
These attributes affect code generation when interacting with ARC code, and
they are used by the Clang Static Analyzer.</p>
<p>Finally, in C++ interacting with XNU kernel (objects inheriting from OSObject),
the same attribute family is present:
<tt class="docutils literal"><span class="pre">__attribute__((os_returns_not_retained))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained))</span></tt> and <tt class="docutils literal"><span class="pre">__attribute__((os_consumed))</span></tt>,
with the same respective semantics.
Similar to <tt class="docutils literal"><span class="pre">__attribute__((ns_consumes_self))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((os_consumes_this))</span></tt> specifies that the method call consumes
the reference to &#8220;this&#8221; (e.g., when attaching it to a different object supplied
as a parameter).
Out parameters (parameters the function is meant to write into,
either via pointers-to-pointers or references-to-pointers)
may be annotated with <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained))</span></tt>
or <tt class="docutils literal"><span class="pre">__attribute__((os_returns_not_retained))</span></tt> which specifies that the object
written into the out parameter should (or respectively should not) be released
after use.
Since often out parameters may or may not be written depending on the exit
code of the function,
annotations <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained_on_zero))</span></tt>
and <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained_on_non_zero))</span></tt> specify that
an out parameter at <tt class="docutils literal"><span class="pre">+1</span></tt> is written if and only if the function returns a zero
(respectively non-zero) error code.
Observe that return-code-dependent out parameter annotations are only
available for retained out parameters, as non-retained object do not have to be
released by the callee.
These attributes are only used by the Clang Static Analyzer.</p>
<p>The family of attributes <tt class="docutils literal"><span class="pre">X_returns_X_retained</span></tt> can be added to functions,
C++ methods, and Objective-C methods and properties.
Attributes <tt class="docutils literal"><span class="pre">X_consumed</span></tt> can be added to parameters of methods, functions,
and Objective-C methods.</p>
</div>
<div class="section" id="ns-returns-retained">
<h3><a class="toc-backref" href="#id78">ns_returns_retained</a><a class="headerlink" href="#ns-returns-retained" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ns_returns_retained</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::ns_returns_retained</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::ns_returns_retained</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The behavior of a function with respect to reference counting for Foundation
(Objective-C), CoreFoundation (C) and OSObject (C++) is determined by a naming
convention (e.g. functions starting with &#8220;get&#8221; are assumed to return at
<tt class="docutils literal"><span class="pre">+0</span></tt>).</p>
<p>It can be overriden using a family of the following attributes.  In
Objective-C, the annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_returns_retained))</span></tt> applied to
a function communicates that the object is returned at <tt class="docutils literal"><span class="pre">+1</span></tt>, and the caller
is responsible for freeing it.
Similiarly, the annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_returns_not_retained))</span></tt>
specifies that the object is returned at <tt class="docutils literal"><span class="pre">+0</span></tt> and the ownership remains with
the callee.
The annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_consumes_self))</span></tt> specifies that
the Objective-C method call consumes the reference to <tt class="docutils literal"><span class="pre">self</span></tt>, e.g. by
attaching it to a supplied parameter.
Additionally, parameters can have an annotation
<tt class="docutils literal"><span class="pre">__attribute__((ns_consumed))</span></tt>, which specifies that passing an owned object
as that parameter effectively transfers the ownership, and the caller is no
longer responsible for it.
These attributes affect code generation when interacting with ARC code, and
they are used by the Clang Static Analyzer.</p>
<p>In C programs using CoreFoundation, a similar set of attributes:
<tt class="docutils literal"><span class="pre">__attribute__((cf_returns_not_retained))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((cf_returns_retained))</span></tt> and <tt class="docutils literal"><span class="pre">__attribute__((cf_consumed))</span></tt>
have the same respective semantics when applied to CoreFoundation objects.
These attributes affect code generation when interacting with ARC code, and
they are used by the Clang Static Analyzer.</p>
<p>Finally, in C++ interacting with XNU kernel (objects inheriting from OSObject),
the same attribute family is present:
<tt class="docutils literal"><span class="pre">__attribute__((os_returns_not_retained))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained))</span></tt> and <tt class="docutils literal"><span class="pre">__attribute__((os_consumed))</span></tt>,
with the same respective semantics.
Similar to <tt class="docutils literal"><span class="pre">__attribute__((ns_consumes_self))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((os_consumes_this))</span></tt> specifies that the method call consumes
the reference to &#8220;this&#8221; (e.g., when attaching it to a different object supplied
as a parameter).
Out parameters (parameters the function is meant to write into,
either via pointers-to-pointers or references-to-pointers)
may be annotated with <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained))</span></tt>
or <tt class="docutils literal"><span class="pre">__attribute__((os_returns_not_retained))</span></tt> which specifies that the object
written into the out parameter should (or respectively should not) be released
after use.
Since often out parameters may or may not be written depending on the exit
code of the function,
annotations <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained_on_zero))</span></tt>
and <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained_on_non_zero))</span></tt> specify that
an out parameter at <tt class="docutils literal"><span class="pre">+1</span></tt> is written if and only if the function returns a zero
(respectively non-zero) error code.
Observe that return-code-dependent out parameter annotations are only
available for retained out parameters, as non-retained object do not have to be
released by the callee.
These attributes are only used by the Clang Static Analyzer.</p>
<p>The family of attributes <tt class="docutils literal"><span class="pre">X_returns_X_retained</span></tt> can be added to functions,
C++ methods, and Objective-C methods and properties.
Attributes <tt class="docutils literal"><span class="pre">X_consumed</span></tt> can be added to parameters of methods, functions,
and Objective-C methods.</p>
</div>
<div class="section" id="objc-boxable">
<h3><a class="toc-backref" href="#id79">objc_boxable</a><a class="headerlink" href="#objc-boxable" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">objc_boxable</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::objc_boxable</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::objc_boxable</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Structs and unions marked with the <tt class="docutils literal"><span class="pre">objc_boxable</span></tt> attribute can be used
with the Objective-C boxed expression syntax, <tt class="docutils literal"><span class="pre">&#64;(...)</span></tt>.</p>
<p><strong>Usage</strong>: <tt class="docutils literal"><span class="pre">__attribute__((objc_boxable))</span></tt>. This attribute
can only be placed on a declaration of a trivially-copyable struct or union:</p>
<div class="highlight-objc"><pre>struct __attribute__((objc_boxable)) some_struct {
  int i;
};
union __attribute__((objc_boxable)) some_union {
  int i;
  float f;
};
typedef struct __attribute__((objc_boxable)) _some_struct some_struct;

// ...

some_struct ss;
NSValue *boxed = @(ss);</pre>
</div>
</div>
<div class="section" id="objc-method-family">
<h3><a class="toc-backref" href="#id80">objc_method_family</a><a class="headerlink" href="#objc-method-family" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">objc_method_family</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::objc_method_family</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::objc_method_family</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Many methods in Objective-C have conventional meanings determined by their
selectors. It is sometimes useful to be able to mark a method as having a
particular conventional meaning despite not having the right selector, or as
not having the conventional meaning that its selector would suggest. For these
use cases, we provide an attribute to specifically describe the &#8220;method family&#8221;
that a method belongs to.</p>
<p><strong>Usage</strong>: <tt class="docutils literal"><span class="pre">__attribute__((objc_method_family(X)))</span></tt>, where <tt class="docutils literal"><span class="pre">X</span></tt> is one of
<tt class="docutils literal"><span class="pre">none</span></tt>, <tt class="docutils literal"><span class="pre">alloc</span></tt>, <tt class="docutils literal"><span class="pre">copy</span></tt>, <tt class="docutils literal"><span class="pre">init</span></tt>, <tt class="docutils literal"><span class="pre">mutableCopy</span></tt>, or <tt class="docutils literal"><span class="pre">new</span></tt>.  This
attribute can only be placed at the end of a method declaration:</p>
<div class="highlight-objc"><div class="highlight"><pre><span class="k">-</span> <span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nf">initMyStringValue</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">objc_method_family</span><span class="p">(</span><span class="n">none</span><span class="p">)));</span>
</pre></div>
</div>
<p>Users who do not wish to change the conventional meaning of a method, and who
merely want to document its non-standard retain and release semantics, should
use the retaining behavior attributes (<tt class="docutils literal"><span class="pre">ns_returns_retained</span></tt>,
<tt class="docutils literal"><span class="pre">ns_returns_not_retained</span></tt>, etc).</p>
<p>Query for this feature with <tt class="docutils literal"><span class="pre">__has_attribute(objc_method_family)</span></tt>.</p>
</div>
<div class="section" id="objc-requires-super">
<h3><a class="toc-backref" href="#id81">objc_requires_super</a><a class="headerlink" href="#objc-requires-super" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">objc_requires_super</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::objc_requires_super</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::objc_requires_super</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Some Objective-C classes allow a subclass to override a particular method in a
parent class but expect that the overriding method also calls the overridden
method in the parent class. For these cases, we provide an attribute to
designate that a method requires a &#8220;call to <tt class="docutils literal"><span class="pre">super</span></tt>&#8221; in the overriding
method in the subclass.</p>
<p><strong>Usage</strong>: <tt class="docutils literal"><span class="pre">__attribute__((objc_requires_super))</span></tt>.  This attribute can only
be placed at the end of a method declaration:</p>
<div class="highlight-objc"><div class="highlight"><pre><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">foo</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">objc_requires_super</span><span class="p">));</span>
</pre></div>
</div>
<p>This attribute can only be applied the method declarations within a class, and
not a protocol.  Currently this attribute does not enforce any placement of
where the call occurs in the overriding method (such as in the case of
<tt class="docutils literal"><span class="pre">-dealloc</span></tt> where the call must appear at the end).  It checks only that it
exists.</p>
<p>Note that on both OS X and iOS that the Foundation framework provides a
convenience macro <tt class="docutils literal"><span class="pre">NS_REQUIRES_SUPER</span></tt> that provides syntactic sugar for this
attribute:</p>
<div class="highlight-objc"><div class="highlight"><pre><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">foo</span> <span class="n">NS_REQUIRES_SUPER</span><span class="p">;</span>
</pre></div>
</div>
<p>This macro is conditionally defined depending on the compiler&#8217;s support for
this attribute.  If the compiler does not support the attribute the macro
expands to nothing.</p>
<p>Operationally, when a method has this annotation the compiler will warn if the
implementation of an override in a subclass does not call super.  For example:</p>
<div class="highlight-objc"><div class="highlight"><pre><span class="nl">warning:</span> <span class="n">method</span> <span class="n">possibly</span> <span class="n">missing</span> <span class="n">a</span> <span class="p">[</span><span class="n">super</span> <span class="n">AnnotMeth</span><span class="p">]</span> <span class="n">call</span>
<span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="n">AnnotMeth</span><span class="p">{};</span>
                   <span class="o">^</span>
</pre></div>
</div>
</div>
<div class="section" id="objc-runtime-name">
<h3><a class="toc-backref" href="#id82">objc_runtime_name</a><a class="headerlink" href="#objc-runtime-name" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">objc_runtime_name</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::objc_runtime_name</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::objc_runtime_name</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>By default, the Objective-C interface or protocol identifier is used
in the metadata name for that object. The <cite>objc_runtime_name</cite>
attribute allows annotated interfaces or protocols to use the
specified string argument in the object&#8217;s metadata name instead of the
default name.</p>
<p><strong>Usage</strong>: <tt class="docutils literal"><span class="pre">__attribute__((objc_runtime_name(&quot;MyLocalName&quot;)))</span></tt>.  This attribute
can only be placed before an &#64;protocol or &#64;interface declaration:</p>
<div class="highlight-objc"><pre>__attribute__((objc_runtime_name("MyLocalName")))
@interface Message
@end</pre>
</div>
</div>
<div class="section" id="objc-runtime-visible">
<h3><a class="toc-backref" href="#id83">objc_runtime_visible</a><a class="headerlink" href="#objc-runtime-visible" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">objc_runtime_visible</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::objc_runtime_visible</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::objc_runtime_visible</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>This attribute specifies that the Objective-C class to which it applies is visible to the Objective-C runtime but not to the linker. Classes annotated with this attribute cannot be subclassed and cannot have categories defined for them.</p>
</div>
<div class="section" id="optnone">
<h3><a class="toc-backref" href="#id84">optnone</a><a class="headerlink" href="#optnone" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">optnone</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::optnone</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::optnone</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">optnone</span></tt> attribute suppresses essentially all optimizations
on a function or method, regardless of the optimization level applied to
the compilation unit as a whole.  This is particularly useful when you
need to debug a particular function, but it is infeasible to build the
entire application without optimization.  Avoiding optimization on the
specified function can improve the quality of the debugging information
for that function.</p>
<p>This attribute is incompatible with the <tt class="docutils literal"><span class="pre">always_inline</span></tt> and <tt class="docutils literal"><span class="pre">minsize</span></tt>
attributes.</p>
</div>
<div class="section" id="os-consumed">
<h3><a class="toc-backref" href="#id85">os_consumed</a><a class="headerlink" href="#os-consumed" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">os_consumed</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::os_consumed</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::os_consumed</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The behavior of a function with respect to reference counting for Foundation
(Objective-C), CoreFoundation (C) and OSObject (C++) is determined by a naming
convention (e.g. functions starting with &#8220;get&#8221; are assumed to return at
<tt class="docutils literal"><span class="pre">+0</span></tt>).</p>
<p>It can be overriden using a family of the following attributes.  In
Objective-C, the annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_returns_retained))</span></tt> applied to
a function communicates that the object is returned at <tt class="docutils literal"><span class="pre">+1</span></tt>, and the caller
is responsible for freeing it.
Similiarly, the annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_returns_not_retained))</span></tt>
specifies that the object is returned at <tt class="docutils literal"><span class="pre">+0</span></tt> and the ownership remains with
the callee.
The annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_consumes_self))</span></tt> specifies that
the Objective-C method call consumes the reference to <tt class="docutils literal"><span class="pre">self</span></tt>, e.g. by
attaching it to a supplied parameter.
Additionally, parameters can have an annotation
<tt class="docutils literal"><span class="pre">__attribute__((ns_consumed))</span></tt>, which specifies that passing an owned object
as that parameter effectively transfers the ownership, and the caller is no
longer responsible for it.
These attributes affect code generation when interacting with ARC code, and
they are used by the Clang Static Analyzer.</p>
<p>In C programs using CoreFoundation, a similar set of attributes:
<tt class="docutils literal"><span class="pre">__attribute__((cf_returns_not_retained))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((cf_returns_retained))</span></tt> and <tt class="docutils literal"><span class="pre">__attribute__((cf_consumed))</span></tt>
have the same respective semantics when applied to CoreFoundation objects.
These attributes affect code generation when interacting with ARC code, and
they are used by the Clang Static Analyzer.</p>
<p>Finally, in C++ interacting with XNU kernel (objects inheriting from OSObject),
the same attribute family is present:
<tt class="docutils literal"><span class="pre">__attribute__((os_returns_not_retained))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained))</span></tt> and <tt class="docutils literal"><span class="pre">__attribute__((os_consumed))</span></tt>,
with the same respective semantics.
Similar to <tt class="docutils literal"><span class="pre">__attribute__((ns_consumes_self))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((os_consumes_this))</span></tt> specifies that the method call consumes
the reference to &#8220;this&#8221; (e.g., when attaching it to a different object supplied
as a parameter).
Out parameters (parameters the function is meant to write into,
either via pointers-to-pointers or references-to-pointers)
may be annotated with <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained))</span></tt>
or <tt class="docutils literal"><span class="pre">__attribute__((os_returns_not_retained))</span></tt> which specifies that the object
written into the out parameter should (or respectively should not) be released
after use.
Since often out parameters may or may not be written depending on the exit
code of the function,
annotations <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained_on_zero))</span></tt>
and <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained_on_non_zero))</span></tt> specify that
an out parameter at <tt class="docutils literal"><span class="pre">+1</span></tt> is written if and only if the function returns a zero
(respectively non-zero) error code.
Observe that return-code-dependent out parameter annotations are only
available for retained out parameters, as non-retained object do not have to be
released by the callee.
These attributes are only used by the Clang Static Analyzer.</p>
<p>The family of attributes <tt class="docutils literal"><span class="pre">X_returns_X_retained</span></tt> can be added to functions,
C++ methods, and Objective-C methods and properties.
Attributes <tt class="docutils literal"><span class="pre">X_consumed</span></tt> can be added to parameters of methods, functions,
and Objective-C methods.</p>
</div>
<div class="section" id="os-consumes-this">
<h3><a class="toc-backref" href="#id86">os_consumes_this</a><a class="headerlink" href="#os-consumes-this" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">os_consumes_this</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::os_consumes_this</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::os_consumes_this</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The behavior of a function with respect to reference counting for Foundation
(Objective-C), CoreFoundation (C) and OSObject (C++) is determined by a naming
convention (e.g. functions starting with &#8220;get&#8221; are assumed to return at
<tt class="docutils literal"><span class="pre">+0</span></tt>).</p>
<p>It can be overriden using a family of the following attributes.  In
Objective-C, the annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_returns_retained))</span></tt> applied to
a function communicates that the object is returned at <tt class="docutils literal"><span class="pre">+1</span></tt>, and the caller
is responsible for freeing it.
Similiarly, the annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_returns_not_retained))</span></tt>
specifies that the object is returned at <tt class="docutils literal"><span class="pre">+0</span></tt> and the ownership remains with
the callee.
The annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_consumes_self))</span></tt> specifies that
the Objective-C method call consumes the reference to <tt class="docutils literal"><span class="pre">self</span></tt>, e.g. by
attaching it to a supplied parameter.
Additionally, parameters can have an annotation
<tt class="docutils literal"><span class="pre">__attribute__((ns_consumed))</span></tt>, which specifies that passing an owned object
as that parameter effectively transfers the ownership, and the caller is no
longer responsible for it.
These attributes affect code generation when interacting with ARC code, and
they are used by the Clang Static Analyzer.</p>
<p>In C programs using CoreFoundation, a similar set of attributes:
<tt class="docutils literal"><span class="pre">__attribute__((cf_returns_not_retained))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((cf_returns_retained))</span></tt> and <tt class="docutils literal"><span class="pre">__attribute__((cf_consumed))</span></tt>
have the same respective semantics when applied to CoreFoundation objects.
These attributes affect code generation when interacting with ARC code, and
they are used by the Clang Static Analyzer.</p>
<p>Finally, in C++ interacting with XNU kernel (objects inheriting from OSObject),
the same attribute family is present:
<tt class="docutils literal"><span class="pre">__attribute__((os_returns_not_retained))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained))</span></tt> and <tt class="docutils literal"><span class="pre">__attribute__((os_consumed))</span></tt>,
with the same respective semantics.
Similar to <tt class="docutils literal"><span class="pre">__attribute__((ns_consumes_self))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((os_consumes_this))</span></tt> specifies that the method call consumes
the reference to &#8220;this&#8221; (e.g., when attaching it to a different object supplied
as a parameter).
Out parameters (parameters the function is meant to write into,
either via pointers-to-pointers or references-to-pointers)
may be annotated with <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained))</span></tt>
or <tt class="docutils literal"><span class="pre">__attribute__((os_returns_not_retained))</span></tt> which specifies that the object
written into the out parameter should (or respectively should not) be released
after use.
Since often out parameters may or may not be written depending on the exit
code of the function,
annotations <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained_on_zero))</span></tt>
and <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained_on_non_zero))</span></tt> specify that
an out parameter at <tt class="docutils literal"><span class="pre">+1</span></tt> is written if and only if the function returns a zero
(respectively non-zero) error code.
Observe that return-code-dependent out parameter annotations are only
available for retained out parameters, as non-retained object do not have to be
released by the callee.
These attributes are only used by the Clang Static Analyzer.</p>
<p>The family of attributes <tt class="docutils literal"><span class="pre">X_returns_X_retained</span></tt> can be added to functions,
C++ methods, and Objective-C methods and properties.
Attributes <tt class="docutils literal"><span class="pre">X_consumed</span></tt> can be added to parameters of methods, functions,
and Objective-C methods.</p>
</div>
<div class="section" id="os-returns-not-retained">
<h3><a class="toc-backref" href="#id87">os_returns_not_retained</a><a class="headerlink" href="#os-returns-not-retained" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">os_returns_not_retained</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::os_returns_not_retained</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::os_returns_not_retained</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The behavior of a function with respect to reference counting for Foundation
(Objective-C), CoreFoundation (C) and OSObject (C++) is determined by a naming
convention (e.g. functions starting with &#8220;get&#8221; are assumed to return at
<tt class="docutils literal"><span class="pre">+0</span></tt>).</p>
<p>It can be overriden using a family of the following attributes.  In
Objective-C, the annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_returns_retained))</span></tt> applied to
a function communicates that the object is returned at <tt class="docutils literal"><span class="pre">+1</span></tt>, and the caller
is responsible for freeing it.
Similiarly, the annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_returns_not_retained))</span></tt>
specifies that the object is returned at <tt class="docutils literal"><span class="pre">+0</span></tt> and the ownership remains with
the callee.
The annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_consumes_self))</span></tt> specifies that
the Objective-C method call consumes the reference to <tt class="docutils literal"><span class="pre">self</span></tt>, e.g. by
attaching it to a supplied parameter.
Additionally, parameters can have an annotation
<tt class="docutils literal"><span class="pre">__attribute__((ns_consumed))</span></tt>, which specifies that passing an owned object
as that parameter effectively transfers the ownership, and the caller is no
longer responsible for it.
These attributes affect code generation when interacting with ARC code, and
they are used by the Clang Static Analyzer.</p>
<p>In C programs using CoreFoundation, a similar set of attributes:
<tt class="docutils literal"><span class="pre">__attribute__((cf_returns_not_retained))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((cf_returns_retained))</span></tt> and <tt class="docutils literal"><span class="pre">__attribute__((cf_consumed))</span></tt>
have the same respective semantics when applied to CoreFoundation objects.
These attributes affect code generation when interacting with ARC code, and
they are used by the Clang Static Analyzer.</p>
<p>Finally, in C++ interacting with XNU kernel (objects inheriting from OSObject),
the same attribute family is present:
<tt class="docutils literal"><span class="pre">__attribute__((os_returns_not_retained))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained))</span></tt> and <tt class="docutils literal"><span class="pre">__attribute__((os_consumed))</span></tt>,
with the same respective semantics.
Similar to <tt class="docutils literal"><span class="pre">__attribute__((ns_consumes_self))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((os_consumes_this))</span></tt> specifies that the method call consumes
the reference to &#8220;this&#8221; (e.g., when attaching it to a different object supplied
as a parameter).
Out parameters (parameters the function is meant to write into,
either via pointers-to-pointers or references-to-pointers)
may be annotated with <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained))</span></tt>
or <tt class="docutils literal"><span class="pre">__attribute__((os_returns_not_retained))</span></tt> which specifies that the object
written into the out parameter should (or respectively should not) be released
after use.
Since often out parameters may or may not be written depending on the exit
code of the function,
annotations <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained_on_zero))</span></tt>
and <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained_on_non_zero))</span></tt> specify that
an out parameter at <tt class="docutils literal"><span class="pre">+1</span></tt> is written if and only if the function returns a zero
(respectively non-zero) error code.
Observe that return-code-dependent out parameter annotations are only
available for retained out parameters, as non-retained object do not have to be
released by the callee.
These attributes are only used by the Clang Static Analyzer.</p>
<p>The family of attributes <tt class="docutils literal"><span class="pre">X_returns_X_retained</span></tt> can be added to functions,
C++ methods, and Objective-C methods and properties.
Attributes <tt class="docutils literal"><span class="pre">X_consumed</span></tt> can be added to parameters of methods, functions,
and Objective-C methods.</p>
</div>
<div class="section" id="os-returns-retained">
<h3><a class="toc-backref" href="#id88">os_returns_retained</a><a class="headerlink" href="#os-returns-retained" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">os_returns_retained</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::os_returns_retained</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::os_returns_retained</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The behavior of a function with respect to reference counting for Foundation
(Objective-C), CoreFoundation (C) and OSObject (C++) is determined by a naming
convention (e.g. functions starting with &#8220;get&#8221; are assumed to return at
<tt class="docutils literal"><span class="pre">+0</span></tt>).</p>
<p>It can be overriden using a family of the following attributes.  In
Objective-C, the annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_returns_retained))</span></tt> applied to
a function communicates that the object is returned at <tt class="docutils literal"><span class="pre">+1</span></tt>, and the caller
is responsible for freeing it.
Similiarly, the annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_returns_not_retained))</span></tt>
specifies that the object is returned at <tt class="docutils literal"><span class="pre">+0</span></tt> and the ownership remains with
the callee.
The annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_consumes_self))</span></tt> specifies that
the Objective-C method call consumes the reference to <tt class="docutils literal"><span class="pre">self</span></tt>, e.g. by
attaching it to a supplied parameter.
Additionally, parameters can have an annotation
<tt class="docutils literal"><span class="pre">__attribute__((ns_consumed))</span></tt>, which specifies that passing an owned object
as that parameter effectively transfers the ownership, and the caller is no
longer responsible for it.
These attributes affect code generation when interacting with ARC code, and
they are used by the Clang Static Analyzer.</p>
<p>In C programs using CoreFoundation, a similar set of attributes:
<tt class="docutils literal"><span class="pre">__attribute__((cf_returns_not_retained))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((cf_returns_retained))</span></tt> and <tt class="docutils literal"><span class="pre">__attribute__((cf_consumed))</span></tt>
have the same respective semantics when applied to CoreFoundation objects.
These attributes affect code generation when interacting with ARC code, and
they are used by the Clang Static Analyzer.</p>
<p>Finally, in C++ interacting with XNU kernel (objects inheriting from OSObject),
the same attribute family is present:
<tt class="docutils literal"><span class="pre">__attribute__((os_returns_not_retained))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained))</span></tt> and <tt class="docutils literal"><span class="pre">__attribute__((os_consumed))</span></tt>,
with the same respective semantics.
Similar to <tt class="docutils literal"><span class="pre">__attribute__((ns_consumes_self))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((os_consumes_this))</span></tt> specifies that the method call consumes
the reference to &#8220;this&#8221; (e.g., when attaching it to a different object supplied
as a parameter).
Out parameters (parameters the function is meant to write into,
either via pointers-to-pointers or references-to-pointers)
may be annotated with <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained))</span></tt>
or <tt class="docutils literal"><span class="pre">__attribute__((os_returns_not_retained))</span></tt> which specifies that the object
written into the out parameter should (or respectively should not) be released
after use.
Since often out parameters may or may not be written depending on the exit
code of the function,
annotations <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained_on_zero))</span></tt>
and <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained_on_non_zero))</span></tt> specify that
an out parameter at <tt class="docutils literal"><span class="pre">+1</span></tt> is written if and only if the function returns a zero
(respectively non-zero) error code.
Observe that return-code-dependent out parameter annotations are only
available for retained out parameters, as non-retained object do not have to be
released by the callee.
These attributes are only used by the Clang Static Analyzer.</p>
<p>The family of attributes <tt class="docutils literal"><span class="pre">X_returns_X_retained</span></tt> can be added to functions,
C++ methods, and Objective-C methods and properties.
Attributes <tt class="docutils literal"><span class="pre">X_consumed</span></tt> can be added to parameters of methods, functions,
and Objective-C methods.</p>
</div>
<div class="section" id="os-returns-retained-on-non-zero">
<h3><a class="toc-backref" href="#id89">os_returns_retained_on_non_zero</a><a class="headerlink" href="#os-returns-retained-on-non-zero" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">os_returns_retained_on_non_zero</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::os_returns_retained_on_non_zero</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::os_returns_retained_on_non_zero</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The behavior of a function with respect to reference counting for Foundation
(Objective-C), CoreFoundation (C) and OSObject (C++) is determined by a naming
convention (e.g. functions starting with &#8220;get&#8221; are assumed to return at
<tt class="docutils literal"><span class="pre">+0</span></tt>).</p>
<p>It can be overriden using a family of the following attributes.  In
Objective-C, the annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_returns_retained))</span></tt> applied to
a function communicates that the object is returned at <tt class="docutils literal"><span class="pre">+1</span></tt>, and the caller
is responsible for freeing it.
Similiarly, the annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_returns_not_retained))</span></tt>
specifies that the object is returned at <tt class="docutils literal"><span class="pre">+0</span></tt> and the ownership remains with
the callee.
The annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_consumes_self))</span></tt> specifies that
the Objective-C method call consumes the reference to <tt class="docutils literal"><span class="pre">self</span></tt>, e.g. by
attaching it to a supplied parameter.
Additionally, parameters can have an annotation
<tt class="docutils literal"><span class="pre">__attribute__((ns_consumed))</span></tt>, which specifies that passing an owned object
as that parameter effectively transfers the ownership, and the caller is no
longer responsible for it.
These attributes affect code generation when interacting with ARC code, and
they are used by the Clang Static Analyzer.</p>
<p>In C programs using CoreFoundation, a similar set of attributes:
<tt class="docutils literal"><span class="pre">__attribute__((cf_returns_not_retained))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((cf_returns_retained))</span></tt> and <tt class="docutils literal"><span class="pre">__attribute__((cf_consumed))</span></tt>
have the same respective semantics when applied to CoreFoundation objects.
These attributes affect code generation when interacting with ARC code, and
they are used by the Clang Static Analyzer.</p>
<p>Finally, in C++ interacting with XNU kernel (objects inheriting from OSObject),
the same attribute family is present:
<tt class="docutils literal"><span class="pre">__attribute__((os_returns_not_retained))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained))</span></tt> and <tt class="docutils literal"><span class="pre">__attribute__((os_consumed))</span></tt>,
with the same respective semantics.
Similar to <tt class="docutils literal"><span class="pre">__attribute__((ns_consumes_self))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((os_consumes_this))</span></tt> specifies that the method call consumes
the reference to &#8220;this&#8221; (e.g., when attaching it to a different object supplied
as a parameter).
Out parameters (parameters the function is meant to write into,
either via pointers-to-pointers or references-to-pointers)
may be annotated with <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained))</span></tt>
or <tt class="docutils literal"><span class="pre">__attribute__((os_returns_not_retained))</span></tt> which specifies that the object
written into the out parameter should (or respectively should not) be released
after use.
Since often out parameters may or may not be written depending on the exit
code of the function,
annotations <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained_on_zero))</span></tt>
and <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained_on_non_zero))</span></tt> specify that
an out parameter at <tt class="docutils literal"><span class="pre">+1</span></tt> is written if and only if the function returns a zero
(respectively non-zero) error code.
Observe that return-code-dependent out parameter annotations are only
available for retained out parameters, as non-retained object do not have to be
released by the callee.
These attributes are only used by the Clang Static Analyzer.</p>
<p>The family of attributes <tt class="docutils literal"><span class="pre">X_returns_X_retained</span></tt> can be added to functions,
C++ methods, and Objective-C methods and properties.
Attributes <tt class="docutils literal"><span class="pre">X_consumed</span></tt> can be added to parameters of methods, functions,
and Objective-C methods.</p>
</div>
<div class="section" id="os-returns-retained-on-zero">
<h3><a class="toc-backref" href="#id90">os_returns_retained_on_zero</a><a class="headerlink" href="#os-returns-retained-on-zero" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">os_returns_retained_on_zero</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::os_returns_retained_on_zero</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::os_returns_retained_on_zero</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The behavior of a function with respect to reference counting for Foundation
(Objective-C), CoreFoundation (C) and OSObject (C++) is determined by a naming
convention (e.g. functions starting with &#8220;get&#8221; are assumed to return at
<tt class="docutils literal"><span class="pre">+0</span></tt>).</p>
<p>It can be overriden using a family of the following attributes.  In
Objective-C, the annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_returns_retained))</span></tt> applied to
a function communicates that the object is returned at <tt class="docutils literal"><span class="pre">+1</span></tt>, and the caller
is responsible for freeing it.
Similiarly, the annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_returns_not_retained))</span></tt>
specifies that the object is returned at <tt class="docutils literal"><span class="pre">+0</span></tt> and the ownership remains with
the callee.
The annotation <tt class="docutils literal"><span class="pre">__attribute__((ns_consumes_self))</span></tt> specifies that
the Objective-C method call consumes the reference to <tt class="docutils literal"><span class="pre">self</span></tt>, e.g. by
attaching it to a supplied parameter.
Additionally, parameters can have an annotation
<tt class="docutils literal"><span class="pre">__attribute__((ns_consumed))</span></tt>, which specifies that passing an owned object
as that parameter effectively transfers the ownership, and the caller is no
longer responsible for it.
These attributes affect code generation when interacting with ARC code, and
they are used by the Clang Static Analyzer.</p>
<p>In C programs using CoreFoundation, a similar set of attributes:
<tt class="docutils literal"><span class="pre">__attribute__((cf_returns_not_retained))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((cf_returns_retained))</span></tt> and <tt class="docutils literal"><span class="pre">__attribute__((cf_consumed))</span></tt>
have the same respective semantics when applied to CoreFoundation objects.
These attributes affect code generation when interacting with ARC code, and
they are used by the Clang Static Analyzer.</p>
<p>Finally, in C++ interacting with XNU kernel (objects inheriting from OSObject),
the same attribute family is present:
<tt class="docutils literal"><span class="pre">__attribute__((os_returns_not_retained))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained))</span></tt> and <tt class="docutils literal"><span class="pre">__attribute__((os_consumed))</span></tt>,
with the same respective semantics.
Similar to <tt class="docutils literal"><span class="pre">__attribute__((ns_consumes_self))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((os_consumes_this))</span></tt> specifies that the method call consumes
the reference to &#8220;this&#8221; (e.g., when attaching it to a different object supplied
as a parameter).
Out parameters (parameters the function is meant to write into,
either via pointers-to-pointers or references-to-pointers)
may be annotated with <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained))</span></tt>
or <tt class="docutils literal"><span class="pre">__attribute__((os_returns_not_retained))</span></tt> which specifies that the object
written into the out parameter should (or respectively should not) be released
after use.
Since often out parameters may or may not be written depending on the exit
code of the function,
annotations <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained_on_zero))</span></tt>
and <tt class="docutils literal"><span class="pre">__attribute__((os_returns_retained_on_non_zero))</span></tt> specify that
an out parameter at <tt class="docutils literal"><span class="pre">+1</span></tt> is written if and only if the function returns a zero
(respectively non-zero) error code.
Observe that return-code-dependent out parameter annotations are only
available for retained out parameters, as non-retained object do not have to be
released by the callee.
These attributes are only used by the Clang Static Analyzer.</p>
<p>The family of attributes <tt class="docutils literal"><span class="pre">X_returns_X_retained</span></tt> can be added to functions,
C++ methods, and Objective-C methods and properties.
Attributes <tt class="docutils literal"><span class="pre">X_consumed</span></tt> can be added to parameters of methods, functions,
and Objective-C methods.</p>
</div>
<div class="section" id="overloadable">
<h3><a class="toc-backref" href="#id91">overloadable</a><a class="headerlink" href="#overloadable" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">overloadable</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::overloadable</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::overloadable</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Clang provides support for C++ function overloading in C.  Function overloading
in C is introduced using the <tt class="docutils literal"><span class="pre">overloadable</span></tt> attribute.  For example, one
might provide several overloaded versions of a <tt class="docutils literal"><span class="pre">tgsin</span></tt> function that invokes
the appropriate standard function computing the sine of a value with <tt class="docutils literal"><span class="pre">float</span></tt>,
<tt class="docutils literal"><span class="pre">double</span></tt>, or <tt class="docutils literal"><span class="pre">long</span> <span class="pre">double</span></tt> precision:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;math.h&gt;</span>
<span class="kt">float</span> <span class="nf">__attribute__</span><span class="p">((</span><span class="n">overloadable</span><span class="p">))</span> <span class="n">tgsin</span><span class="p">(</span><span class="kt">float</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">sinf</span><span class="p">(</span><span class="n">x</span><span class="p">);</span> <span class="p">}</span>
<span class="kt">double</span> <span class="nf">__attribute__</span><span class="p">((</span><span class="n">overloadable</span><span class="p">))</span> <span class="n">tgsin</span><span class="p">(</span><span class="kt">double</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">);</span> <span class="p">}</span>
<span class="kt">long</span> <span class="kt">double</span> <span class="nf">__attribute__</span><span class="p">((</span><span class="n">overloadable</span><span class="p">))</span> <span class="n">tgsin</span><span class="p">(</span><span class="kt">long</span> <span class="kt">double</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">sinl</span><span class="p">(</span><span class="n">x</span><span class="p">);</span> <span class="p">}</span>
</pre></div>
</div>
<p>Given these declarations, one can call <tt class="docutils literal"><span class="pre">tgsin</span></tt> with a <tt class="docutils literal"><span class="pre">float</span></tt> value to
receive a <tt class="docutils literal"><span class="pre">float</span></tt> result, with a <tt class="docutils literal"><span class="pre">double</span></tt> to receive a <tt class="docutils literal"><span class="pre">double</span></tt> result,
etc.  Function overloading in C follows the rules of C++ function overloading
to pick the best overload given the call arguments, with a few C-specific
semantics:</p>
<ul class="simple">
<li>Conversion from <tt class="docutils literal"><span class="pre">float</span></tt> or <tt class="docutils literal"><span class="pre">double</span></tt> to <tt class="docutils literal"><span class="pre">long</span> <span class="pre">double</span></tt> is ranked as a
floating-point promotion (per C99) rather than as a floating-point conversion
(as in C++).</li>
<li>A conversion from a pointer of type <tt class="docutils literal"><span class="pre">T*</span></tt> to a pointer of type <tt class="docutils literal"><span class="pre">U*</span></tt> is
considered a pointer conversion (with conversion rank) if <tt class="docutils literal"><span class="pre">T</span></tt> and <tt class="docutils literal"><span class="pre">U</span></tt> are
compatible types.</li>
<li>A conversion from type <tt class="docutils literal"><span class="pre">T</span></tt> to a value of type <tt class="docutils literal"><span class="pre">U</span></tt> is permitted if <tt class="docutils literal"><span class="pre">T</span></tt>
and <tt class="docutils literal"><span class="pre">U</span></tt> are compatible types.  This conversion is given &#8220;conversion&#8221; rank.</li>
<li>If no viable candidates are otherwise available, we allow a conversion from a
pointer of type <tt class="docutils literal"><span class="pre">T*</span></tt> to a pointer of type <tt class="docutils literal"><span class="pre">U*</span></tt>, where <tt class="docutils literal"><span class="pre">T</span></tt> and <tt class="docutils literal"><span class="pre">U</span></tt> are
incompatible. This conversion is ranked below all other types of conversions.
Please note: <tt class="docutils literal"><span class="pre">U</span></tt> lacking qualifiers that are present on <tt class="docutils literal"><span class="pre">T</span></tt> is sufficient
for <tt class="docutils literal"><span class="pre">T</span></tt> and <tt class="docutils literal"><span class="pre">U</span></tt> to be incompatible.</li>
</ul>
<p>The declaration of <tt class="docutils literal"><span class="pre">overloadable</span></tt> functions is restricted to function
declarations and definitions.  If a function is marked with the <tt class="docutils literal"><span class="pre">overloadable</span></tt>
attribute, then all declarations and definitions of functions with that name,
except for at most one (see the note below about unmarked overloads), must have
the <tt class="docutils literal"><span class="pre">overloadable</span></tt> attribute.  In addition, redeclarations of a function with
the <tt class="docutils literal"><span class="pre">overloadable</span></tt> attribute must have the <tt class="docutils literal"><span class="pre">overloadable</span></tt> attribute, and
redeclarations of a function without the <tt class="docutils literal"><span class="pre">overloadable</span></tt> attribute must <em>not</em>
have the <tt class="docutils literal"><span class="pre">overloadable</span></tt> attribute. e.g.,</p>
<div class="highlight-c"><div class="highlight"><pre><span class="kt">int</span> <span class="n">f</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">overloadable</span><span class="p">));</span>
<span class="kt">float</span> <span class="n">f</span><span class="p">(</span><span class="kt">float</span><span class="p">);</span> <span class="c1">// error: declaration of &quot;f&quot; must have the &quot;overloadable&quot; attribute</span>
<span class="kt">int</span> <span class="n">f</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span> <span class="c1">// error: redeclaration of &quot;f&quot; must have the &quot;overloadable&quot; attribute</span>

<span class="kt">int</span> <span class="n">g</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">overloadable</span><span class="p">));</span>
<span class="kt">int</span> <span class="nf">g</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span> <span class="c1">// error: redeclaration of &quot;g&quot; must also have the &quot;overloadable&quot; attribute</span>

<span class="kt">int</span> <span class="n">h</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">h</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">overloadable</span><span class="p">));</span> <span class="c1">// error: declaration of &quot;h&quot; must not</span>
                                          <span class="c1">// have the &quot;overloadable&quot; attribute</span>
</pre></div>
</div>
<p>Functions marked <tt class="docutils literal"><span class="pre">overloadable</span></tt> must have prototypes.  Therefore, the
following code is ill-formed:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="kt">int</span> <span class="n">h</span><span class="p">()</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">overloadable</span><span class="p">));</span> <span class="c1">// error: h does not have a prototype</span>
</pre></div>
</div>
<p>However, <tt class="docutils literal"><span class="pre">overloadable</span></tt> functions are allowed to use a ellipsis even if there
are no named parameters (as is permitted in C++).  This feature is particularly
useful when combined with the <tt class="docutils literal"><span class="pre">unavailable</span></tt> attribute:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">void</span> <span class="n">honeypot</span><span class="p">(...)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">overloadable</span><span class="p">,</span> <span class="n">unavailable</span><span class="p">));</span> <span class="c1">// calling me is an error</span>
</pre></div>
</div>
<p>Functions declared with the <tt class="docutils literal"><span class="pre">overloadable</span></tt> attribute have their names mangled
according to the same rules as C++ function names.  For example, the three
<tt class="docutils literal"><span class="pre">tgsin</span></tt> functions in our motivating example get the mangled names
<tt class="docutils literal"><span class="pre">_Z5tgsinf</span></tt>, <tt class="docutils literal"><span class="pre">_Z5tgsind</span></tt>, and <tt class="docutils literal"><span class="pre">_Z5tgsine</span></tt>, respectively.  There are two
caveats to this use of name mangling:</p>
<ul class="simple">
<li>Future versions of Clang may change the name mangling of functions overloaded
in C, so you should not depend on an specific mangling.  To be completely
safe, we strongly urge the use of <tt class="docutils literal"><span class="pre">static</span> <span class="pre">inline</span></tt> with <tt class="docutils literal"><span class="pre">overloadable</span></tt>
functions.</li>
<li>The <tt class="docutils literal"><span class="pre">overloadable</span></tt> attribute has almost no meaning when used in C++,
because names will already be mangled and functions are already overloadable.
However, when an <tt class="docutils literal"><span class="pre">overloadable</span></tt> function occurs within an <tt class="docutils literal"><span class="pre">extern</span> <span class="pre">&quot;C&quot;</span></tt>
linkage specification, it&#8217;s name <em>will</em> be mangled in the same way as it
would in C.</li>
</ul>
<p>For the purpose of backwards compatibility, at most one function with the same
name as other <tt class="docutils literal"><span class="pre">overloadable</span></tt> functions may omit the <tt class="docutils literal"><span class="pre">overloadable</span></tt>
attribute. In this case, the function without the <tt class="docutils literal"><span class="pre">overloadable</span></tt> attribute
will not have its name mangled.</p>
<p>For example:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="c1">// Notes with mangled names assume Itanium mangling.</span>
<span class="kt">int</span> <span class="n">f</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">f</span><span class="p">(</span><span class="kt">double</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">overloadable</span><span class="p">));</span>
<span class="kt">void</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">f</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span> <span class="c1">// Emits a call to f (not _Z1fi, as it would with an overload that</span>
        <span class="c1">// was marked with overloadable).</span>
  <span class="n">f</span><span class="p">(</span><span class="mf">1.0</span><span class="p">);</span> <span class="c1">// Emits a call to _Z1fd.</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Support for unmarked overloads is not present in some versions of clang. You may
query for it using <tt class="docutils literal"><span class="pre">__has_extension(overloadable_unmarked)</span></tt>.</p>
<p>Query for this attribute with <tt class="docutils literal"><span class="pre">__has_attribute(overloadable)</span></tt>.</p>
</div>
<div class="section" id="reinitializes">
<h3><a class="toc-backref" href="#id92">reinitializes</a><a class="headerlink" href="#reinitializes" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">reinitializes</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::reinitializes</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">reinitializes</span></tt> attribute can be applied to a non-static, non-const C++
member function to indicate that this member function reinitializes the entire
object to a known state, independent of the previous state of the object.</p>
<p>This attribute can be interpreted by static analyzers that warn about uses of an
object that has been left in an indeterminate state by a move operation. If a
member function marked with the <tt class="docutils literal"><span class="pre">reinitializes</span></tt> attribute is called on a
moved-from object, the analyzer can conclude that the object is no longer in an
indeterminate state.</p>
<p>A typical example where this attribute would be used is on functions that clear
a container class:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">Container</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="p">...</span>
  <span class="p">[[</span><span class="n">clang</span><span class="o">::</span><span class="n">reinitializes</span><span class="p">]]</span> <span class="kt">void</span> <span class="n">Clear</span><span class="p">();</span>
  <span class="p">...</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="release-capability-release-shared-capability">
<h3><a class="toc-backref" href="#id93">release_capability, release_shared_capability</a><a class="headerlink" href="#release-capability-release-shared-capability" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">release_capability</span></tt> <br/> <tt class="docutils literal"><span class="pre">release_shared_capability</span></tt> <br/> <tt class="docutils literal"><span class="pre">release_generic_capability</span></tt> <br/> <tt class="docutils literal"><span class="pre">unlock_function</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::release_capability</span></tt> <br/> <tt class="docutils literal"><span class="pre">clang::release_shared_capability</span></tt> <br/> <tt class="docutils literal"><span class="pre">clang::release_generic_capability</span></tt> <br/> <tt class="docutils literal"><span class="pre">clang::unlock_function</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>Marks a function as releasing a capability.</p>
</div>
<div class="section" id="short-call-near">
<h3><a class="toc-backref" href="#id94">short_call, near</a><a class="headerlink" href="#short-call-near" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">short_call</span></tt> <br/> <tt class="docutils literal"><span class="pre">near</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::short_call</span></tt> <br/> <tt class="docutils literal"><span class="pre">gnu::near</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Clang supports the <tt class="docutils literal"><span class="pre">__attribute__((long_call))</span></tt>, <tt class="docutils literal"><span class="pre">__attribute__((far))</span></tt>,
<tt class="docutils literal"><span class="pre">__attribute__((short__call))</span></tt>, and <tt class="docutils literal"><span class="pre">__attribute__((near))</span></tt> attributes
on MIPS targets. These attributes may only be added to function declarations
and change the code generated by the compiler when directly calling
the function. The <tt class="docutils literal"><span class="pre">short_call</span></tt> and <tt class="docutils literal"><span class="pre">near</span></tt> attributes are synonyms and
allow calls to the function to be made using the <tt class="docutils literal"><span class="pre">jal</span></tt> instruction, which
requires the function to be located in the same naturally aligned 256MB segment
as the caller.  The <tt class="docutils literal"><span class="pre">long_call</span></tt> and <tt class="docutils literal"><span class="pre">far</span></tt> attributes are synonyms and
require the use of a different call sequence that works regardless
of the distance between the functions.</p>
<p>These attributes have no effect for position-independent code.</p>
<p>These attributes take priority over command line switches such
as <tt class="docutils literal"><span class="pre">-mlong-calls</span></tt> and <tt class="docutils literal"><span class="pre">-mno-long-calls</span></tt>.</p>
</div>
<div class="section" id="signal">
<h3><a class="toc-backref" href="#id95">signal</a><a class="headerlink" href="#signal" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">signal</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::signal</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Clang supports the GNU style <tt class="docutils literal"><span class="pre">__attribute__((signal))</span></tt> attribute on
AVR targets. This attribute may be attached to a function definition and instructs
the backend to generate appropriate function entry/exit code so that it can be used
directly as an interrupt service routine.</p>
<p>Interrupt handler functions defined with the signal attribute do not re-enable interrupts.</p>
</div>
<div class="section" id="speculative-load-hardening">
<h3><a class="toc-backref" href="#id96">speculative_load_hardening</a><a class="headerlink" href="#speculative-load-hardening" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">speculative_load_hardening</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::speculative_load_hardening</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::speculative_load_hardening</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>This attribute can be applied to a function declaration in order to indicate</dt>
<dd><p class="first">that <a class="reference external" href="https://llvm.org/docs/SpeculativeLoadHardening.html">Speculative Load Hardening</a>
should be enabled for the function body. This can also be applied to a method
in Objective C.</p>
<p>Speculative Load Hardening is a best-effort mitigation against
information leak attacks that make use of control flow
miss-speculation - specifically miss-speculation of whether a branch
is taken or not. Typically vulnerabilities enabling such attacks are
classified as &#8220;Spectre variant #1&#8221;. Notably, this does not attempt to
mitigate against miss-speculation of branch target, classified as
&#8220;Spectre variant #2&#8221; vulnerabilities.</p>
<p class="last">When inlining, the attribute is sticky. Inlining a function that
carries this attribute will cause the caller to gain the
attribute. This is intended to provide a maximally conservative model
where the code in a function annotated with this attribute will always
(even after inlining) end up hardened.</p>
</dd>
</dl>
</div>
<div class="section" id="target">
<h3><a class="toc-backref" href="#id97">target</a><a class="headerlink" href="#target" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">target</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::target</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Clang supports the GNU style <tt class="docutils literal"><span class="pre">__attribute__((target(&quot;OPTIONS&quot;)))</span></tt> attribute.
This attribute may be attached to a function definition and instructs
the backend to use different code generation options than were passed on the
command line.</p>
<p>The current set of options correspond to the existing &#8220;subtarget features&#8221; for
the target with or without a &#8220;-mno-&#8221; in front corresponding to the absence
of the feature, as well as <tt class="docutils literal"><span class="pre">arch=&quot;CPU&quot;</span></tt> which will change the default &#8220;CPU&#8221;
for the function.</p>
<p>Example &#8220;subtarget features&#8221; from the x86 backend include: &#8220;mmx&#8221;, &#8220;sse&#8221;, &#8220;sse4.2&#8221;,
&#8220;avx&#8221;, &#8220;xop&#8221; and largely correspond to the machine specific options handled by
the front end.</p>
<p>Additionally, this attribute supports function multiversioning for ELF based
x86/x86-64 targets, which can be used to create multiple implementations of the
same function that will be resolved at runtime based on the priority of their
<tt class="docutils literal"><span class="pre">target</span></tt> attribute strings. A function is considered a multiversioned function
if either two declarations of the function have different <tt class="docutils literal"><span class="pre">target</span></tt> attribute
strings, or if it has a <tt class="docutils literal"><span class="pre">target</span></tt> attribute string of <tt class="docutils literal"><span class="pre">default</span></tt>.  For
example:</p>
<blockquote>
<div><div class="highlight-c++"><div class="highlight"><pre><span class="n">__attribute__</span><span class="p">((</span><span class="n">target</span><span class="p">(</span><span class="s">&quot;arch=atom&quot;</span><span class="p">)))</span>
<span class="kt">void</span> <span class="n">foo</span><span class="p">()</span> <span class="p">{}</span> <span class="c1">// will be called on &#39;atom&#39; processors.</span>
<span class="n">__attribute__</span><span class="p">((</span><span class="n">target</span><span class="p">(</span><span class="s">&quot;default&quot;</span><span class="p">)))</span>
<span class="kt">void</span> <span class="n">foo</span><span class="p">()</span> <span class="p">{}</span> <span class="c1">// will be called on any other processors.</span>
</pre></div>
</div>
</div></blockquote>
<p>All multiversioned functions must contain a <tt class="docutils literal"><span class="pre">default</span></tt> (fallback)
implementation, otherwise usages of the function are considered invalid.
Additionally, a function may not become multiversioned after its first use.</p>
</div>
<div class="section" id="try-acquire-capability-try-acquire-shared-capability">
<h3><a class="toc-backref" href="#id98">try_acquire_capability, try_acquire_shared_capability</a><a class="headerlink" href="#try-acquire-capability-try-acquire-shared-capability" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">try_acquire_capability</span></tt> <br/> <tt class="docutils literal"><span class="pre">try_acquire_shared_capability</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::try_acquire_capability</span></tt> <br/> <tt class="docutils literal"><span class="pre">clang::try_acquire_shared_capability</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>Marks a function that attempts to acquire a capability. This function may fail to
actually acquire the capability; they accept a Boolean value determining
whether acquiring the capability means success (true), or failing to acquire
the capability means success (false).</p>
</div>
<div class="section" id="xray-always-instrument-xray-never-instrument-xray-log-args">
<h3><a class="toc-backref" href="#id99">xray_always_instrument, xray_never_instrument, xray_log_args</a><a class="headerlink" href="#xray-always-instrument-xray-never-instrument-xray-log-args" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">xray_always_instrument</span></tt> <br/> <tt class="docutils literal"><span class="pre">xray_never_instrument</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::xray_always_instrument</span></tt> <br/> <tt class="docutils literal"><span class="pre">clang::xray_never_instrument</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::xray_always_instrument</span></tt> <br/> <tt class="docutils literal"><span class="pre">clang::xray_never_instrument</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">__attribute__((xray_always_instrument))</span></tt> or <tt class="docutils literal"><span class="pre">[[clang::xray_always_instrument]]</span></tt> is used to mark member functions (in C++), methods (in Objective C), and free functions (in C, C++, and Objective C) to be instrumented with XRay. This will cause the function to always have space at the beginning and exit points to allow for runtime patching.</p>
<p>Conversely, <tt class="docutils literal"><span class="pre">__attribute__((xray_never_instrument))</span></tt> or <tt class="docutils literal"><span class="pre">[[clang::xray_never_instrument]]</span></tt> will inhibit the insertion of these instrumentation points.</p>
<p>If a function has neither of these attributes, they become subject to the XRay heuristics used to determine whether a function should be instrumented or otherwise.</p>
<p><tt class="docutils literal"><span class="pre">__attribute__((xray_log_args(N)))</span></tt> or <tt class="docutils literal"><span class="pre">[[clang::xray_log_args(N)]]</span></tt> is used to preserve N function arguments for the logging function.  Currently, only N==1 is supported.</p>
</div>
<div class="section" id="id3">
<h3><a class="toc-backref" href="#id100">xray_always_instrument, xray_never_instrument, xray_log_args</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">xray_log_args</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::xray_log_args</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::xray_log_args</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">__attribute__((xray_always_instrument))</span></tt> or <tt class="docutils literal"><span class="pre">[[clang::xray_always_instrument]]</span></tt> is used to mark member functions (in C++), methods (in Objective C), and free functions (in C, C++, and Objective C) to be instrumented with XRay. This will cause the function to always have space at the beginning and exit points to allow for runtime patching.</p>
<p>Conversely, <tt class="docutils literal"><span class="pre">__attribute__((xray_never_instrument))</span></tt> or <tt class="docutils literal"><span class="pre">[[clang::xray_never_instrument]]</span></tt> will inhibit the insertion of these instrumentation points.</p>
<p>If a function has neither of these attributes, they become subject to the XRay heuristics used to determine whether a function should be instrumented or otherwise.</p>
<p><tt class="docutils literal"><span class="pre">__attribute__((xray_log_args(N)))</span></tt> or <tt class="docutils literal"><span class="pre">[[clang::xray_log_args(N)]]</span></tt> is used to preserve N function arguments for the logging function.  Currently, only N==1 is supported.</p>
</div>
</div>
<div class="section" id="variable-attributes">
<h2><a class="toc-backref" href="#id101">Variable Attributes</a><a class="headerlink" href="#variable-attributes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="always-destroy">
<h3><a class="toc-backref" href="#id102">always_destroy</a><a class="headerlink" href="#always-destroy" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">always_destroy</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::always_destroy</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">always_destroy</span></tt> attribute specifies that a variable with static or thread
storage duration should have its exit-time destructor run. This attribute is the
default unless clang was invoked with -fno-c++-static-destructors.</p>
</div>
<div class="section" id="dllexport">
<h3><a class="toc-backref" href="#id103">dllexport</a><a class="headerlink" href="#dllexport" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">dllexport</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::dllexport</span></tt></td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">dllexport</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">__declspec(dllexport)</span></tt> attribute declares a variable, function, or
Objective-C interface to be exported from the module.  It is available under the
<tt class="docutils literal"><span class="pre">-fdeclspec</span></tt> flag for compatibility with various compilers.  The primary use
is for COFF object files which explicitly specify what interfaces are available
for external use.  See the <a class="reference external" href="https://msdn.microsoft.com/en-us/library/3y1sfaz2.aspx">dllexport</a> documentation on MSDN for more
information.</p>
</div>
<div class="section" id="dllimport">
<h3><a class="toc-backref" href="#id104">dllimport</a><a class="headerlink" href="#dllimport" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">dllimport</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::dllimport</span></tt></td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">dllimport</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">__declspec(dllimport)</span></tt> attribute declares a variable, function, or
Objective-C interface to be imported from an external module.  It is available
under the <tt class="docutils literal"><span class="pre">-fdeclspec</span></tt> flag for compatibility with various compilers.  The
primary use is for COFF object files which explicitly specify what interfaces
are imported from external modules.  See the <a class="reference external" href="https://msdn.microsoft.com/en-us/library/3y1sfaz2.aspx">dllimport</a> documentation on MSDN
for more information.</p>
</div>
<div class="section" id="init-seg">
<h3><a class="toc-backref" href="#id105">init_seg</a><a class="headerlink" href="#init-seg" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">init_seg</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The attribute applied by <tt class="docutils literal"><span class="pre">pragma</span> <span class="pre">init_seg()</span></tt> controls the section into
which global initialization function pointers are emitted.  It is only
available with <tt class="docutils literal"><span class="pre">-fms-extensions</span></tt>.  Typically, this function pointer is
emitted into <tt class="docutils literal"><span class="pre">.CRT$XCU</span></tt> on Windows.  The user can change the order of
initialization by using a different section name with the same
<tt class="docutils literal"><span class="pre">.CRT$XC</span></tt> prefix and a suffix that sorts lexicographically before or
after the standard <tt class="docutils literal"><span class="pre">.CRT$XCU</span></tt> sections.  See the <a class="reference external" href="http://msdn.microsoft.com/en-us/library/7977wcck(v=vs.110).aspx">init_seg</a>
documentation on MSDN for more information.</p>
</div>
<div class="section" id="maybe-unused-unused">
<h3><a class="toc-backref" href="#id106">maybe_unused, unused</a><a class="headerlink" href="#maybe-unused-unused" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">unused</span></tt></td>
<td><tt class="docutils literal"><span class="pre">maybe_unused</span></tt> <br/> <tt class="docutils literal"><span class="pre">gnu::unused</span></tt></td>
<td><tt class="docutils literal"><span class="pre">maybe_unused</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>When passing the <tt class="docutils literal"><span class="pre">-Wunused</span></tt> flag to Clang, entities that are unused by the
program may be diagnosed. The <tt class="docutils literal"><span class="pre">[[maybe_unused]]</span></tt> (or
<tt class="docutils literal"><span class="pre">__attribute__((unused))</span></tt>) attribute can be used to silence such diagnostics
when the entity cannot be removed. For instance, a local variable may exist
solely for use in an <tt class="docutils literal"><span class="pre">assert()</span></tt> statement, which makes the local variable
unused when <tt class="docutils literal"><span class="pre">NDEBUG</span></tt> is defined.</p>
<p>The attribute may be applied to the declaration of a class, a typedef, a
variable, a function or method, a function parameter, an enumeration, an
enumerator, a non-static data member, or a label.</p>
</div>
<div class="section" id="no-destroy">
<h3><a class="toc-backref" href="#id107">no_destroy</a><a class="headerlink" href="#no-destroy" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">no_destroy</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::no_destroy</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">no_destroy</span></tt> attribute specifies that a variable with static or thread
storage duration shouldn&#8217;t have its exit-time destructor run. Annotating every
static and thread duration variable with this attribute is equivalent to
invoking clang with -fno-c++-static-destructors.</p>
</div>
<div class="section" id="nodebug">
<h3><a class="toc-backref" href="#id108">nodebug</a><a class="headerlink" href="#nodebug" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">nodebug</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::nodebug</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">nodebug</span></tt> attribute allows you to suppress debugging information for a
function or method, or for a variable that is not a parameter or a non-static
data member.</p>
</div>
<div class="section" id="noescape">
<h3><a class="toc-backref" href="#id109">noescape</a><a class="headerlink" href="#noescape" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">noescape</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::noescape</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::noescape</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">noescape</span></tt> placed on a function parameter of a pointer type is used to inform
the compiler that the pointer cannot escape: that is, no reference to the object
the pointer points to that is derived from the parameter value will survive
after the function returns. Users are responsible for making sure parameters
annotated with <tt class="docutils literal"><span class="pre">noescape</span></tt> do not actuallly escape.</p>
<p>For example:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="kt">int</span> <span class="o">*</span><span class="n">gp</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">nonescapingFunc</span><span class="p">(</span><span class="n">__attribute__</span><span class="p">((</span><span class="n">noescape</span><span class="p">))</span> <span class="kt">int</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span> <span class="p">{</span>
  <span class="o">*</span><span class="n">p</span> <span class="o">+=</span> <span class="mi">100</span><span class="p">;</span> <span class="c1">// OK.</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">escapingFunc</span><span class="p">(</span><span class="n">__attribute__</span><span class="p">((</span><span class="n">noescape</span><span class="p">))</span> <span class="kt">int</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">gp</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span> <span class="c1">// Not OK.</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Additionally, when the parameter is a <cite>block pointer
&lt;https://clang.llvm.org/docs/BlockLanguageSpec.html&gt;</cite>, the same restriction
applies to copies of the block. For example:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">typedef</span> <span class="kt">void</span> <span class="p">(</span><span class="o">^</span><span class="n">BlockTy</span><span class="p">)();</span>
<span class="n">BlockTy</span> <span class="n">g0</span><span class="p">,</span> <span class="n">g1</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">nonescapingFunc</span><span class="p">(</span><span class="n">__attribute__</span><span class="p">((</span><span class="n">noescape</span><span class="p">))</span> <span class="n">BlockTy</span> <span class="n">block</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">block</span><span class="p">();</span> <span class="c1">// OK.</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">escapingFunc</span><span class="p">(</span><span class="n">__attribute__</span><span class="p">((</span><span class="n">noescape</span><span class="p">))</span> <span class="n">BlockTy</span> <span class="n">block</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">g0</span> <span class="o">=</span> <span class="n">block</span><span class="p">;</span> <span class="c1">// Not OK.</span>
  <span class="n">g1</span> <span class="o">=</span> <span class="n">Block_copy</span><span class="p">(</span><span class="n">block</span><span class="p">);</span> <span class="c1">// Not OK either.</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="nosvm">
<h3><a class="toc-backref" href="#id110">nosvm</a><a class="headerlink" href="#nosvm" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">nosvm</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>OpenCL 2.0 supports the optional <tt class="docutils literal"><span class="pre">__attribute__((nosvm))</span></tt> qualifier for
pointer variable. It informs the compiler that the pointer does not refer
to a shared virtual memory region. See OpenCL v2.0 s6.7.2 for details.</p>
<p>Since it is not widely used and has been removed from OpenCL 2.1, it is ignored
by Clang.</p>
</div>
<div class="section" id="objc-externally-retained">
<h3><a class="toc-backref" href="#id111">objc_externally_retained</a><a class="headerlink" href="#objc-externally-retained" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">objc_externally_retained</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::objc_externally_retained</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::objc_externally_retained</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">objc_externally_retained</span></tt> attribute can be applied to strong local
variables, functions, methods, or blocks to opt into
<a class="reference external" href="https://clang.llvm.org/docs/AutomaticReferenceCounting.html#externally-retained-variables">externally-retained semantics</a>.</p>
<p>When applied to the definition of a function, method, or block, every parameter
of the function with implicit strong retainable object pointer type is
considered externally-retained, and becomes <tt class="docutils literal"><span class="pre">const</span></tt>. By explicitly annotating
a parameter with <tt class="docutils literal"><span class="pre">__strong</span></tt>, you can opt back into the default
non-externally-retained behaviour for that parameter. For instance,
<tt class="docutils literal"><span class="pre">first_param</span></tt> is externally-retained below, but not <tt class="docutils literal"><span class="pre">second_param</span></tt>:</p>
<div class="highlight-objc"><div class="highlight"><pre><span class="n">__attribute__</span><span class="p">((</span><span class="n">objc_externally_retained</span><span class="p">))</span>
<span class="kt">void</span> <span class="n">f</span><span class="p">(</span><span class="n">NSArray</span> <span class="o">*</span><span class="n">first_param</span><span class="p">,</span> <span class="n">__strong</span> <span class="n">NSArray</span> <span class="o">*</span><span class="n">second_param</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Likewise, when applied to a strong local variable, that variable becomes
<tt class="docutils literal"><span class="pre">const</span></tt> and is considered externally-retained.</p>
<p>When compiled without <tt class="docutils literal"><span class="pre">-fobjc-arc</span></tt>, this attribute is ignored.</p>
</div>
<div class="section" id="pass-object-size">
<h3><a class="toc-backref" href="#id112">pass_object_size</a><a class="headerlink" href="#pass-object-size" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">pass_object_size</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::pass_object_size</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::pass_object_size</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The mangling of functions with parameters that are annotated with
<tt class="docutils literal"><span class="pre">pass_object_size</span></tt> is subject to change. You can get around this by
using <tt class="docutils literal"><span class="pre">__asm__(&quot;foo&quot;)</span></tt> to explicitly name your functions, thus preserving
your ABI; also, non-overloadable C functions with <tt class="docutils literal"><span class="pre">pass_object_size</span></tt> are
not mangled.</p>
</div>
<p>The <tt class="docutils literal"><span class="pre">pass_object_size(Type)</span></tt> attribute can be placed on function parameters to
instruct clang to call <tt class="docutils literal"><span class="pre">__builtin_object_size(param,</span> <span class="pre">Type)</span></tt> at each callsite
of said function, and implicitly pass the result of this call in as an invisible
argument of type <tt class="docutils literal"><span class="pre">size_t</span></tt> directly after the parameter annotated with
<tt class="docutils literal"><span class="pre">pass_object_size</span></tt>. Clang will also replace any calls to
<tt class="docutils literal"><span class="pre">__builtin_object_size(param,</span> <span class="pre">Type)</span></tt> in the function by said implicit
parameter.</p>
<p>Example usage:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="kt">int</span> <span class="nf">bzero1</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="k">const</span> <span class="n">p</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">pass_object_size</span><span class="p">(</span><span class="mi">0</span><span class="p">))))</span>
    <span class="n">__attribute__</span><span class="p">((</span><span class="n">noinline</span><span class="p">))</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="cm">/**/</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">__builtin_object_size</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">i</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">char</span> <span class="n">chars</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span>
  <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">bzero1</span><span class="p">(</span><span class="o">&amp;</span><span class="n">chars</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
  <span class="n">assert</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">chars</span><span class="p">));</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If successfully evaluating <tt class="docutils literal"><span class="pre">__builtin_object_size(param,</span> <span class="pre">Type)</span></tt> at the
callsite is not possible, then the &#8220;failed&#8221; value is passed in. So, using the
definition of <tt class="docutils literal"><span class="pre">bzero1</span></tt> from above, the following code would exit cleanly:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="kt">int</span> <span class="nf">main2</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">bzero1</span><span class="p">(</span><span class="n">argv</span><span class="p">);</span>
  <span class="n">assert</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">pass_object_size</span></tt> plays a part in overload resolution. If two overload
candidates are otherwise equally good, then the overload with one or more
parameters with <tt class="docutils literal"><span class="pre">pass_object_size</span></tt> is preferred. This implies that the choice
between two identical overloads both with <tt class="docutils literal"><span class="pre">pass_object_size</span></tt> on one or more
parameters will always be ambiguous; for this reason, having two such overloads
is illegal. For example:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="cp">#define PS(N) __attribute__((pass_object_size(N)))</span>
<span class="c1">// OK</span>
<span class="kt">void</span> <span class="n">Foo</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">b</span><span class="p">);</span> <span class="c1">// Overload A</span>
<span class="c1">// OK -- overload A has no parameters with pass_object_size.</span>
<span class="kt">void</span> <span class="n">Foo</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">a</span> <span class="n">PS</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="kt">char</span> <span class="o">*</span><span class="n">b</span> <span class="n">PS</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span> <span class="c1">// Overload B</span>
<span class="c1">// Error -- Same signature (sans pass_object_size) as overload B, and both</span>
<span class="c1">// overloads have one or more parameters with the pass_object_size attribute.</span>
<span class="kt">void</span> <span class="n">Foo</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">a</span> <span class="n">PS</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="kt">void</span> <span class="o">*</span><span class="n">b</span><span class="p">);</span>

<span class="c1">// OK</span>
<span class="kt">void</span> <span class="n">Bar</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">a</span> <span class="n">PS</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span> <span class="c1">// Overload C</span>
<span class="c1">// OK</span>
<span class="kt">void</span> <span class="n">Bar</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">c</span> <span class="n">PS</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span> <span class="c1">// Overload D</span>

<span class="kt">void</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">char</span> <span class="n">known</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span> <span class="o">*</span><span class="n">unknown</span><span class="p">;</span>
  <span class="n">Foo</span><span class="p">(</span><span class="n">unknown</span><span class="p">,</span> <span class="n">unknown</span><span class="p">);</span> <span class="c1">// Calls overload B</span>
  <span class="n">Foo</span><span class="p">(</span><span class="n">known</span><span class="p">,</span> <span class="n">unknown</span><span class="p">);</span> <span class="c1">// Calls overload B</span>
  <span class="n">Foo</span><span class="p">(</span><span class="n">unknown</span><span class="p">,</span> <span class="n">known</span><span class="p">);</span> <span class="c1">// Calls overload B</span>
  <span class="n">Foo</span><span class="p">(</span><span class="n">known</span><span class="p">,</span> <span class="n">known</span><span class="p">);</span> <span class="c1">// Calls overload B</span>

  <span class="n">Bar</span><span class="p">(</span><span class="n">known</span><span class="p">);</span> <span class="c1">// Calls overload D</span>
  <span class="n">Bar</span><span class="p">(</span><span class="n">unknown</span><span class="p">);</span> <span class="c1">// Calls overload D</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Currently, <tt class="docutils literal"><span class="pre">pass_object_size</span></tt> is a bit restricted in terms of its usage:</p>
<ul class="simple">
<li>Only one use of <tt class="docutils literal"><span class="pre">pass_object_size</span></tt> is allowed per parameter.</li>
<li>It is an error to take the address of a function with <tt class="docutils literal"><span class="pre">pass_object_size</span></tt> on
any of its parameters. If you wish to do this, you can create an overload
without <tt class="docutils literal"><span class="pre">pass_object_size</span></tt> on any parameters.</li>
<li>It is an error to apply the <tt class="docutils literal"><span class="pre">pass_object_size</span></tt> attribute to parameters that
are not pointers. Additionally, any parameter that <tt class="docutils literal"><span class="pre">pass_object_size</span></tt> is
applied to must be marked <tt class="docutils literal"><span class="pre">const</span></tt> at its function&#8217;s definition.</li>
</ul>
</div>
<div class="section" id="require-constant-initialization">
<h3><a class="toc-backref" href="#id113">require_constant_initialization</a><a class="headerlink" href="#require-constant-initialization" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">require_constant_initialization</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::require_constant_initialization</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>This attribute specifies that the variable to which it is attached is intended
to have a <a class="reference external" href="http://en.cppreference.com/w/cpp/language/constant_initialization">constant initializer</a>
according to the rules of [basic.start.static]. The variable is required to
have static or thread storage duration. If the initialization of the variable
is not a constant initializer an error will be produced. This attribute may
only be used in C++.</p>
<p>Note that in C++03 strict constant expression checking is not done. Instead
the attribute reports if Clang can emit the variable as a constant, even if it&#8217;s
not technically a &#8216;constant initializer&#8217;. This behavior is non-portable.</p>
<p>Static storage duration variables with constant initializers avoid hard-to-find
bugs caused by the indeterminate order of dynamic initialization. They can also
be safely used during dynamic initialization across translation units.</p>
<p>This attribute acts as a compile time assertion that the requirements
for constant initialization have been met. Since these requirements change
between dialects and have subtle pitfalls it&#8217;s important to fail fast instead
of silently falling back on dynamic initialization.</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="c1">// -std=c++14</span>
<span class="cp">#define SAFE_STATIC [[clang::require_constant_initialization]]</span>
<span class="k">struct</span> <span class="n">T</span> <span class="p">{</span>
  <span class="n">constexpr</span> <span class="n">T</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="p">{}</span>
  <span class="o">~</span><span class="n">T</span><span class="p">();</span> <span class="c1">// non-trivial</span>
<span class="p">};</span>
<span class="n">SAFE_STATIC</span> <span class="n">T</span> <span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="mi">42</span><span class="p">};</span> <span class="c1">// Initialization OK. Doesn&#39;t check destructor.</span>
<span class="n">SAFE_STATIC</span> <span class="n">T</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span> <span class="c1">// error: variable does not have a constant initializer</span>
<span class="c1">// copy initialization is not a constant expression on a non-literal type.</span>
</pre></div>
</div>
</div>
<div class="section" id="section-declspec-allocate">
<h3><a class="toc-backref" href="#id114">section, __declspec(allocate)</a><a class="headerlink" href="#section-declspec-allocate" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">section</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::section</span></tt></td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">allocate</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">section</span></tt> attribute allows you to specify a specific section a
global variable or function should be in after translation.</p>
</div>
<div class="section" id="swift-context">
<h3><a class="toc-backref" href="#id115">swift_context</a><a class="headerlink" href="#swift-context" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">swift_context</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::swift_context</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::swift_context</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">swift_context</span></tt> attribute marks a parameter of a <tt class="docutils literal"><span class="pre">swiftcall</span></tt>
function as having the special context-parameter ABI treatment.</p>
<p>This treatment generally passes the context value in a special register
which is normally callee-preserved.</p>
<p>A <tt class="docutils literal"><span class="pre">swift_context</span></tt> parameter must either be the last parameter or must be
followed by a <tt class="docutils literal"><span class="pre">swift_error_result</span></tt> parameter (which itself must always be
the last parameter).</p>
<p>A context parameter must have pointer or reference type.</p>
</div>
<div class="section" id="swift-error-result">
<h3><a class="toc-backref" href="#id116">swift_error_result</a><a class="headerlink" href="#swift-error-result" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">swift_error_result</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::swift_error_result</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::swift_error_result</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">swift_error_result</span></tt> attribute marks a parameter of a <tt class="docutils literal"><span class="pre">swiftcall</span></tt>
function as having the special error-result ABI treatment.</p>
<p>This treatment generally passes the underlying error value in and out of
the function through a special register which is normally callee-preserved.
This is modeled in C by pretending that the register is addressable memory:</p>
<ul class="simple">
<li>The caller appears to pass the address of a variable of pointer type.
The current value of this variable is copied into the register before
the call; if the call returns normally, the value is copied back into the
variable.</li>
<li>The callee appears to receive the address of a variable.  This address
is actually a hidden location in its own stack, initialized with the
value of the register upon entry.  When the function returns normally,
the value in that hidden location is written back to the register.</li>
</ul>
<p>A <tt class="docutils literal"><span class="pre">swift_error_result</span></tt> parameter must be the last parameter, and it must be
preceded by a <tt class="docutils literal"><span class="pre">swift_context</span></tt> parameter.</p>
<p>A <tt class="docutils literal"><span class="pre">swift_error_result</span></tt> parameter must have type <tt class="docutils literal"><span class="pre">T**</span></tt> or <tt class="docutils literal"><span class="pre">T*&amp;</span></tt> for some
type T.  Note that no qualifiers are permitted on the intermediate level.</p>
<p>It is undefined behavior if the caller does not pass a pointer or
reference to a valid object.</p>
<p>The standard convention is that the error value itself (that is, the
value stored in the apparent argument) will be null upon function entry,
but this is not enforced by the ABI.</p>
</div>
<div class="section" id="swift-indirect-result">
<h3><a class="toc-backref" href="#id117">swift_indirect_result</a><a class="headerlink" href="#swift-indirect-result" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">swift_indirect_result</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::swift_indirect_result</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::swift_indirect_result</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">swift_indirect_result</span></tt> attribute marks a parameter of a <tt class="docutils literal"><span class="pre">swiftcall</span></tt>
function as having the special indirect-result ABI treatment.</p>
<p>This treatment gives the parameter the target&#8217;s normal indirect-result
ABI treatment, which may involve passing it differently from an ordinary
parameter.  However, only the first indirect result will receive this
treatment.  Furthermore, low-level lowering may decide that a direct result
must be returned indirectly; if so, this will take priority over the
<tt class="docutils literal"><span class="pre">swift_indirect_result</span></tt> parameters.</p>
<p>A <tt class="docutils literal"><span class="pre">swift_indirect_result</span></tt> parameter must either be the first parameter or
follow another <tt class="docutils literal"><span class="pre">swift_indirect_result</span></tt> parameter.</p>
<p>A <tt class="docutils literal"><span class="pre">swift_indirect_result</span></tt> parameter must have type <tt class="docutils literal"><span class="pre">T*</span></tt> or <tt class="docutils literal"><span class="pre">T&amp;</span></tt> for
some object type <tt class="docutils literal"><span class="pre">T</span></tt>.  If <tt class="docutils literal"><span class="pre">T</span></tt> is a complete type at the point of
definition of a function, it is undefined behavior if the argument
value does not point to storage of adequate size and alignment for a
value of type <tt class="docutils literal"><span class="pre">T</span></tt>.</p>
<p>Making indirect results explicit in the signature allows C functions to
directly construct objects into them without relying on language
optimizations like C++&#8217;s named return value optimization (NRVO).</p>
</div>
<div class="section" id="swiftcall">
<h3><a class="toc-backref" href="#id118">swiftcall</a><a class="headerlink" href="#swiftcall" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">swiftcall</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::swiftcall</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::swiftcall</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">swiftcall</span></tt> attribute indicates that a function should be called
using the Swift calling convention for a function or function pointer.</p>
<p>The lowering for the Swift calling convention, as described by the Swift
ABI documentation, occurs in multiple phases.  The first, &#8220;high-level&#8221;
phase breaks down the formal parameters and results into innately direct
and indirect components, adds implicit paraameters for the generic
signature, and assigns the context and error ABI treatments to parameters
where applicable.  The second phase breaks down the direct parameters
and results from the first phase and assigns them to registers or the
stack.  The <tt class="docutils literal"><span class="pre">swiftcall</span></tt> convention only handles this second phase of
lowering; the C function type must accurately reflect the results
of the first phase, as follows:</p>
<ul class="simple">
<li>Results classified as indirect by high-level lowering should be
represented as parameters with the <tt class="docutils literal"><span class="pre">swift_indirect_result</span></tt> attribute.</li>
<li>Results classified as direct by high-level lowering should be represented
as follows:<ul>
<li>First, remove any empty direct results.</li>
<li>If there are no direct results, the C result type should be <tt class="docutils literal"><span class="pre">void</span></tt>.</li>
<li>If there is one direct result, the C result type should be a type with
the exact layout of that result type.</li>
<li>If there are a multiple direct results, the C result type should be
a struct type with the exact layout of a tuple of those results.</li>
</ul>
</li>
<li>Parameters classified as indirect by high-level lowering should be
represented as parameters of pointer type.</li>
<li>Parameters classified as direct by high-level lowering should be
omitted if they are empty types; otherwise, they should be represented
as a parameter type with a layout exactly matching the layout of the
Swift parameter type.</li>
<li>The context parameter, if present, should be represented as a trailing
parameter with the <tt class="docutils literal"><span class="pre">swift_context</span></tt> attribute.</li>
<li>The error result parameter, if present, should be represented as a
trailing parameter (always following a context parameter) with the
<tt class="docutils literal"><span class="pre">swift_error_result</span></tt> attribute.</li>
</ul>
<p><tt class="docutils literal"><span class="pre">swiftcall</span></tt> does not support variadic arguments or unprototyped functions.</p>
<p>The parameter ABI treatment attributes are aspects of the function type.
A function type which which applies an ABI treatment attribute to a
parameter is a different type from an otherwise-identical function type
that does not.  A single parameter may not have multiple ABI treatment
attributes.</p>
<p>Support for this feature is target-dependent, although it should be
supported on every target that Swift supports.  Query for this support
with <tt class="docutils literal"><span class="pre">__has_attribute(swiftcall)</span></tt>.  This implies support for the
<tt class="docutils literal"><span class="pre">swift_context</span></tt>, <tt class="docutils literal"><span class="pre">swift_error_result</span></tt>, and <tt class="docutils literal"><span class="pre">swift_indirect_result</span></tt>
attributes.</p>
</div>
<div class="section" id="thread">
<h3><a class="toc-backref" href="#id119">thread</a><a class="headerlink" href="#thread" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">thread</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">__declspec(thread)</span></tt> attribute declares a variable with thread local
storage.  It is available under the <tt class="docutils literal"><span class="pre">-fms-extensions</span></tt> flag for MSVC
compatibility.  See the documentation for <a class="reference external" href="http://msdn.microsoft.com/en-us/library/9w1sdazb.aspx">__declspec(thread)</a> on MSDN.</p>
<p>In Clang, <tt class="docutils literal"><span class="pre">__declspec(thread)</span></tt> is generally equivalent in functionality to the
GNU <tt class="docutils literal"><span class="pre">__thread</span></tt> keyword.  The variable must not have a destructor and must have
a constant initializer, if any.  The attribute only applies to variables
declared with static storage duration, such as globals, class static data
members, and static locals.</p>
</div>
<div class="section" id="tls-model">
<h3><a class="toc-backref" href="#id120">tls_model</a><a class="headerlink" href="#tls-model" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">tls_model</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::tls_model</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">tls_model</span></tt> attribute allows you to specify which thread-local storage
model to use. It accepts the following strings:</p>
<ul class="simple">
<li>global-dynamic</li>
<li>local-dynamic</li>
<li>initial-exec</li>
<li>local-exec</li>
</ul>
<p>TLS models are mutually exclusive.</p>
</div>
<div class="section" id="trivial-abi">
<h3><a class="toc-backref" href="#id121">trivial_abi</a><a class="headerlink" href="#trivial-abi" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">trivial_abi</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::trivial_abi</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">trivial_abi</span></tt> attribute can be applied to a C++ class, struct, or union.
It instructs the compiler to pass and return the type using the C ABI for the
underlying type when the type would otherwise be considered non-trivial for the
purpose of calls.
A class annotated with <cite>trivial_abi</cite> can have non-trivial destructors or copy/move constructors without automatically becoming non-trivial for the purposes of calls. For example:</p>
<blockquote>
<div><div class="highlight-c++"><div class="highlight"><pre><span class="c1">// A is trivial for the purposes of calls because `trivial_abi` makes the</span>
<span class="c1">// user-provided special functions trivial.</span>
<span class="k">struct</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">trivial_abi</span><span class="p">))</span> <span class="n">A</span> <span class="p">{</span>
  <span class="o">~</span><span class="n">A</span><span class="p">();</span>
  <span class="n">A</span><span class="p">(</span><span class="k">const</span> <span class="n">A</span> <span class="o">&amp;</span><span class="p">);</span>
  <span class="n">A</span><span class="p">(</span><span class="n">A</span> <span class="o">&amp;&amp;</span><span class="p">);</span>
  <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// B&#39;s destructor and copy/move constructor are considered trivial for the</span>
<span class="c1">// purpose of calls because A is trivial.</span>
<span class="k">struct</span> <span class="n">B</span> <span class="p">{</span>
  <span class="n">A</span> <span class="n">a</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</div></blockquote>
<p>If a type is trivial for the purposes of calls, has a non-trivial destructor,
and is passed as an argument by value, the convention is that the callee will
destroy the object before returning.</p>
<p>Attribute <tt class="docutils literal"><span class="pre">trivial_abi</span></tt> has no effect in the following cases:</p>
<ul class="simple">
<li>The class directly declares a virtual base or virtual methods.</li>
<li>The class has a base class that is non-trivial for the purposes of calls.</li>
<li>The class has a non-static data member whose type is non-trivial for the purposes of calls, which includes:<ul>
<li>classes that are non-trivial for the purposes of calls</li>
<li>__weak-qualified types in Objective-C++</li>
<li>arrays of any of the above</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="uninitialized">
<h3><a class="toc-backref" href="#id122">uninitialized</a><a class="headerlink" href="#uninitialized" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">uninitialized</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::uninitialized</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The command-line parameter <tt class="docutils literal"><span class="pre">-ftrivial-auto-var-init=*</span></tt> can be used to
initialize trivial automatic stack variables. By default, trivial automatic
stack variables are uninitialized. This attribute is used to override the
command-line parameter, forcing variables to remain uninitialized. It has no
semantic meaning in that using uninitialized values is undefined behavior,
it rather documents the programmer&#8217;s intent.</p>
</div>
</div>
<div class="section" id="type-attributes">
<h2><a class="toc-backref" href="#id123">Type Attributes</a><a class="headerlink" href="#type-attributes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="single-inhertiance-multiple-inheritance-virtual-inheritance">
<h3><a class="toc-backref" href="#id124">__single_inhertiance, __multiple_inheritance, __virtual_inheritance</a><a class="headerlink" href="#single-inhertiance-multiple-inheritance-virtual-inheritance" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">__single_inheritance</span></tt> <br/> <tt class="docutils literal"><span class="pre">__multiple_inheritance</span></tt> <br/> <tt class="docutils literal"><span class="pre">__virtual_inheritance</span></tt> <br/> <tt class="docutils literal"><span class="pre">__unspecified_inheritance</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>This collection of keywords is enabled under <tt class="docutils literal"><span class="pre">-fms-extensions</span></tt> and controls
the pointer-to-member representation used on <tt class="docutils literal"><span class="pre">*-*-win32</span></tt> targets.</p>
<p>The <tt class="docutils literal"><span class="pre">*-*-win32</span></tt> targets utilize a pointer-to-member representation which
varies in size and alignment depending on the definition of the underlying
class.</p>
<p>However, this is problematic when a forward declaration is only available and
no definition has been made yet.  In such cases, Clang is forced to utilize the
most general representation that is available to it.</p>
<p>These keywords make it possible to use a pointer-to-member representation other
than the most general one regardless of whether or not the definition will ever
be present in the current translation unit.</p>
<p>This family of keywords belong between the <tt class="docutils literal"><span class="pre">class-key</span></tt> and <tt class="docutils literal"><span class="pre">class-name</span></tt>:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="k">struct</span> <span class="kr">__single_inheritance</span> <span class="n">S</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">S</span><span class="o">::*</span><span class="n">i</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">S</span> <span class="p">{};</span>
</pre></div>
</div>
<p>This keyword can be applied to class templates but only has an effect when used
on full specializations:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">typename</span> <span class="n">U</span><span class="o">&gt;</span> <span class="k">struct</span> <span class="kr">__single_inheritance</span> <span class="n">A</span><span class="p">;</span> <span class="c1">// warning: inheritance model ignored on primary template</span>
<span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span> <span class="k">struct</span> <span class="kr">__multiple_inheritance</span> <span class="n">A</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">T</span><span class="o">&gt;</span><span class="p">;</span> <span class="c1">// warning: inheritance model ignored on partial specialization</span>
<span class="k">template</span> <span class="o">&lt;&gt;</span> <span class="k">struct</span> <span class="kr">__single_inheritance</span> <span class="n">A</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">float</span><span class="o">&gt;</span><span class="p">;</span>
</pre></div>
</div>
<p>Note that choosing an inheritance model less general than strictly necessary is
an error:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="k">struct</span> <span class="kr">__multiple_inheritance</span> <span class="n">S</span><span class="p">;</span> <span class="c1">// error: inheritance model does not match definition</span>
<span class="kt">int</span> <span class="n">S</span><span class="o">::*</span><span class="n">i</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">S</span> <span class="p">{};</span>
</pre></div>
</div>
</div>
<div class="section" id="align-value">
<h3><a class="toc-backref" href="#id125">align_value</a><a class="headerlink" href="#align-value" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">align_value</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The align_value attribute can be added to the typedef of a pointer type or the
declaration of a variable of pointer or reference type. It specifies that the
pointer will point to, or the reference will bind to, only objects with at
least the provided alignment. This alignment value must be some positive power
of 2.</p>
<blockquote>
<div><div class="highlight-c"><div class="highlight"><pre><span class="k">typedef</span> <span class="kt">double</span> <span class="o">*</span> <span class="n">aligned_double_ptr</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">align_value</span><span class="p">(</span><span class="mi">64</span><span class="p">)));</span>
<span class="kt">void</span> <span class="nf">foo</span><span class="p">(</span><span class="kt">double</span> <span class="o">&amp;</span> <span class="n">x</span>  <span class="n">__attribute__</span><span class="p">((</span><span class="n">align_value</span><span class="p">(</span><span class="mi">128</span><span class="p">)),</span>
         <span class="n">aligned_double_ptr</span> <span class="n">y</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>If the pointer value does not have the specified alignment at runtime, the
behavior of the program is undefined.</p>
</div>
<div class="section" id="empty-bases">
<h3><a class="toc-backref" href="#id126">empty_bases</a><a class="headerlink" href="#empty-bases" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">empty_bases</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The empty_bases attribute permits the compiler to utilize the
empty-base-optimization more frequently.
This attribute only applies to struct, class, and union types.
It is only supported when using the Microsoft C++ ABI.</p>
</div>
<div class="section" id="enum-extensibility">
<h3><a class="toc-backref" href="#id127">enum_extensibility</a><a class="headerlink" href="#enum-extensibility" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">enum_extensibility</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::enum_extensibility</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::enum_extensibility</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Attribute <tt class="docutils literal"><span class="pre">enum_extensibility</span></tt> is used to distinguish between enum definitions
that are extensible and those that are not. The attribute can take either
<tt class="docutils literal"><span class="pre">closed</span></tt> or <tt class="docutils literal"><span class="pre">open</span></tt> as an argument. <tt class="docutils literal"><span class="pre">closed</span></tt> indicates a variable of the
enum type takes a value that corresponds to one of the enumerators listed in the
enum definition or, when the enum is annotated with <tt class="docutils literal"><span class="pre">flag_enum</span></tt>, a value that
can be constructed using values corresponding to the enumerators. <tt class="docutils literal"><span class="pre">open</span></tt>
indicates a variable of the enum type can take any values allowed by the
standard and instructs clang to be more lenient when issuing warnings.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">enum</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">enum_extensibility</span><span class="p">(</span><span class="n">closed</span><span class="p">)))</span> <span class="n">ClosedEnum</span> <span class="p">{</span>
  <span class="n">A0</span><span class="p">,</span> <span class="n">A1</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">enum_extensibility</span><span class="p">(</span><span class="n">open</span><span class="p">)))</span> <span class="n">OpenEnum</span> <span class="p">{</span>
  <span class="n">B0</span><span class="p">,</span> <span class="n">B1</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">enum_extensibility</span><span class="p">(</span><span class="n">closed</span><span class="p">),</span><span class="n">flag_enum</span><span class="p">))</span> <span class="n">ClosedFlagEnum</span> <span class="p">{</span>
  <span class="n">C0</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">C1</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">enum_extensibility</span><span class="p">(</span><span class="n">open</span><span class="p">),</span><span class="n">flag_enum</span><span class="p">))</span> <span class="n">OpenFlagEnum</span> <span class="p">{</span>
  <span class="n">D0</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">D1</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="nf">foo1</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">enum</span> <span class="n">ClosedEnum</span> <span class="n">ce</span><span class="p">;</span>
  <span class="k">enum</span> <span class="n">OpenEnum</span> <span class="n">oe</span><span class="p">;</span>
  <span class="k">enum</span> <span class="n">ClosedFlagEnum</span> <span class="n">cfe</span><span class="p">;</span>
  <span class="k">enum</span> <span class="n">OpenFlagEnum</span> <span class="n">ofe</span><span class="p">;</span>

  <span class="n">ce</span> <span class="o">=</span> <span class="n">A1</span><span class="p">;</span>           <span class="c1">// no warnings</span>
  <span class="n">ce</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>          <span class="c1">// warning issued</span>
  <span class="n">oe</span> <span class="o">=</span> <span class="n">B1</span><span class="p">;</span>           <span class="c1">// no warnings</span>
  <span class="n">oe</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>          <span class="c1">// no warnings</span>
  <span class="n">cfe</span> <span class="o">=</span> <span class="n">C0</span> <span class="o">|</span> <span class="n">C1</span><span class="p">;</span>     <span class="c1">// no warnings</span>
  <span class="n">cfe</span> <span class="o">=</span> <span class="n">C0</span> <span class="o">|</span> <span class="n">C1</span> <span class="o">|</span> <span class="mi">4</span><span class="p">;</span> <span class="c1">// warning issued</span>
  <span class="n">ofe</span> <span class="o">=</span> <span class="n">D0</span> <span class="o">|</span> <span class="n">D1</span><span class="p">;</span>     <span class="c1">// no warnings</span>
  <span class="n">ofe</span> <span class="o">=</span> <span class="n">D0</span> <span class="o">|</span> <span class="n">D1</span> <span class="o">|</span> <span class="mi">4</span><span class="p">;</span> <span class="c1">// no warnings</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="flag-enum">
<h3><a class="toc-backref" href="#id128">flag_enum</a><a class="headerlink" href="#flag-enum" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">flag_enum</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::flag_enum</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::flag_enum</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>This attribute can be added to an enumerator to signal to the compiler that it
is intended to be used as a flag type. This will cause the compiler to assume
that the range of the type includes all of the values that you can get by
manipulating bits of the enumerator when issuing warnings.</p>
</div>
<div class="section" id="layout-version">
<h3><a class="toc-backref" href="#id129">layout_version</a><a class="headerlink" href="#layout-version" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">layout_version</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The layout_version attribute requests that the compiler utilize the class
layout rules of a particular compiler version.
This attribute only applies to struct, class, and union types.
It is only supported when using the Microsoft C++ ABI.</p>
</div>
<div class="section" id="lto-visibility-public">
<h3><a class="toc-backref" href="#id130">lto_visibility_public</a><a class="headerlink" href="#lto-visibility-public" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">lto_visibility_public</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::lto_visibility_public</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::lto_visibility_public</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>See <a class="reference internal" href="LTOVisibility.html"><em>LTO Visibility</em></a>.</p>
</div>
<div class="section" id="noderef">
<h3><a class="toc-backref" href="#id131">noderef</a><a class="headerlink" href="#noderef" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">noderef</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::noderef</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::noderef</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">noderef</span></tt> attribute causes clang to diagnose dereferences of annotated pointer types.
This is ideally used with pointers that point to special memory which cannot be read
from or written to, but allowing for the pointer to be used in pointer arithmetic.
The following are examples of valid expressions where dereferences are diagnosed:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="kt">int</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">noderef</span><span class="p">))</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>  <span class="c1">// warning</span>

<span class="kt">int</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">noderef</span><span class="p">))</span> <span class="o">**</span><span class="n">p2</span><span class="p">;</span>
<span class="n">x</span> <span class="o">=</span> <span class="o">**</span><span class="n">p2</span><span class="p">;</span>  <span class="c1">// warning</span>

<span class="kt">int</span> <span class="o">*</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">noderef</span><span class="p">))</span> <span class="o">*</span><span class="n">p3</span><span class="p">;</span>
<span class="n">p</span> <span class="o">=</span> <span class="o">*</span><span class="n">p3</span><span class="p">;</span>  <span class="c1">// warning</span>

<span class="k">struct</span> <span class="n">S</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">a</span><span class="p">;</span>
<span class="p">};</span>
<span class="k">struct</span> <span class="n">S</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">noderef</span><span class="p">))</span> <span class="o">*</span><span class="n">s</span><span class="p">;</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">s</span><span class="o">-&gt;</span><span class="n">a</span><span class="p">;</span>    <span class="c1">// warning</span>
<span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="n">s</span><span class="p">).</span><span class="n">a</span><span class="p">;</span>  <span class="c1">// warning</span>
</pre></div>
</div>
<p>Not all dereferences may diagnose a warning if the value directed by the pointer may not be
accessed. The following are examples of valid expressions where may not be diagnosed:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="kt">int</span> <span class="o">*</span><span class="n">q</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">noderef</span><span class="p">))</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
<span class="n">q</span> <span class="o">=</span> <span class="o">&amp;*</span><span class="n">p</span><span class="p">;</span>
<span class="n">q</span> <span class="o">=</span> <span class="o">*&amp;</span><span class="n">p</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">S</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">a</span><span class="p">;</span>
<span class="p">};</span>
<span class="k">struct</span> <span class="n">S</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">noderef</span><span class="p">))</span> <span class="o">*</span><span class="n">s</span><span class="p">;</span>
<span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">s</span><span class="o">-&gt;</span><span class="n">a</span><span class="p">;</span>
<span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="p">(</span><span class="o">*</span><span class="n">s</span><span class="p">).</span><span class="n">a</span><span class="p">;</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">noderef</span></tt> is currently only supported for pointers and arrays and not usable for
references or Objective-C object pointers.</p>
</div>
<div class="section" id="novtable">
<h3><a class="toc-backref" href="#id132">novtable</a><a class="headerlink" href="#novtable" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">novtable</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>This attribute can be added to a class declaration or definition to signal to
the compiler that constructors and destructors will not reference the virtual
function table. It is only supported when using the Microsoft C++ ABI.</p>
</div>
<div class="section" id="objc-subclassing-restricted">
<h3><a class="toc-backref" href="#id133">objc_subclassing_restricted</a><a class="headerlink" href="#objc-subclassing-restricted" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">objc_subclassing_restricted</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::objc_subclassing_restricted</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::objc_subclassing_restricted</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>This attribute can be added to an Objective-C <tt class="docutils literal"><span class="pre">&#64;interface</span></tt> declaration to
ensure that this class cannot be subclassed.</p>
</div>
<div class="section" id="selectany">
<h3><a class="toc-backref" href="#id134">selectany</a><a class="headerlink" href="#selectany" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">selectany</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::selectany</span></tt></td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">selectany</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>This attribute appertains to a global symbol, causing it to have a weak
definition (
<a class="reference external" href="https://llvm.org/docs/LangRef.html#linkage-types">linkonce</a>
), allowing the linker to select any definition.</p>
<p>For more information see
<a class="reference external" href="https://gcc.gnu.org/onlinedocs/gcc-7.2.0/gcc/Microsoft-Windows-Variable-Attributes.html">gcc documentation</a>
or <a class="reference external" href="https://docs.microsoft.com/pl-pl/cpp/cpp/selectany">msvc documentation</a>.</p>
</div>
<div class="section" id="transparent-union">
<h3><a class="toc-backref" href="#id135">transparent_union</a><a class="headerlink" href="#transparent-union" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">transparent_union</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::transparent_union</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>This attribute can be applied to a union to change the behaviour of calls to
functions that have an argument with a transparent union type. The compiler
behaviour is changed in the following manner:</p>
<ul class="simple">
<li>A value whose type is any member of the transparent union can be passed as an
argument without the need to cast that value.</li>
<li>The argument is passed to the function using the calling convention of the
first member of the transparent union. Consequently, all the members of the
transparent union should have the same calling convention as its first member.</li>
</ul>
<p>Transparent unions are not supported in C++.</p>
</div>
</div>
<div class="section" id="statement-attributes">
<h2><a class="toc-backref" href="#id136">Statement Attributes</a><a class="headerlink" href="#statement-attributes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="pragma-clang-loop">
<h3><a class="toc-backref" href="#id137">#pragma clang loop</a><a class="headerlink" href="#pragma-clang-loop" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">clang</span> <span class="pre">loop</span></tt> <br/> <tt class="docutils literal"><span class="pre">unroll</span></tt> <br/> <tt class="docutils literal"><span class="pre">nounroll</span></tt> <br/> <tt class="docutils literal"><span class="pre">unroll_and_jam</span></tt> <br/> <tt class="docutils literal"><span class="pre">nounroll_and_jam</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">loop</span></tt> directive allows loop optimization hints to be
specified for the subsequent loop. The directive allows pipelining to be
disabled, or vectorization, interleaving, and unrolling to be enabled or disabled.
Vector width, interleave count, unrolling count, and the initiation interval
for pipelining can be explicitly specified. See <a class="reference external" href="http://clang.llvm.org/docs/LanguageExtensions.html#extensions-for-loop-hint-optimizations">language extensions</a>
for details.</p>
</div>
<div class="section" id="pragma-unroll-pragma-nounroll">
<h3><a class="toc-backref" href="#id138">#pragma unroll, #pragma nounroll</a><a class="headerlink" href="#pragma-unroll-pragma-nounroll" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">clang</span> <span class="pre">loop</span></tt> <br/> <tt class="docutils literal"><span class="pre">unroll</span></tt> <br/> <tt class="docutils literal"><span class="pre">nounroll</span></tt> <br/> <tt class="docutils literal"><span class="pre">unroll_and_jam</span></tt> <br/> <tt class="docutils literal"><span class="pre">nounroll_and_jam</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>Loop unrolling optimization hints can be specified with <tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">unroll</span></tt> and
<tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">nounroll</span></tt>. The pragma is placed immediately before a for, while,
do-while, or c++11 range-based for loop.</p>
<p>Specifying <tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">unroll</span></tt> without a parameter directs the loop unroller to
attempt to fully unroll the loop if the trip count is known at compile time and
attempt to partially unroll the loop if the trip count is not known at compile
time:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="cp">#pragma unroll</span>
<span class="k">for</span> <span class="p">(...)</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Specifying the optional parameter, <tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">unroll</span> <span class="pre">_value_</span></tt>, directs the
unroller to unroll the loop <tt class="docutils literal"><span class="pre">_value_</span></tt> times.  The parameter may optionally be
enclosed in parentheses:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="cp">#pragma unroll 16</span>
<span class="k">for</span> <span class="p">(...)</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span>

<span class="cp">#pragma unroll(16)</span>
<span class="k">for</span> <span class="p">(...)</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Specifying <tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">nounroll</span></tt> indicates that the loop should not be unrolled:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="cp">#pragma nounroll</span>
<span class="k">for</span> <span class="p">(...)</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">unroll</span></tt> and <tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">unroll</span> <span class="pre">_value_</span></tt> have identical semantics to
<tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">loop</span> <span class="pre">unroll(full)</span></tt> and
<tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">loop</span> <span class="pre">unroll_count(_value_)</span></tt> respectively. <tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">nounroll</span></tt>
is equivalent to <tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">loop</span> <span class="pre">unroll(disable)</span></tt>.  See
<a class="reference external" href="http://clang.llvm.org/docs/LanguageExtensions.html#extensions-for-loop-hint-optimizations">language extensions</a>
for further details including limitations of the unroll hints.</p>
</div>
<div class="section" id="read-only-write-only-read-write-read-only-write-only-read-write">
<h3><a class="toc-backref" href="#id139">__read_only, __write_only, __read_write (read_only, write_only, read_write)</a><a class="headerlink" href="#read-only-write-only-read-write-read-only-write-only-read-write" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">__read_only</span></tt> <br/> <tt class="docutils literal"><span class="pre">read_only</span></tt> <br/> <tt class="docutils literal"><span class="pre">__write_only</span></tt> <br/> <tt class="docutils literal"><span class="pre">write_only</span></tt> <br/> <tt class="docutils literal"><span class="pre">__read_write</span></tt> <br/> <tt class="docutils literal"><span class="pre">read_write</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The access qualifiers must be used with image object arguments or pipe arguments
to declare if they are being read or written by a kernel or function.</p>
<p>The read_only/__read_only, write_only/__write_only and read_write/__read_write
names are reserved for use as access qualifiers and shall not be used otherwise.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">kernel</span> <span class="kt">void</span>
<span class="nf">foo</span> <span class="p">(</span><span class="n">read_only</span> <span class="n">image2d_t</span> <span class="n">imageA</span><span class="p">,</span>
     <span class="n">write_only</span> <span class="n">image2d_t</span> <span class="n">imageB</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In the above example imageA is a read-only 2D image object, and imageB is a
write-only 2D image object.</p>
<p>The read_write (or __read_write) qualifier can not be used with pipe.</p>
<p>More details can be found in the OpenCL C language Spec v2.0, Section 6.6.</p>
</div>
<div class="section" id="fallthrough">
<h3><a class="toc-backref" href="#id140">fallthrough</a><a class="headerlink" href="#fallthrough" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">fallthrough</span></tt> <br/> <tt class="docutils literal"><span class="pre">clang::fallthrough</span></tt></td>
<td><tt class="docutils literal"><span class="pre">fallthrough</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">fallthrough</span></tt> (or <tt class="docutils literal"><span class="pre">clang::fallthrough</span></tt>) attribute is used
to annotate intentional fall-through
between switch labels.  It can only be applied to a null statement placed at a
point of execution between any statement and the next switch label.  It is
common to mark these places with a specific comment, but this attribute is
meant to replace comments with a more strict annotation, which can be checked
by the compiler.  This attribute doesn&#8217;t change semantics of the code and can
be used wherever an intended fall-through occurs.  It is designed to mimic
control-flow statements like <tt class="docutils literal"><span class="pre">break;</span></tt>, so it can be placed in most places
where <tt class="docutils literal"><span class="pre">break;</span></tt> can, but only if there are no statements on the execution path
between it and the next switch label.</p>
<p>By default, Clang does not warn on unannotated fallthrough from one <tt class="docutils literal"><span class="pre">switch</span></tt>
case to another. Diagnostics on fallthrough without a corresponding annotation
can be enabled with the <tt class="docutils literal"><span class="pre">-Wimplicit-fallthrough</span></tt> argument.</p>
<p>Here is an example:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="c1">// compile with -Wimplicit-fallthrough</span>
<span class="k">switch</span> <span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">{</span>
<span class="k">case</span> <span class="mi">22</span><span class="o">:</span>
<span class="k">case</span> <span class="mi">33</span><span class="o">:</span>  <span class="c1">// no warning: no statements between case labels</span>
  <span class="n">f</span><span class="p">();</span>
<span class="k">case</span> <span class="mi">44</span><span class="o">:</span>  <span class="c1">// warning: unannotated fall-through</span>
  <span class="n">g</span><span class="p">();</span>
  <span class="p">[[</span><span class="n">clang</span><span class="o">::</span><span class="n">fallthrough</span><span class="p">]];</span>
<span class="k">case</span> <span class="mi">55</span><span class="o">:</span>  <span class="c1">// no warning</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">h</span><span class="p">();</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">else</span> <span class="p">{</span>
    <span class="n">i</span><span class="p">();</span>
    <span class="p">[[</span><span class="n">clang</span><span class="o">::</span><span class="n">fallthrough</span><span class="p">]];</span>
  <span class="p">}</span>
<span class="k">case</span> <span class="mi">66</span><span class="o">:</span>  <span class="c1">// no warning</span>
  <span class="n">p</span><span class="p">();</span>
  <span class="p">[[</span><span class="n">clang</span><span class="o">::</span><span class="n">fallthrough</span><span class="p">]];</span> <span class="c1">// warning: fallthrough annotation does not</span>
                          <span class="c1">//          directly precede case label</span>
  <span class="n">q</span><span class="p">();</span>
<span class="k">case</span> <span class="mi">77</span><span class="o">:</span>  <span class="c1">// warning: unannotated fall-through</span>
  <span class="n">r</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="intel-reqd-sub-group-size">
<h3><a class="toc-backref" href="#id141">intel_reqd_sub_group_size</a><a class="headerlink" href="#intel-reqd-sub-group-size" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">intel_reqd_sub_group_size</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The optional attribute intel_reqd_sub_group_size can be used to indicate that
the kernel must be compiled and executed with the specified subgroup size. When
this attribute is present, get_max_sub_group_size() is guaranteed to return the
specified integer value. This is important for the correctness of many subgroup
algorithms, and in some cases may be used by the compiler to generate more optimal
code. See <cite>cl_intel_required_subgroup_size
&lt;https://www.khronos.org/registry/OpenCL/extensions/intel/cl_intel_required_subgroup_size.txt&gt;</cite>
for details.</p>
</div>
<div class="section" id="opencl-unroll-hint">
<h3><a class="toc-backref" href="#id142">opencl_unroll_hint</a><a class="headerlink" href="#opencl-unroll-hint" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">opencl_unroll_hint</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The opencl_unroll_hint attribute qualifier can be used to specify that a loop
(for, while and do loops) can be unrolled. This attribute qualifier can be
used to specify full unrolling or partial unrolling by a specified amount.
This is a compiler hint and the compiler may ignore this directive. See
<a class="reference external" href="https://www.khronos.org/registry/cl/specs/opencl-2.0.pdf">OpenCL v2.0</a>
s6.11.5 for details.</p>
</div>
<div class="section" id="suppress">
<h3><a class="toc-backref" href="#id143">suppress</a><a class="headerlink" href="#suppress" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">gsl::suppress</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">[[gsl::suppress]]</span></tt> attribute suppresses specific
clang-tidy diagnostics for rules of the <a class="reference external" href="https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#inforce-enforcement">C++ Core Guidelines</a> in a portable
way. The attribute can be attached to declarations, statements, and at
namespace scope.</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="p">[[</span><span class="n">gsl</span><span class="o">::</span><span class="n">suppress</span><span class="p">(</span><span class="s">&quot;Rh-public&quot;</span><span class="p">)]]</span>
<span class="kt">void</span> <span class="n">f_</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
  <span class="p">[[</span><span class="n">gsl</span><span class="o">::</span><span class="n">suppress</span><span class="p">(</span><span class="s">&quot;type&quot;</span><span class="p">)]]</span> <span class="p">{</span>
    <span class="n">p</span> <span class="o">=</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">*&gt;</span><span class="p">(</span><span class="mi">7</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="k">namespace</span> <span class="n">N</span> <span class="p">{</span>
  <span class="p">[[</span><span class="n">clang</span><span class="o">::</span><span class="n">suppress</span><span class="p">(</span><span class="s">&quot;type&quot;</span><span class="p">,</span> <span class="s">&quot;bounds&quot;</span><span class="p">)]];</span>
  <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="amd-gpu-attributes">
<h2><a class="toc-backref" href="#id144">AMD GPU Attributes</a><a class="headerlink" href="#amd-gpu-attributes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="amdgpu-flat-work-group-size">
<h3><a class="toc-backref" href="#id145">amdgpu_flat_work_group_size</a><a class="headerlink" href="#amdgpu-flat-work-group-size" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">amdgpu_flat_work_group_size</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::amdgpu_flat_work_group_size</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The flat work-group size is the number of work-items in the work-group size
specified when the kernel is dispatched. It is the product of the sizes of the
x, y, and z dimension of the work-group.</p>
<p>Clang supports the
<tt class="docutils literal"><span class="pre">__attribute__((amdgpu_flat_work_group_size(&lt;min&gt;,</span> <span class="pre">&lt;max&gt;)))</span></tt> attribute for the
AMDGPU target. This attribute may be attached to a kernel function definition
and is an optimization hint.</p>
<p><tt class="docutils literal"><span class="pre">&lt;min&gt;</span></tt> parameter specifies the minimum flat work-group size, and <tt class="docutils literal"><span class="pre">&lt;max&gt;</span></tt>
parameter specifies the maximum flat work-group size (must be greater than
<tt class="docutils literal"><span class="pre">&lt;min&gt;</span></tt>) to which all dispatches of the kernel will conform. Passing <tt class="docutils literal"><span class="pre">0,</span> <span class="pre">0</span></tt>
as <tt class="docutils literal"><span class="pre">&lt;min&gt;,</span> <span class="pre">&lt;max&gt;</span></tt> implies the default behavior (<tt class="docutils literal"><span class="pre">128,</span> <span class="pre">256</span></tt>).</p>
<p>If specified, the AMDGPU target backend might be able to produce better machine
code for barriers and perform scratch promotion by estimating available group
segment size.</p>
<dl class="docutils">
<dt>An error will be given if:</dt>
<dd><ul class="first last simple">
<li>Specified values violate subtarget specifications;</li>
<li>Specified values are not compatible with values provided through other
attributes.</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="amdgpu-num-sgpr">
<h3><a class="toc-backref" href="#id146">amdgpu_num_sgpr</a><a class="headerlink" href="#amdgpu-num-sgpr" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">amdgpu_num_sgpr</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::amdgpu_num_sgpr</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Clang supports the <tt class="docutils literal"><span class="pre">__attribute__((amdgpu_num_sgpr(&lt;num_sgpr&gt;)))</span></tt> and
<tt class="docutils literal"><span class="pre">__attribute__((amdgpu_num_vgpr(&lt;num_vgpr&gt;)))</span></tt> attributes for the AMDGPU
target. These attributes may be attached to a kernel function definition and are
an optimization hint.</p>
<p>If these attributes are specified, then the AMDGPU target backend will attempt
to limit the number of SGPRs and/or VGPRs used to the specified value(s). The
number of used SGPRs and/or VGPRs may further be rounded up to satisfy the
allocation requirements or constraints of the subtarget. Passing <tt class="docutils literal"><span class="pre">0</span></tt> as
<tt class="docutils literal"><span class="pre">num_sgpr</span></tt> and/or <tt class="docutils literal"><span class="pre">num_vgpr</span></tt> implies the default behavior (no limits).</p>
<p>These attributes can be used to test the AMDGPU target backend. It is
recommended that the <tt class="docutils literal"><span class="pre">amdgpu_waves_per_eu</span></tt> attribute be used to control
resources such as SGPRs and VGPRs since it is aware of the limits for different
subtargets.</p>
<dl class="docutils">
<dt>An error will be given if:</dt>
<dd><ul class="first last simple">
<li>Specified values violate subtarget specifications;</li>
<li>Specified values are not compatible with values provided through other
attributes;</li>
<li>The AMDGPU target backend is unable to create machine code that can meet the
request.</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="amdgpu-num-vgpr">
<h3><a class="toc-backref" href="#id147">amdgpu_num_vgpr</a><a class="headerlink" href="#amdgpu-num-vgpr" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">amdgpu_num_vgpr</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::amdgpu_num_vgpr</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Clang supports the <tt class="docutils literal"><span class="pre">__attribute__((amdgpu_num_sgpr(&lt;num_sgpr&gt;)))</span></tt> and
<tt class="docutils literal"><span class="pre">__attribute__((amdgpu_num_vgpr(&lt;num_vgpr&gt;)))</span></tt> attributes for the AMDGPU
target. These attributes may be attached to a kernel function definition and are
an optimization hint.</p>
<p>If these attributes are specified, then the AMDGPU target backend will attempt
to limit the number of SGPRs and/or VGPRs used to the specified value(s). The
number of used SGPRs and/or VGPRs may further be rounded up to satisfy the
allocation requirements or constraints of the subtarget. Passing <tt class="docutils literal"><span class="pre">0</span></tt> as
<tt class="docutils literal"><span class="pre">num_sgpr</span></tt> and/or <tt class="docutils literal"><span class="pre">num_vgpr</span></tt> implies the default behavior (no limits).</p>
<p>These attributes can be used to test the AMDGPU target backend. It is
recommended that the <tt class="docutils literal"><span class="pre">amdgpu_waves_per_eu</span></tt> attribute be used to control
resources such as SGPRs and VGPRs since it is aware of the limits for different
subtargets.</p>
<dl class="docutils">
<dt>An error will be given if:</dt>
<dd><ul class="first last simple">
<li>Specified values violate subtarget specifications;</li>
<li>Specified values are not compatible with values provided through other
attributes;</li>
<li>The AMDGPU target backend is unable to create machine code that can meet the
request.</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="amdgpu-waves-per-eu">
<h3><a class="toc-backref" href="#id148">amdgpu_waves_per_eu</a><a class="headerlink" href="#amdgpu-waves-per-eu" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">amdgpu_waves_per_eu</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::amdgpu_waves_per_eu</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>A compute unit (CU) is responsible for executing the wavefronts of a work-group.
It is composed of one or more execution units (EU), which are responsible for
executing the wavefronts. An EU can have enough resources to maintain the state
of more than one executing wavefront. This allows an EU to hide latency by
switching between wavefronts in a similar way to symmetric multithreading on a
CPU. In order to allow the state for multiple wavefronts to fit on an EU, the
resources used by a single wavefront have to be limited. For example, the number
of SGPRs and VGPRs. Limiting such resources can allow greater latency hiding,
but can result in having to spill some register state to memory.</p>
<p>Clang supports the <tt class="docutils literal"><span class="pre">__attribute__((amdgpu_waves_per_eu(&lt;min&gt;[,</span> <span class="pre">&lt;max&gt;])))</span></tt>
attribute for the AMDGPU target. This attribute may be attached to a kernel
function definition and is an optimization hint.</p>
<p><tt class="docutils literal"><span class="pre">&lt;min&gt;</span></tt> parameter specifies the requested minimum number of waves per EU, and
<em>optional</em> <tt class="docutils literal"><span class="pre">&lt;max&gt;</span></tt> parameter specifies the requested maximum number of waves
per EU (must be greater than <tt class="docutils literal"><span class="pre">&lt;min&gt;</span></tt> if specified). If <tt class="docutils literal"><span class="pre">&lt;max&gt;</span></tt> is omitted,
then there is no restriction on the maximum number of waves per EU other than
the one dictated by the hardware for which the kernel is compiled. Passing
<tt class="docutils literal"><span class="pre">0,</span> <span class="pre">0</span></tt> as <tt class="docutils literal"><span class="pre">&lt;min&gt;,</span> <span class="pre">&lt;max&gt;</span></tt> implies the default behavior (no limits).</p>
<p>If specified, this attribute allows an advanced developer to tune the number of
wavefronts that are capable of fitting within the resources of an EU. The AMDGPU
target backend can use this information to limit resources, such as number of
SGPRs, number of VGPRs, size of available group and private memory segments, in
such a way that guarantees that at least <tt class="docutils literal"><span class="pre">&lt;min&gt;</span></tt> wavefronts and at most
<tt class="docutils literal"><span class="pre">&lt;max&gt;</span></tt> wavefronts are able to fit within the resources of an EU. Requesting
more wavefronts can hide memory latency but limits available registers which
can result in spilling. Requesting fewer wavefronts can help reduce cache
thrashing, but can reduce memory latency hiding.</p>
<p>This attribute controls the machine code generated by the AMDGPU target backend
to ensure it is capable of meeting the requested values. However, when the
kernel is executed, there may be other reasons that prevent meeting the request,
for example, there may be wavefronts from other kernels executing on the EU.</p>
<dl class="docutils">
<dt>An error will be given if:</dt>
<dd><ul class="first last simple">
<li>Specified values violate subtarget specifications;</li>
<li>Specified values are not compatible with values provided through other
attributes;</li>
<li>The AMDGPU target backend is unable to create machine code that can meet the
request.</li>
</ul>
</dd>
</dl>
</div>
</div>
<div class="section" id="opencl-address-spaces">
<h2><a class="toc-backref" href="#id149">OpenCL Address Spaces</a><a class="headerlink" href="#opencl-address-spaces" title="Permalink to this headline">¶</a></h2>
<p>The address space qualifier may be used to specify the region of memory that is
used to allocate the object. OpenCL supports the following address spaces:
__generic(generic), __global(global), __local(local), __private(private),
__constant(constant).</p>
<blockquote>
<div><div class="highlight-c"><div class="highlight"><pre><span class="n">__constant</span> <span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="p">...;</span>

<span class="n">__generic</span> <span class="kt">int</span><span class="o">*</span> <span class="nf">foo</span><span class="p">(</span><span class="n">global</span> <span class="kt">int</span><span class="o">*</span> <span class="n">g</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">__local</span> <span class="kt">int</span><span class="o">*</span> <span class="n">l</span><span class="p">;</span>
  <span class="n">private</span> <span class="kt">int</span> <span class="n">p</span><span class="p">;</span>
  <span class="p">...</span>
  <span class="k">return</span> <span class="n">l</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>More details can be found in the OpenCL C language Spec v2.0, Section 6.5.</p>
<div class="section" id="constant">
<h3><a class="toc-backref" href="#id150">constant</a><a class="headerlink" href="#constant" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">__constant</span></tt> <br/> <tt class="docutils literal"><span class="pre">constant</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The constant address space attribute signals that an object is located in
a constant (non-modifiable) memory region. It is available to all work items.
Any type can be annotated with the constant address space attribute. Objects
with the constant address space qualifier can be declared in any scope and must
have an initializer.</p>
</div>
<div class="section" id="generic">
<h3><a class="toc-backref" href="#id151">generic</a><a class="headerlink" href="#generic" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">__generic</span></tt> <br/> <tt class="docutils literal"><span class="pre">generic</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The generic address space attribute is only available with OpenCL v2.0 and later.
It can be used with pointer types. Variables in global and local scope and
function parameters in non-kernel functions can have the generic address space
type attribute. It is intended to be a placeholder for any other address space
except for &#8216;__constant&#8217; in OpenCL code which can be used with multiple address
spaces.</p>
</div>
<div class="section" id="global">
<h3><a class="toc-backref" href="#id152">global</a><a class="headerlink" href="#global" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">__global</span></tt> <br/> <tt class="docutils literal"><span class="pre">global</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The global address space attribute specifies that an object is allocated in
global memory, which is accessible by all work items. The content stored in this
memory area persists between kernel executions. Pointer types to the global
address space are allowed as function parameters or local variables. Starting
with OpenCL v2.0, the global address space can be used with global (program
scope) variables and static local variable as well.</p>
</div>
<div class="section" id="local">
<h3><a class="toc-backref" href="#id153">local</a><a class="headerlink" href="#local" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">__local</span></tt> <br/> <tt class="docutils literal"><span class="pre">local</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The local address space specifies that an object is allocated in the local (work
group) memory area, which is accessible to all work items in the same work
group. The content stored in this memory region is not accessible after
the kernel execution ends. In a kernel function scope, any variable can be in
the local address space. In other scopes, only pointer types to the local address
space are allowed. Local address space variables cannot have an initializer.</p>
</div>
<div class="section" id="private">
<h3><a class="toc-backref" href="#id154">private</a><a class="headerlink" href="#private" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">__private</span></tt> <br/> <tt class="docutils literal"><span class="pre">private</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The private address space specifies that an object is allocated in the private
(work item) memory. Other work items cannot access the same memory area and its
content is destroyed after work item execution ends. Local variables can be
declared in the private address space. Function arguments are always in the
private address space. Kernel function arguments of a pointer or an array type
cannot point to the private address space.</p>
</div>
</div>
<div class="section" id="calling-conventions">
<h2><a class="toc-backref" href="#id155">Calling Conventions</a><a class="headerlink" href="#calling-conventions" title="Permalink to this headline">¶</a></h2>
<p>Clang supports several different calling conventions, depending on the target
platform and architecture. The calling convention used for a function determines
how parameters are passed, how results are returned to the caller, and other
low-level details of calling a function.</p>
<div class="section" id="aarch64-vector-pcs">
<h3><a class="toc-backref" href="#id156">aarch64_vector_pcs</a><a class="headerlink" href="#aarch64-vector-pcs" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">aarch64_vector_pcs</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::aarch64_vector_pcs</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::aarch64_vector_pcs</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>On AArch64 targets, this attribute changes the calling convention of a
function to preserve additional floating-point and Advanced SIMD registers
relative to the default calling convention used for AArch64.</p>
<p>This means it is more efficient to call such functions from code that performs
extensive floating-point and vector calculations, because fewer live SIMD and FP
registers need to be saved. This property makes it well-suited for e.g.
floating-point or vector math library functions, which are typically leaf
functions that require a small number of registers.</p>
<p>However, using this attribute also means that it is more expensive to call
a function that adheres to the default calling convention from within such
a function. Therefore, it is recommended that this attribute is only used
for leaf functions.</p>
<p>For more information, see the documentation for <a class="reference external" href="https://developer.arm.com/products/software-development-tools/hpc/arm-compiler-for-hpc/vector-function-abi">aarch64_vector_pcs</a> on
the Arm Developer website.</p>
</div>
<div class="section" id="fastcall">
<h3><a class="toc-backref" href="#id157">fastcall</a><a class="headerlink" href="#fastcall" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">fastcall</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::fastcall</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">__fastcall</span></tt> <br/> <tt class="docutils literal"><span class="pre">_fastcall</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>On 32-bit x86 targets, this attribute changes the calling convention of a
function to use ECX and EDX as register parameters and clear parameters off of
the stack on return. This convention does not support variadic calls or
unprototyped functions in C, and has no effect on x86_64 targets. This calling
convention is supported primarily for compatibility with existing code. Users
seeking register parameters should use the <tt class="docutils literal"><span class="pre">regparm</span></tt> attribute, which does
not require callee-cleanup.  See the documentation for <a class="reference external" href="http://msdn.microsoft.com/en-us/library/6xa169sk.aspx">__fastcall</a> on MSDN.</p>
</div>
<div class="section" id="ms-abi">
<h3><a class="toc-backref" href="#id158">ms_abi</a><a class="headerlink" href="#ms-abi" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ms_abi</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::ms_abi</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>On non-Windows x86_64 targets, this attribute changes the calling convention of
a function to match the default convention used on Windows x86_64. This
attribute has no effect on Windows targets or non-x86_64 targets.</p>
</div>
<div class="section" id="pcs">
<h3><a class="toc-backref" href="#id159">pcs</a><a class="headerlink" href="#pcs" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">pcs</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::pcs</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>On ARM targets, this attribute can be used to select calling conventions
similar to <tt class="docutils literal"><span class="pre">stdcall</span></tt> on x86. Valid parameter values are &#8220;aapcs&#8221; and
&#8220;aapcs-vfp&#8221;.</p>
</div>
<div class="section" id="preserve-all">
<h3><a class="toc-backref" href="#id160">preserve_all</a><a class="headerlink" href="#preserve-all" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">preserve_all</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::preserve_all</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::preserve_all</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>On X86-64 and AArch64 targets, this attribute changes the calling convention of
a function. The <tt class="docutils literal"><span class="pre">preserve_all</span></tt> calling convention attempts to make the code
in the caller even less intrusive than the <tt class="docutils literal"><span class="pre">preserve_most</span></tt> calling convention.
This calling convention also behaves identical to the <tt class="docutils literal"><span class="pre">C</span></tt> calling convention
on how arguments and return values are passed, but it uses a different set of
caller/callee-saved registers. This removes the burden of saving and
recovering a large register set before and after the call in the caller. If
the arguments are passed in callee-saved registers, then they will be
preserved by the callee across the call. This doesn&#8217;t apply for values
returned in callee-saved registers.</p>
<ul class="simple">
<li>On X86-64 the callee preserves all general purpose registers, except for
R11. R11 can be used as a scratch register. Furthermore it also preserves
all floating-point registers (XMMs/YMMs).</li>
</ul>
<p>The idea behind this convention is to support calls to runtime functions
that don&#8217;t need to call out to any other functions.</p>
<p>This calling convention, like the <tt class="docutils literal"><span class="pre">preserve_most</span></tt> calling convention, will be
used by a future version of the Objective-C runtime and should be considered
experimental at this time.</p>
</div>
<div class="section" id="preserve-most">
<h3><a class="toc-backref" href="#id161">preserve_most</a><a class="headerlink" href="#preserve-most" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">preserve_most</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::preserve_most</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::preserve_most</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>On X86-64 and AArch64 targets, this attribute changes the calling convention of
a function. The <tt class="docutils literal"><span class="pre">preserve_most</span></tt> calling convention attempts to make the code
in the caller as unintrusive as possible. This convention behaves identically
to the <tt class="docutils literal"><span class="pre">C</span></tt> calling convention on how arguments and return values are passed,
but it uses a different set of caller/callee-saved registers. This alleviates
the burden of saving and recovering a large register set before and after the
call in the caller. If the arguments are passed in callee-saved registers,
then they will be preserved by the callee across the call. This doesn&#8217;t
apply for values returned in callee-saved registers.</p>
<ul class="simple">
<li>On X86-64 the callee preserves all general purpose registers, except for
R11. R11 can be used as a scratch register. Floating-point registers
(XMMs/YMMs) are not preserved and need to be saved by the caller.</li>
</ul>
<p>The idea behind this convention is to support calls to runtime functions
that have a hot path and a cold path. The hot path is usually a small piece
of code that doesn&#8217;t use many registers. The cold path might need to call out to
another function and therefore only needs to preserve the caller-saved
registers, which haven&#8217;t already been saved by the caller. The
<cite>preserve_most</cite> calling convention is very similar to the <tt class="docutils literal"><span class="pre">cold</span></tt> calling
convention in terms of caller/callee-saved registers, but they are used for
different types of function calls. <tt class="docutils literal"><span class="pre">coldcc</span></tt> is for function calls that are
rarely executed, whereas <cite>preserve_most</cite> function calls are intended to be
on the hot path and definitely executed a lot. Furthermore <tt class="docutils literal"><span class="pre">preserve_most</span></tt>
doesn&#8217;t prevent the inliner from inlining the function call.</p>
<p>This calling convention will be used by a future version of the Objective-C
runtime and should therefore still be considered experimental at this time.
Although this convention was created to optimize certain runtime calls to
the Objective-C runtime, it is not limited to this runtime and might be used
by other runtimes in the future too. The current implementation only
supports X86-64 and AArch64, but the intention is to support more architectures
in the future.</p>
</div>
<div class="section" id="regcall">
<h3><a class="toc-backref" href="#id162">regcall</a><a class="headerlink" href="#regcall" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">regcall</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::regcall</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">__regcall</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>On x86 targets, this attribute changes the calling convention to
<a class="reference external" href="https://software.intel.com/en-us/node/693069">__regcall</a> convention. This convention aims to pass as many arguments
as possible in registers. It also tries to utilize registers for the
return value whenever it is possible.</p>
</div>
<div class="section" id="regparm">
<h3><a class="toc-backref" href="#id163">regparm</a><a class="headerlink" href="#regparm" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">regparm</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::regparm</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>On 32-bit x86 targets, the regparm attribute causes the compiler to pass
the first three integer parameters in EAX, EDX, and ECX instead of on the
stack. This attribute has no effect on variadic functions, and all parameters
are passed via the stack as normal.</p>
</div>
<div class="section" id="stdcall">
<h3><a class="toc-backref" href="#id164">stdcall</a><a class="headerlink" href="#stdcall" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">stdcall</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::stdcall</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">__stdcall</span></tt> <br/> <tt class="docutils literal"><span class="pre">_stdcall</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>On 32-bit x86 targets, this attribute changes the calling convention of a
function to clear parameters off of the stack on return. This convention does
not support variadic calls or unprototyped functions in C, and has no effect on
x86_64 targets. This calling convention is used widely by the Windows API and
COM applications.  See the documentation for <a class="reference external" href="http://msdn.microsoft.com/en-us/library/zxk0tw93.aspx">__stdcall</a> on MSDN.</p>
</div>
<div class="section" id="thiscall">
<h3><a class="toc-backref" href="#id165">thiscall</a><a class="headerlink" href="#thiscall" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">thiscall</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::thiscall</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">__thiscall</span></tt> <br/> <tt class="docutils literal"><span class="pre">_thiscall</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>On 32-bit x86 targets, this attribute changes the calling convention of a
function to use ECX for the first parameter (typically the implicit <tt class="docutils literal"><span class="pre">this</span></tt>
parameter of C++ methods) and clear parameters off of the stack on return. This
convention does not support variadic calls or unprototyped functions in C, and
has no effect on x86_64 targets. See the documentation for <a class="reference external" href="http://msdn.microsoft.com/en-us/library/ek8tkfbw.aspx">__thiscall</a> on
MSDN.</p>
</div>
<div class="section" id="vectorcall">
<h3><a class="toc-backref" href="#id166">vectorcall</a><a class="headerlink" href="#vectorcall" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">vectorcall</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::vectorcall</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::vectorcall</span></tt></td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">__vectorcall</span></tt> <br/> <tt class="docutils literal"><span class="pre">_vectorcall</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>On 32-bit x86 <em>and</em> x86_64 targets, this attribute changes the calling
convention of a function to pass vector parameters in SSE registers.</p>
<p>On 32-bit x86 targets, this calling convention is similar to <tt class="docutils literal"><span class="pre">__fastcall</span></tt>.
The first two integer parameters are passed in ECX and EDX. Subsequent integer
parameters are passed in memory, and callee clears the stack.  On x86_64
targets, the callee does <em>not</em> clear the stack, and integer parameters are
passed in RCX, RDX, R8, and R9 as is done for the default Windows x64 calling
convention.</p>
<p>On both 32-bit x86 and x86_64 targets, vector and floating point arguments are
passed in XMM0-XMM5. Homogeneous vector aggregates of up to four elements are
passed in sequential SSE registers if enough are available. If AVX is enabled,
256 bit vectors are passed in YMM0-YMM5. Any vector or aggregate type that
cannot be passed in registers for any reason is passed by reference, which
allows the caller to align the parameter memory.</p>
<p>See the documentation for <a class="reference external" href="http://msdn.microsoft.com/en-us/library/dn375768.aspx">__vectorcall</a> on MSDN for more details.</p>
</div>
</div>
<div class="section" id="consumed-annotation-checking">
<h2><a class="toc-backref" href="#id167">Consumed Annotation Checking</a><a class="headerlink" href="#consumed-annotation-checking" title="Permalink to this headline">¶</a></h2>
<p>Clang supports additional attributes for checking basic resource management
properties, specifically for unique objects that have a single owning reference.
The following attributes are currently supported, although <strong>the implementation
for these annotations is currently in development and are subject to change.</strong></p>
<div class="section" id="callable-when">
<h3><a class="toc-backref" href="#id168">callable_when</a><a class="headerlink" href="#callable-when" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">callable_when</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::callable_when</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Use <tt class="docutils literal"><span class="pre">__attribute__((callable_when(...)))</span></tt> to indicate what states a method
may be called in.  Valid states are unconsumed, consumed, or unknown.  Each
argument to this attribute must be a quoted string.  E.g.:</p>
<p><tt class="docutils literal"><span class="pre">__attribute__((callable_when(&quot;unconsumed&quot;,</span> <span class="pre">&quot;unknown&quot;)))</span></tt></p>
</div>
<div class="section" id="consumable">
<h3><a class="toc-backref" href="#id169">consumable</a><a class="headerlink" href="#consumable" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">consumable</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::consumable</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Each <tt class="docutils literal"><span class="pre">class</span></tt> that uses any of the typestate annotations must first be marked
using the <tt class="docutils literal"><span class="pre">consumable</span></tt> attribute.  Failure to do so will result in a warning.</p>
<p>This attribute accepts a single parameter that must be one of the following:
<tt class="docutils literal"><span class="pre">unknown</span></tt>, <tt class="docutils literal"><span class="pre">consumed</span></tt>, or <tt class="docutils literal"><span class="pre">unconsumed</span></tt>.</p>
</div>
<div class="section" id="param-typestate">
<h3><a class="toc-backref" href="#id170">param_typestate</a><a class="headerlink" href="#param-typestate" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">param_typestate</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::param_typestate</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>This attribute specifies expectations about function parameters.  Calls to an
function with annotated parameters will issue a warning if the corresponding
argument isn&#8217;t in the expected state.  The attribute is also used to set the
initial state of the parameter when analyzing the function&#8217;s body.</p>
</div>
<div class="section" id="return-typestate">
<h3><a class="toc-backref" href="#id171">return_typestate</a><a class="headerlink" href="#return-typestate" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">return_typestate</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::return_typestate</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">return_typestate</span></tt> attribute can be applied to functions or parameters.
When applied to a function the attribute specifies the state of the returned
value.  The function&#8217;s body is checked to ensure that it always returns a value
in the specified state.  On the caller side, values returned by the annotated
function are initialized to the given state.</p>
<p>When applied to a function parameter it modifies the state of an argument after
a call to the function returns.  The function&#8217;s body is checked to ensure that
the parameter is in the expected state before returning.</p>
</div>
<div class="section" id="set-typestate">
<h3><a class="toc-backref" href="#id172">set_typestate</a><a class="headerlink" href="#set-typestate" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">set_typestate</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::set_typestate</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Annotate methods that transition an object into a new state with
<tt class="docutils literal"><span class="pre">__attribute__((set_typestate(new_state)))</span></tt>.  The new state must be
unconsumed, consumed, or unknown.</p>
</div>
<div class="section" id="test-typestate">
<h3><a class="toc-backref" href="#id173">test_typestate</a><a class="headerlink" href="#test-typestate" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">test_typestate</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::test_typestate</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Use <tt class="docutils literal"><span class="pre">__attribute__((test_typestate(tested_state)))</span></tt> to indicate that a method
returns true if the object is in the specified state..</p>
</div>
</div>
<div class="section" id="type-safety-checking">
<h2><a class="toc-backref" href="#id174">Type Safety Checking</a><a class="headerlink" href="#type-safety-checking" title="Permalink to this headline">¶</a></h2>
<p>Clang supports additional attributes to enable checking type safety properties
that can&#8217;t be enforced by the C type system. To see warnings produced by these
checks, ensure that -Wtype-safety is enabled. Use cases include:</p>
<ul class="simple">
<li>MPI library implementations, where these attributes enable checking that
the buffer type matches the passed <tt class="docutils literal"><span class="pre">MPI_Datatype</span></tt>;</li>
<li>for HDF5 library there is a similar use case to MPI;</li>
<li>checking types of variadic functions&#8217; arguments for functions like
<tt class="docutils literal"><span class="pre">fcntl()</span></tt> and <tt class="docutils literal"><span class="pre">ioctl()</span></tt>.</li>
</ul>
<p>You can detect support for these attributes with <tt class="docutils literal"><span class="pre">__has_attribute()</span></tt>.  For
example:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="cp">#if defined(__has_attribute)</span>
<span class="cp">#  if __has_attribute(argument_with_type_tag) &amp;&amp; \</span>
<span class="cp">      __has_attribute(pointer_with_type_tag) &amp;&amp; \</span>
<span class="cp">      __has_attribute(type_tag_for_datatype)</span>
<span class="cp">#    define ATTR_MPI_PWT(buffer_idx, type_idx) __attribute__((pointer_with_type_tag(mpi,buffer_idx,type_idx)))</span>
<span class="cm">/* ... other macros ...  */</span>
<span class="cp">#  endif</span>
<span class="cp">#endif</span>

<span class="cp">#if !defined(ATTR_MPI_PWT)</span>
<span class="cp"># define ATTR_MPI_PWT(buffer_idx, type_idx)</span>
<span class="cp">#endif</span>

<span class="kt">int</span> <span class="n">MPI_Send</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">int</span> <span class="n">count</span><span class="p">,</span> <span class="n">MPI_Datatype</span> <span class="n">datatype</span> <span class="cm">/*, other args omitted */</span><span class="p">)</span>
    <span class="n">ATTR_MPI_PWT</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span>
</pre></div>
</div>
<div class="section" id="argument-with-type-tag">
<h3><a class="toc-backref" href="#id175">argument_with_type_tag</a><a class="headerlink" href="#argument-with-type-tag" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">argument_with_type_tag</span></tt> <br/> <tt class="docutils literal"><span class="pre">pointer_with_type_tag</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::argument_with_type_tag</span></tt> <br/> <tt class="docutils literal"><span class="pre">clang::pointer_with_type_tag</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::argument_with_type_tag</span></tt> <br/> <tt class="docutils literal"><span class="pre">clang::pointer_with_type_tag</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>Use <tt class="docutils literal"><span class="pre">__attribute__((argument_with_type_tag(arg_kind,</span> <span class="pre">arg_idx,</span>
<span class="pre">type_tag_idx)))</span></tt> on a function declaration to specify that the function
accepts a type tag that determines the type of some other argument.</p>
<p>This attribute is primarily useful for checking arguments of variadic functions
(<tt class="docutils literal"><span class="pre">pointer_with_type_tag</span></tt> can be used in most non-variadic cases).</p>
<dl class="docutils">
<dt>In the attribute prototype above:</dt>
<dd><ul class="first last simple">
<li><tt class="docutils literal"><span class="pre">arg_kind</span></tt> is an identifier that should be used when annotating all
applicable type tags.</li>
<li><tt class="docutils literal"><span class="pre">arg_idx</span></tt> provides the position of a function argument. The expected type of
this function argument will be determined by the function argument specified
by <tt class="docutils literal"><span class="pre">type_tag_idx</span></tt>. In the code example below, &#8220;3&#8221; means that the type of the
function&#8217;s third argument will be determined by <tt class="docutils literal"><span class="pre">type_tag_idx</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">type_tag_idx</span></tt> provides the position of a function argument. This function
argument will be a type tag. The type tag will determine the expected type of
the argument specified by <tt class="docutils literal"><span class="pre">arg_idx</span></tt>. In the code example below, &#8220;2&#8221; means
that the type tag associated with the function&#8217;s second argument should agree
with the type of the argument specified by <tt class="docutils literal"><span class="pre">arg_idx</span></tt>.</li>
</ul>
</dd>
</dl>
<p>For example:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">int</span> <span class="n">fcntl</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="kt">int</span> <span class="n">cmd</span><span class="p">,</span> <span class="p">...)</span>
    <span class="n">__attribute__</span><span class="p">((</span> <span class="n">argument_with_type_tag</span><span class="p">(</span><span class="n">fcntl</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="p">));</span>
<span class="c1">// The function&#39;s second argument will be a type tag; this type tag will</span>
<span class="c1">// determine the expected type of the function&#39;s third argument.</span>
</pre></div>
</div>
</div>
<div class="section" id="pointer-with-type-tag">
<h3><a class="toc-backref" href="#id176">pointer_with_type_tag</a><a class="headerlink" href="#pointer-with-type-tag" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">argument_with_type_tag</span></tt> <br/> <tt class="docutils literal"><span class="pre">pointer_with_type_tag</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::argument_with_type_tag</span></tt> <br/> <tt class="docutils literal"><span class="pre">clang::pointer_with_type_tag</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::argument_with_type_tag</span></tt> <br/> <tt class="docutils literal"><span class="pre">clang::pointer_with_type_tag</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>Use <tt class="docutils literal"><span class="pre">__attribute__((pointer_with_type_tag(ptr_kind,</span> <span class="pre">ptr_idx,</span> <span class="pre">type_tag_idx)))</span></tt>
on a function declaration to specify that the function accepts a type tag that
determines the pointee type of some other pointer argument.</p>
<dl class="docutils">
<dt>In the attribute prototype above:</dt>
<dd><ul class="first last simple">
<li><tt class="docutils literal"><span class="pre">ptr_kind</span></tt> is an identifier that should be used when annotating all
applicable type tags.</li>
<li><tt class="docutils literal"><span class="pre">ptr_idx</span></tt> provides the position of a function argument; this function
argument will have a pointer type. The expected pointee type of this pointer
type will be determined by the function argument specified by
<tt class="docutils literal"><span class="pre">type_tag_idx</span></tt>. In the code example below, &#8220;1&#8221; means that the pointee type
of the function&#8217;s first argument will be determined by <tt class="docutils literal"><span class="pre">type_tag_idx</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">type_tag_idx</span></tt> provides the position of a function argument; this function
argument will be a type tag. The type tag will determine the expected pointee
type of the pointer argument specified by <tt class="docutils literal"><span class="pre">ptr_idx</span></tt>. In the code example
below, &#8220;3&#8221; means that the type tag associated with the function&#8217;s third
argument should agree with the pointee type of the pointer argument specified
by <tt class="docutils literal"><span class="pre">ptr_idx</span></tt>.</li>
</ul>
</dd>
</dl>
<p>For example:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="k">typedef</span> <span class="kt">int</span> <span class="n">MPI_Datatype</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">MPI_Send</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">int</span> <span class="n">count</span><span class="p">,</span> <span class="n">MPI_Datatype</span> <span class="n">datatype</span> <span class="cm">/*, other args omitted */</span><span class="p">)</span>
    <span class="n">__attribute__</span><span class="p">((</span> <span class="n">pointer_with_type_tag</span><span class="p">(</span><span class="n">mpi</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="p">));</span>
<span class="c1">// The function&#39;s 3rd argument will be a type tag; this type tag will</span>
<span class="c1">// determine the expected pointee type of the function&#39;s 1st argument.</span>
</pre></div>
</div>
</div>
<div class="section" id="type-tag-for-datatype">
<h3><a class="toc-backref" href="#id177">type_tag_for_datatype</a><a class="headerlink" href="#type-tag-for-datatype" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">type_tag_for_datatype</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::type_tag_for_datatype</span></tt></td>
<td><tt class="docutils literal"><span class="pre">clang::type_tag_for_datatype</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>When declaring a variable, use
<tt class="docutils literal"><span class="pre">__attribute__((type_tag_for_datatype(kind,</span> <span class="pre">type)))</span></tt> to create a type tag that
is tied to the <tt class="docutils literal"><span class="pre">type</span></tt> argument given to the attribute.</p>
<dl class="docutils">
<dt>In the attribute prototype above:</dt>
<dd><ul class="first last simple">
<li><tt class="docutils literal"><span class="pre">kind</span></tt> is an identifier that should be used when annotating all applicable
type tags.</li>
<li><tt class="docutils literal"><span class="pre">type</span></tt> indicates the name of the type.</li>
</ul>
</dd>
</dl>
<p>Clang supports annotating type tags of two forms.</p>
<blockquote>
<div><ul>
<li><p class="first"><strong>Type tag that is a reference to a declared identifier.</strong>
Use <tt class="docutils literal"><span class="pre">__attribute__((type_tag_for_datatype(kind,</span> <span class="pre">type)))</span></tt> when declaring that
identifier:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="k">typedef</span> <span class="kt">int</span> <span class="n">MPI_Datatype</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">mpi_datatype</span> <span class="n">mpi_datatype_int</span>
    <span class="n">__attribute__</span><span class="p">((</span> <span class="n">type_tag_for_datatype</span><span class="p">(</span><span class="n">mpi</span><span class="p">,</span><span class="kt">int</span><span class="p">)</span> <span class="p">));</span>
<span class="cp">#define MPI_INT ((MPI_Datatype) &amp;mpi_datatype_int)</span>
<span class="c1">// &amp;mpi_datatype_int is a type tag. It is tied to type &quot;int&quot;.</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>Type tag that is an integral literal.</strong>
Declare a <tt class="docutils literal"><span class="pre">static</span> <span class="pre">const</span></tt> variable with an initializer value and attach
<tt class="docutils literal"><span class="pre">__attribute__((type_tag_for_datatype(kind,</span> <span class="pre">type)))</span></tt> on that declaration:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="k">typedef</span> <span class="kt">int</span> <span class="n">MPI_Datatype</span><span class="p">;</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">MPI_Datatype</span> <span class="n">mpi_datatype_int</span>
    <span class="n">__attribute__</span><span class="p">((</span> <span class="n">type_tag_for_datatype</span><span class="p">(</span><span class="n">mpi</span><span class="p">,</span><span class="kt">int</span><span class="p">)</span> <span class="p">))</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
<span class="cp">#define MPI_INT ((MPI_Datatype) 42)</span>
<span class="c1">// The number 42 is a type tag. It is tied to type &quot;int&quot;.</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<p>The <tt class="docutils literal"><span class="pre">type_tag_for_datatype</span></tt> attribute also accepts an optional third argument
that determines how the type of the function argument specified by either
<tt class="docutils literal"><span class="pre">arg_idx</span></tt> or <tt class="docutils literal"><span class="pre">ptr_idx</span></tt> is compared against the type associated with the type
tag. (Recall that for the <tt class="docutils literal"><span class="pre">argument_with_type_tag</span></tt> attribute, the type of the
function argument specified by <tt class="docutils literal"><span class="pre">arg_idx</span></tt> is compared against the type
associated with the type tag. Also recall that for the <tt class="docutils literal"><span class="pre">pointer_with_type_tag</span></tt>
attribute, the pointee type of the function argument specified by <tt class="docutils literal"><span class="pre">ptr_idx</span></tt> is
compared against the type associated with the type tag.) There are two supported
values for this optional third argument:</p>
<blockquote>
<div><ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">layout_compatible</span></tt> will cause types to be compared according to
layout-compatibility rules (In C++11 [class.mem] p 17, 18, see the
layout-compatibility rules for two standard-layout struct types and for two
standard-layout union types). This is useful when creating a type tag
associated with a struct or union type. For example:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="cm">/* In mpi.h */</span>
<span class="k">typedef</span> <span class="kt">int</span> <span class="n">MPI_Datatype</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">internal_mpi_double_int</span> <span class="p">{</span> <span class="kt">double</span> <span class="n">d</span><span class="p">;</span> <span class="kt">int</span> <span class="n">i</span><span class="p">;</span> <span class="p">};</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">mpi_datatype</span> <span class="n">mpi_datatype_double_int</span>
    <span class="n">__attribute__</span><span class="p">((</span> <span class="n">type_tag_for_datatype</span><span class="p">(</span><span class="n">mpi</span><span class="p">,</span>
                    <span class="k">struct</span> <span class="n">internal_mpi_double_int</span><span class="p">,</span> <span class="n">layout_compatible</span><span class="p">)</span> <span class="p">));</span>

<span class="cp">#define MPI_DOUBLE_INT ((MPI_Datatype) &amp;mpi_datatype_double_int)</span>

<span class="kt">int</span> <span class="n">MPI_Send</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">int</span> <span class="n">count</span><span class="p">,</span> <span class="n">MPI_Datatype</span> <span class="n">datatype</span><span class="p">,</span> <span class="p">...)</span>
    <span class="n">__attribute__</span><span class="p">((</span> <span class="n">pointer_with_type_tag</span><span class="p">(</span><span class="n">mpi</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="p">));</span>

<span class="cm">/* In user code */</span>
<span class="k">struct</span> <span class="n">my_pair</span> <span class="p">{</span> <span class="kt">double</span> <span class="n">a</span><span class="p">;</span> <span class="kt">int</span> <span class="n">b</span><span class="p">;</span> <span class="p">};</span>
<span class="k">struct</span> <span class="n">my_pair</span> <span class="o">*</span><span class="n">buffer</span><span class="p">;</span>
<span class="n">MPI_Send</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">MPI_DOUBLE_INT</span> <span class="cm">/*, ...  */</span><span class="p">);</span> <span class="c1">// no warning because the</span>
                                                 <span class="c1">// layout of my_pair is</span>
                                                 <span class="c1">// compatible with that of</span>
                                                 <span class="c1">// internal_mpi_double_int</span>

<span class="k">struct</span> <span class="n">my_int_pair</span> <span class="p">{</span> <span class="kt">int</span> <span class="n">a</span><span class="p">;</span> <span class="kt">int</span> <span class="n">b</span><span class="p">;</span> <span class="p">}</span>
<span class="k">struct</span> <span class="n">my_int_pair</span> <span class="o">*</span><span class="n">buffer2</span><span class="p">;</span>
<span class="n">MPI_Send</span><span class="p">(</span><span class="n">buffer2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">MPI_DOUBLE_INT</span> <span class="cm">/*, ...  */</span><span class="p">);</span> <span class="c1">// warning because the</span>
                                                  <span class="c1">// layout of my_int_pair</span>
                                                  <span class="c1">// does not match that of</span>
                                                  <span class="c1">// internal_mpi_double_int</span>
</pre></div>
</div>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">must_be_null</span></tt> specifies that the function argument specified by either
<tt class="docutils literal"><span class="pre">arg_idx</span></tt> (for the <tt class="docutils literal"><span class="pre">argument_with_type_tag</span></tt> attribute) or <tt class="docutils literal"><span class="pre">ptr_idx</span></tt> (for
the <tt class="docutils literal"><span class="pre">pointer_with_type_tag</span></tt> attribute) should be a null pointer constant.
The second argument to the <tt class="docutils literal"><span class="pre">type_tag_for_datatype</span></tt> attribute is ignored. For
example:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="cm">/* In mpi.h */</span>
<span class="k">typedef</span> <span class="kt">int</span> <span class="n">MPI_Datatype</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">mpi_datatype</span> <span class="n">mpi_datatype_null</span>
    <span class="n">__attribute__</span><span class="p">((</span> <span class="n">type_tag_for_datatype</span><span class="p">(</span><span class="n">mpi</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">must_be_null</span><span class="p">)</span> <span class="p">));</span>

<span class="cp">#define MPI_DATATYPE_NULL ((MPI_Datatype) &amp;mpi_datatype_null)</span>
<span class="kt">int</span> <span class="n">MPI_Send</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">int</span> <span class="n">count</span><span class="p">,</span> <span class="n">MPI_Datatype</span> <span class="n">datatype</span><span class="p">,</span> <span class="p">...)</span>
    <span class="n">__attribute__</span><span class="p">((</span> <span class="n">pointer_with_type_tag</span><span class="p">(</span><span class="n">mpi</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="p">));</span>

<span class="cm">/* In user code */</span>
<span class="k">struct</span> <span class="n">my_pair</span> <span class="p">{</span> <span class="kt">double</span> <span class="n">a</span><span class="p">;</span> <span class="kt">int</span> <span class="n">b</span><span class="p">;</span> <span class="p">};</span>
<span class="k">struct</span> <span class="n">my_pair</span> <span class="o">*</span><span class="n">buffer</span><span class="p">;</span>
<span class="n">MPI_Send</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">MPI_DATATYPE_NULL</span> <span class="cm">/*, ...  */</span><span class="p">);</span> <span class="c1">// warning: MPI_DATATYPE_NULL</span>
                                                    <span class="c1">// was specified but buffer</span>
                                                    <span class="c1">// is not a null pointer</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="nullability-attributes">
<h2><a class="toc-backref" href="#id178">Nullability Attributes</a><a class="headerlink" href="#nullability-attributes" title="Permalink to this headline">¶</a></h2>
<p>Whether a particular pointer may be &#8220;null&#8221; is an important concern when working with pointers in the C family of languages. The various nullability attributes indicate whether a particular pointer can be null or not, which makes APIs more expressive and can help static analysis tools identify bugs involving null pointers. Clang supports several kinds of nullability attributes: the <tt class="docutils literal"><span class="pre">nonnull</span></tt> and <tt class="docutils literal"><span class="pre">returns_nonnull</span></tt> attributes indicate which function or method parameters and result types can never be null, while nullability type qualifiers indicate which pointer types can be null (<tt class="docutils literal"><span class="pre">_Nullable</span></tt>) or cannot be null (<tt class="docutils literal"><span class="pre">_Nonnull</span></tt>).</p>
<p>The nullability (type) qualifiers express whether a value of a given pointer type can be null (the <tt class="docutils literal"><span class="pre">_Nullable</span></tt> qualifier), doesn&#8217;t have a defined meaning for null (the <tt class="docutils literal"><span class="pre">_Nonnull</span></tt> qualifier), or for which the purpose of null is unclear (the <tt class="docutils literal"><span class="pre">_Null_unspecified</span></tt> qualifier). Because nullability qualifiers are expressed within the type system, they are more general than the <tt class="docutils literal"><span class="pre">nonnull</span></tt> and <tt class="docutils literal"><span class="pre">returns_nonnull</span></tt> attributes, allowing one to express (for example) a nullable pointer to an array of nonnull pointers. Nullability qualifiers are written to the right of the pointer to which they apply. For example:</p>
<blockquote>
<div><div class="highlight-c"><div class="highlight"><pre><span class="c1">// No meaningful result when &#39;ptr&#39; is null (here, it happens to be undefined behavior).</span>
<span class="kt">int</span> <span class="nf">fetch</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span> <span class="n">_Nonnull</span> <span class="n">ptr</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="o">*</span><span class="n">ptr</span><span class="p">;</span> <span class="p">}</span>

<span class="c1">// &#39;ptr&#39; may be null.</span>
<span class="kt">int</span> <span class="nf">fetch_or_zero</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span> <span class="n">_Nullable</span> <span class="n">ptr</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">ptr</span> <span class="o">?</span> <span class="o">*</span><span class="n">ptr</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// A nullable pointer to non-null pointers to const characters.</span>
<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">join_strings</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">_Nonnull</span> <span class="o">*</span> <span class="n">_Nullable</span> <span class="n">strings</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">n</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>In Objective-C, there is an alternate spelling for the nullability qualifiers that can be used in Objective-C methods and properties using context-sensitive, non-underscored keywords. For example:</p>
<blockquote>
<div><div class="highlight-objective-c"><div class="highlight"><pre><span class="k">@interface</span> <span class="nc">NSView</span> : <span class="nc">NSResponder</span>
  <span class="o">-</span> <span class="p">(</span><span class="n">nullable</span> <span class="n">NSView</span> <span class="o">*</span><span class="p">)</span><span class="nl">ancestorSharedWithView:</span><span class="p">(</span><span class="n">nonnull</span> <span class="n">NSView</span> <span class="o">*</span><span class="p">)</span><span class="n">aView</span><span class="p">;</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">assign</span><span class="p">,</span> <span class="n">nullable</span><span class="p">)</span> <span class="n">NSView</span> <span class="o">*</span><span class="n">superview</span><span class="p">;</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">readonly</span><span class="p">,</span> <span class="n">nonnull</span><span class="p">)</span> <span class="n">NSArray</span> <span class="o">*</span><span class="n">subviews</span><span class="p">;</span>
<span class="k">@end</span>
</pre></div>
</div>
</div></blockquote>
<div class="section" id="nonnull">
<h3><a class="toc-backref" href="#id179">_Nonnull</a><a class="headerlink" href="#nonnull" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">_Nonnull</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">_Nonnull</span></tt> nullability qualifier indicates that null is not a meaningful value for a value of the <tt class="docutils literal"><span class="pre">_Nonnull</span></tt> pointer type. For example, given a declaration such as:</p>
<blockquote>
<div><div class="highlight-c"><div class="highlight"><pre><span class="kt">int</span> <span class="n">fetch</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span> <span class="n">_Nonnull</span> <span class="n">ptr</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>a caller of <tt class="docutils literal"><span class="pre">fetch</span></tt> should not provide a null value, and the compiler will produce a warning if it sees a literal null value passed to <tt class="docutils literal"><span class="pre">fetch</span></tt>. Note that, unlike the declaration attribute <tt class="docutils literal"><span class="pre">nonnull</span></tt>, the presence of <tt class="docutils literal"><span class="pre">_Nonnull</span></tt> does not imply that passing null is undefined behavior: <tt class="docutils literal"><span class="pre">fetch</span></tt> is free to consider null undefined behavior or (perhaps for backward-compatibility reasons) defensively handle null.</p>
</div>
<div class="section" id="null-unspecified">
<h3><a class="toc-backref" href="#id180">_Null_unspecified</a><a class="headerlink" href="#null-unspecified" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">_Null_unspecified</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">_Null_unspecified</span></tt> nullability qualifier indicates that neither the <tt class="docutils literal"><span class="pre">_Nonnull</span></tt> nor <tt class="docutils literal"><span class="pre">_Nullable</span></tt> qualifiers make sense for a particular pointer type. It is used primarily to indicate that the role of null with specific pointers in a nullability-annotated header is unclear, e.g., due to overly-complex implementations or historical factors with a long-lived API.</p>
</div>
<div class="section" id="nullable">
<h3><a class="toc-backref" href="#id181">_Nullable</a><a class="headerlink" href="#nullable" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">_Nullable</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">_Nullable</span></tt> nullability qualifier indicates that a value of the <tt class="docutils literal"><span class="pre">_Nullable</span></tt> pointer type can be null. For example, given:</p>
<blockquote>
<div><div class="highlight-c"><div class="highlight"><pre><span class="kt">int</span> <span class="n">fetch_or_zero</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span> <span class="n">_Nullable</span> <span class="n">ptr</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>a caller of <tt class="docutils literal"><span class="pre">fetch_or_zero</span></tt> can provide null.</p>
</div>
<div class="section" id="id14">
<h3><a class="toc-backref" href="#id182">nonnull</a><a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">nonnull</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::nonnull</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">nonnull</span></tt> attribute indicates that some function parameters must not be null, and can be used in several different ways. It&#8217;s original usage (<a class="reference external" href="https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#Common-Function-Attributes">from GCC</a>) is as a function (or Objective-C method) attribute that specifies which parameters of the function are nonnull in a comma-separated list. For example:</p>
<blockquote>
<div><div class="highlight-c"><div class="highlight"><pre><span class="k">extern</span> <span class="kt">void</span> <span class="o">*</span> <span class="n">my_memcpy</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">dest</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">src</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">len</span><span class="p">)</span>
                <span class="n">__attribute__</span><span class="p">((</span><span class="n">nonnull</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)));</span>
</pre></div>
</div>
</div></blockquote>
<p>Here, the <tt class="docutils literal"><span class="pre">nonnull</span></tt> attribute indicates that parameters 1 and 2
cannot have a null value. Omitting the parenthesized list of parameter indices means that all parameters of pointer type cannot be null:</p>
<blockquote>
<div><div class="highlight-c"><div class="highlight"><pre><span class="k">extern</span> <span class="kt">void</span> <span class="o">*</span> <span class="n">my_memcpy</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">dest</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">src</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">len</span><span class="p">)</span>
                <span class="n">__attribute__</span><span class="p">((</span><span class="n">nonnull</span><span class="p">));</span>
</pre></div>
</div>
</div></blockquote>
<p>Clang also allows the <tt class="docutils literal"><span class="pre">nonnull</span></tt> attribute to be placed directly on a function (or Objective-C method) parameter, eliminating the need to specify the parameter index ahead of type. For example:</p>
<blockquote>
<div><div class="highlight-c"><div class="highlight"><pre><span class="k">extern</span> <span class="kt">void</span> <span class="o">*</span> <span class="n">my_memcpy</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">dest</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">nonnull</span><span class="p">)),</span>
                         <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">src</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">nonnull</span><span class="p">)),</span> <span class="kt">size_t</span> <span class="n">len</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>Note that the <tt class="docutils literal"><span class="pre">nonnull</span></tt> attribute indicates that passing null to a non-null parameter is undefined behavior, which the optimizer may take advantage of to, e.g., remove null checks. The <tt class="docutils literal"><span class="pre">_Nonnull</span></tt> type qualifier indicates that a pointer cannot be null in a more general manner (because it is part of the type system) and does not imply undefined behavior, making it more widely applicable.</p>
</div>
<div class="section" id="returns-nonnull">
<h3><a class="toc-backref" href="#id183">returns_nonnull</a><a class="headerlink" href="#returns-nonnull" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<caption>Supported Syntaxes</caption>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GNU</th>
<th class="head">C++11</th>
<th class="head">C2x</th>
<th class="head"><tt class="docutils literal"><span class="pre">__declspec</span></tt></th>
<th class="head">Keyword</th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">returns_nonnull</span></tt></td>
<td><tt class="docutils literal"><span class="pre">gnu::returns_nonnull</span></tt></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">returns_nonnull</span></tt> attribute indicates that a particular function (or Objective-C method) always returns a non-null pointer. For example, a particular system <tt class="docutils literal"><span class="pre">malloc</span></tt> might be defined to terminate a process when memory is not available rather than returning a null pointer:</p>
<blockquote>
<div><div class="highlight-c"><div class="highlight"><pre><span class="k">extern</span> <span class="kt">void</span> <span class="o">*</span> <span class="n">malloc</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">size</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">returns_nonnull</span><span class="p">));</span>
</pre></div>
</div>
</div></blockquote>
<p>The <tt class="docutils literal"><span class="pre">returns_nonnull</span></tt> attribute implies that returning a null pointer is undefined behavior, which the optimizer may take advantage of. The <tt class="docutils literal"><span class="pre">_Nonnull</span></tt> type qualifier indicates that a pointer cannot be null in a more general manner (because it is part of the type system) and does not imply undefined behavior, making it more widely applicable</p>
</div>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="ClangCommandLineReference.html">Clang command line argument reference</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="DiagnosticsReference.html">Diagnostic flags in Clang</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2007-2019, The Clang Team.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>